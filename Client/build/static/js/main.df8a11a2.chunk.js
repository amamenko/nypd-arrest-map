(this["webpackJsonpnypd-arrest-map"]=this["webpackJsonpnypd-arrest-map"]||[]).push([[0],{150:function(e,t){},218:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},279:function(e,t,n){},340:function(e,t,n){},341:function(e,t){},349:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(2),c=n(58),i=n.n(c),o=(n(218),n(200)),s=n(16),l=n(364),u=n(195),d=n(367),f=(n(220),n(221),n(181)),b=n(119),p=n(42),j=n(86),g=n.n(j),m=n(76),h=n(87),O=n.n(h),x=(n(240),n(241),n(242),n(144)),y=n(182),_=n(118),v=(n(243),n(159),function(e){var t=e.footerMenuActive,n=e.isMobileOrTablet;return Object(r.jsx)(_.a,{trigger:Object(r.jsx)("div",{className:"info_circle_container",style:{pointerEvents:n&&t?"none":"all"},children:Object(r.jsx)(b.b,{color:"rgb(255, 255, 255)",style:{opacity:n&&t?.2:1,transition:"opacity 1s ease"},className:"info_button"})}),modal:!0,children:function(e){return Object(r.jsxs)("div",{className:"modal",children:[Object(r.jsx)("button",{className:"close",onClick:e,children:"\xd7"}),Object(r.jsx)("div",{className:"header",children:"About NYPD Arrest Map"}),Object(r.jsxs)("div",{className:"content",children:["NYPD Arrest Map is a data visualization and analysis tool that utilizes the"," ",Object(r.jsx)("a",{href:"https://data.cityofnewyork.us/Public-Safety/NYPD-Arrest-Data-Year-to-Date-/uip8-fykc",target:"_blank",rel:"noopener noreferrer",children:"NYPD Arrest Data (Year to Date)"})," ","NYC Open Data dataset. This dataset is updated quarterly and reviewed by the Office of Management Analysis and Planning before being posted on the New York Police Department website. The data reflected here will be updated shortly after such changes.",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),"Occasionally, arrests in the NYPD datasets will be erroneously attributed to one borough, while having the longitude and latitude of another. These have been corrected in the NYPD Arrest Map in favor of the arrest's geocoordinates.",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),'As stated by the NYPD, "each record represents an arrest effected in NYC by the NYPD and includes information about the type of crime, the location and time of enforcement. In addition, information related to suspect demographics is also included. This data can be used by the public to explore the nature of police enforcement activity."',Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:"Have any questions? Comments? Contact me via e-mail or LinkedIn"}),Object(r.jsxs)("div",{className:"pop_up_icons_container",children:[Object(r.jsx)("a",{href:"https://github.com/amamenko/nypd-arrest-map-full-stack",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)(x.a,{color:"#000"})}),Object(r.jsx)("a",{href:"https://www.linkedin.com/in/avraham-mamenko-0599831b8/",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)(x.b,{color:"#000"})}),Object(r.jsx)("a",{href:"mailto:amamenko@hotmail.com?subject=Comment/Question About NYPD Arrest Map",children:Object(r.jsx)(y.a,{color:"#000"})})]})]})]})}})}),N=n(14),A=function(e){return{type:"CHANGE_CATEGORY_FILTER",category:e}},R=function(e){return{type:"CHANGE_OFFENSE_FILTER",offense:e}},C=function(e){return{type:"CHANGE_AGE_FILTER",age:e}},E=function(e){return{type:"CHANGE_RACE_FILTER",race:e}},D=function(e){return{type:"CHANGE_SEX_FILTER",sex:e}},T=function(e){return{type:"CHANGE_BOROUGH_FILTER",borough:e}},S=function(){return{type:"APPLYING_FILTERS"}},k=function(){return{type:"RESET_FILTERS"}},F=function(e){var t=e.loadData,n=e.raceUniqueValues,c=e.boroughUniqueValues,i=e.ageGroupData,o=e.offenseDescriptionUniqueValues,l=e.setFilters,u=e.changeLaddaLoading,d=e.laddaLoading,j=e.resetLaddaLoading,x=e.changeResetLaddaLoading,y=e.menuClicked,_=e.changeMenuClicked,F=e.collapseOpen,M=e.changeCollapseOpen,L=e.layersRef,G=e.isMobileOrTablet,P=e.footerMenuActive,w=e.isTablet,I=e.currentFilters,B=e.isSame,U=Object(N.b)(),V=Object(N.c)((function(e){return e.applyingFiltersReducer.filters})),q=Object(N.c)((function(e){return e.filteredDataChunksReducer.data})),z=Object(N.c)((function(e){return e.totalCountReducer.total})),Y=Object(N.c)((function(e){return e.categoryFilterReducer.category})),W=Object(N.c)((function(e){return e.ageFilterReducer.age})),H=Object(N.c)((function(e){return e.boroughFilterReducer.borough})),Q=Object(N.c)((function(e){return e.sexFilterReducer.sex})),J=Object(N.c)((function(e){return e.offenseFilterReducer.offense})),K=Object(N.c)((function(e){return e.raceFilterReducer.race})),X=Object(N.c)((function(e){return e.resetFiltersReducer.reset})),Z=Object(N.c)((function(e){return e.ageTimelineColumnsReducer.columns})),$=Object(N.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),ee=Object(N.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),te=Object(N.c)((function(e){return e.raceTimelineColumnsReducer.columns})),ne=Object(N.c)((function(e){return e.sexTimelineColumnsReducer.columns})),re=Object(a.useRef)(null),ae=document.getElementsByClassName("bm-burger-button"),ce=document.getElementsByClassName("mapboxgl-ctrl-bottom-left"),ie=document.getElementsByClassName("footer_menu_trigger"),oe=document.getElementsByClassName("overview_tooltip"),se=document.getElementsByClassName("map_details_tooltip_container"),le=document.getElementsByClassName("overview_tooltip legend_tooltip"),ue=document.getElementsByClassName("reset_filters_button"),de=document.getElementsByClassName("apply_filters_button"),fe=Object(a.useState)(!0),be=Object(s.a)(fe,2),pe=be[0],je=be[1],ge=function(e){if(Y.includes(e))U(A(Y.filter((function(t){return t!==e}))));else{var t=Y.slice();t.push(e),U(A(t))}},me=function(e){if(Q.includes(e))U(D(Q.filter((function(t){return t!==e}))));else{var t=Q.slice();t.push(e),U(D(t))}};return Object(a.useEffect)((function(){G&&P?(ae[0].style.opacity=.2,ae[0].style.pointerEvents="none",ae[0].style.transition="opacity 0.5s ease",oe[0]&&se[0]&&(oe[0].style.setProperty("opacity",.4,"important"),oe[0].style.setProperty("pointerEvents","none"),oe[0].style.setProperty("transition","opacity 0.5s ease"),se[0].style.setProperty("opacity",.4,"important"),se[0].style.setProperty("pointerEvents","none"),se[0].style.setProperty("transition","opacity 0.5s ease"))):(ae[0].style.opacity=1,ae[0].style.pointerEvents="all",ae[0].style.transition="opacity 0.5s ease",oe[0]&&se[0]&&(oe[0].style.setProperty("opacity",1,"important"),oe[0].style.setProperty("pointerEvents","all"),oe[0].style.setProperty("transition","opacity 0.5s ease"),se[0].style.setProperty("opacity",1,"important"),se[0].style.setProperty("pointerEvents","all"),se[0].style.setProperty("transition","opacity 0.5s ease")))}),[P,ae,G,se,oe]),Object(a.useEffect)((function(){if(G&&Z&&Z.length>0&&$&&$.length>0&&ee&&ee.length>0&&te&&te.length>0&&ne&&ne.length>0){var e=setTimeout((function(){pe&&je(!1)}),4e3);return function(){clearTimeout(e)}}}),[G,pe,Z,$,ee,te,ne]),Object(a.useEffect)((function(){pe||(oe[0]&&se[0]&&(oe[0].style.setProperty("opacity",1,"important"),se[0].style.setProperty("opacity",1,"important")),le[0]&&le[0].style.setProperty("opacity",1,"important"))}),[pe,oe,se,le]),Object(a.useEffect)((function(){G||(y?(oe[0]&&se[0]&&(oe[0].style.setProperty("opacity",.3,"important"),se[0].style.setProperty("opacity",.3,"important")),le[0]&&le[0].style.setProperty("opacity",.3,"important")):(oe[0]&&se[0]&&(oe[0].style.setProperty("opacity",1,"important"),se[0].style.setProperty("opacity",1,"important")),le[0]&&le[0].style.setProperty("opacity",1,"important")))}),[G,le,y,se,oe]),Object(a.useEffect)((function(){if(!y){var e=document.getElementsByClassName("bm-menu"),t=document.getElementsByClassName("nav_item_content_container");setTimeout((function(){e[0]&&(e[0].scrollTop=0);for(var n=0;n<t.length;n++)t[n].scrollTop=0}),1500),""!==F&&M("")}}),[y,F,M]),Object(a.useEffect)((function(){0===I.category.length&&0===I.offense.length&&0===I.age.length&&0===I.race.length&&0===I.sex.length&&0===I.borough.length?ue[0]&&(ue[0].style.opacity=.4,ue[0].style.pointerEvents="none"):ue[0]&&(ue[0].style.opacity=1,ue[0].style.pointerEvents="auto")}),[I.age.length,I.borough.length,I.category.length,I.offense.length,I.race.length,I.sex.length,ue]),Object(a.useEffect)((function(){B(I.category,Y)&&B(I.offense,J)&&B(I.age,W)&&B(I.race,K)&&B(I.sex,Q)&&B(I.borough,H)?de[0]&&(de[0].style.opacity=.4,de[0].style.pointerEvents="none"):de[0]&&(de[0].style.opacity=1,de[0].style.pointerEvents="auto")}),[I.age,I.borough,I.category,I.offense,I.race,I.sex,W,H,Y,J,K,Q,de,B]),Object(r.jsxs)("div",{className:"navigation_bar_container",children:[Object(r.jsx)(m.a,{content:Object(r.jsxs)("div",{className:"map_details_tooltip_container",children:[Object(r.jsxs)("div",{className:"overview_tooltip_content",style:{minWidth:re.current&&re.current.clientWidth,maxWidth:re.current&&re.current.clientWidth},children:[Object(r.jsx)("p",{style:{color:"rgb(166, 166, 166)"},children:"Data Last Updated: November 5, 2020"}),Object(r.jsxs)("p",{children:["Total Number of Arrests Shown: ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:q.flat().length.toLocaleString()})," ","of ",Object(r.jsx)("strong",{children:z.toLocaleString()})]})]}),G?w?null:Object(r.jsxs)("div",{className:"map_legend_container",style:{minWidth:re.current&&re.current.clientWidth,maxWidth:re.current&&re.current.clientWidth},children:[Object(r.jsx)("p",{children:"Map Legend"}),Object(r.jsxs)("div",{className:"map_legend_items_container",children:[Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 0, 0)"}),Object(r.jsx)("p",{children:"Felony"})]}),Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 116, 0)"}),Object(r.jsx)("p",{children:"Misdemeanor"})]}),Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 193, 0)"}),Object(r.jsx)("p",{children:"Violation"})]})]})]}):null]}),visible:L.current.length>0&&!!Z&&Z.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0,allowHTML:!0,reference:re.current,className:"overview_tooltip"}),Object(r.jsx)(m.a,{content:Object(r.jsxs)("div",{className:"map_legend_container",style:{minWidth:re.current&&re.current.clientWidth,maxWidth:re.current&&re.current.clientWidth},children:[Object(r.jsx)("p",{children:"Map Legend"}),Object(r.jsxs)("div",{className:"map_legend_items_container",children:[Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 0, 0)"}),Object(r.jsx)("p",{children:"Felony"})]}),Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 116, 0)"}),Object(r.jsx)("p",{children:"Misdemeanor"})]}),Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 193, 0)"}),Object(r.jsx)("p",{children:"Violation"})]})]})]}),visible:G?!!w&&(L.current.length>0&&!!Z&&Z.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0):L.current.length>0&&!!Z&&Z.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0,allowHTML:!0,reference:G?w?ae[0]:ie[0]:ce[0],className:"overview_tooltip legend_tooltip",placement:"top-start"}),Object(r.jsx)("div",{className:"nypd_arrest_map_logo_container",ref:re,children:Object(r.jsxs)("a",{href:"/",children:[Object(r.jsx)("p",{children:"NYPD"}),Object(r.jsx)("p",{children:"Arrest"}),Object(r.jsx)("p",{children:"Map"})]})}),Object(r.jsx)(m.a,{content:G?Object(r.jsxs)("p",{style:{textAlign:"center"},children:["Click here ",Object(r.jsx)("br",{}),"to set ",Object(r.jsx)("br",{}),"data filters"]}):"Click here to set data filters",duration:[null,500],arrow:!0,visible:pe&&!!Z&&Z.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0,reference:ae[0],className:"burger_tooltip",placement:"bottom-end",onClickOutside:function(){return je(!1)}}),Object(r.jsx)(v,{footerMenuActive:P,isMobileOrTablet:G}),Object(r.jsxs)(f.slide,{right:!0,className:"navbar_nav_menu",customBurgerIcon:Object(r.jsx)(b.a,{color:"rgb(93, 188, 210)"}),onOpen:function(){y?_(!1):(_(!0),pe&&je(!1))},onClose:function(){return _(!1)},isOpen:y,children:[Object(r.jsx)(g.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Category"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return M("category")},onTriggerClosing:function(){return M("")},open:"category"===F,className:"nav_item",children:Object(r.jsxs)("div",{className:"nav_item_content_container",children:[Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:Y.includes("F"),onChange:function(){return ge("F")}}),"Felony"]})}),Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:Y.includes("M"),onChange:function(){return ge("M")}}),"Misdemeanor"]})}),Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:Y.includes("V"),onChange:function(){return ge("V")}}),"Violation"]})})]})}),Object(r.jsx)(g.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Offense"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return M("description")},onTriggerClosing:function(){return M("")},open:"description"===F,className:"nav_item",children:Object(r.jsx)("div",{className:"nav_item_content_container",children:o&&0!==o.length?o.map((function(e,t){return!e||e.includes("OTHER STATE LAWS")&&e.includes("(")?null:Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:J.includes(e),onChange:function(){return function(e){if(J.includes(e))U(R(J.filter((function(t){return t!==e}))));else{var t=J.slice();t.push(e),U(R(t))}}(e)}}),e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")]})},t)})):null})}),Object(r.jsx)(g.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Age Group"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return M("age")},onTriggerClosing:function(){return M("")},open:"age"===F,className:"nav_item",children:Object(r.jsx)("div",{className:"nav_item_content_container",children:i?i.sort((function(e,t){return e.localeCompare(t)})).map((function(e,t){return Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:W.includes(e),onChange:function(){return function(e){if(W.includes(e))U(C(W.filter((function(t){return t!==e}))));else{var t=W.slice();t.push(e),U(C(t))}}(e)}}),"65"===e?"65+":e]})},t)})):null})}),Object(r.jsx)(g.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Race"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return M("race")},onTriggerClosing:function(){return M("")},open:"race"===F,className:"nav_item",children:Object(r.jsx)("div",{className:"nav_item_content_container",children:n?n.map((function(e,t){return e?Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:K.includes(e),onChange:function(){return function(e){if(K.includes(e))U(E(K.filter((function(t){return t!==e}))));else{var t=K.slice();t.push(e),U(E(t))}}(e)}}),e&&e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")]})},t):null})):null})}),Object(r.jsx)(g.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Sex"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return M("sex")},onTriggerClosing:function(){return M("")},open:"sex"===F,className:"nav_item",children:Object(r.jsxs)("div",{className:"nav_item_content_container",children:[Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:Q.includes("F"),onChange:function(){return me("F")}}),"Female"]})}),Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:Q.includes("M"),onChange:function(){return me("M")}}),"Male"]})})]})}),Object(r.jsx)(g.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Borough"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return M("borough")},onTriggerClosing:function(){return M("")},open:"borough"===F,className:"nav_item",children:Object(r.jsx)("div",{className:"nav_item_content_container",children:c?c.map((function(e,t){return Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:H.includes(e),onChange:function(){return function(e){if(H.includes(e))U(T(H.filter((function(t){return t!==e}))));else{var t=H.slice();t.push(e),U(T(t))}}(e)}}),"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"]})},t)})):null})}),Object(r.jsx)("span",{className:"spacer"}),Object(r.jsxs)("div",{className:"filter_buttons_container",children:[Object(r.jsx)(O.a,{loading:d,className:"apply_filters_button",onClick:function(){V||U(S()),d||u(!0),l(Y,J,W,K,Q,H,t)},"data-color":"blue","data-size":h.XL,"data-style":h.EXPAND_LEFT,"data-spinner-size":30,"data-spinner-color":"#fff","data-spinner-lines":12,children:d?"APPLYING FILTERS":"APPLY FILTERS"}),Object(r.jsx)(O.a,{loading:j,className:"reset_filters_button",onClick:function(){X||U(k()),j||x(!0),U(A([])),U(R([])),U(C([])),U(E([])),U(D([])),U(T([])),l([],[],[],[],[],[],t)},"data-color":"red","data-size":h.XL,"data-style":h.EXPAND_LEFT,"data-spinner-size":30,"data-spinner-color":"#fff","data-spinner-lines":12,children:j?"RESETTING":"RESET FILTERS"})]})]})]})},M=n(185),L=n(186),G=n(147),P=n.n(G),w=(n(278),n(279),n(280),n(36)),I=n(30),B=n.n(I),U=function(e){var t=e.filteredArrestCategory,n=e.graphOption,a=Object(N.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===n?"block":"none"},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Breakdown by Category"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:a?Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}):Object(r.jsx)(w.a,{chartType:"PieChart",loader:Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}),data:t?[["Category","Number of Arrests"],["Felony",t.filter((function(e){return"F"===e})).length],["Misdemeanor",t.filter((function(e){return"M"===e})).length],["Violation",t.filter((function(e){return"F"!==e&&"M"!==e})).length]]:[],options:{backgroundColor:"transparent"}})})]})},V=function(e){var t=e.filteredAgeGroupData,n=e.filteredAgeGroup,a=e.graphOption,c=Object(N.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Breakdown by Age Group"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:c?Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}):Object(r.jsx)(w.a,{chartType:"PieChart",loader:Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Age Group","Number of Arrests"]].concat(t.sort((function(e,t){return e.localeCompare(t)})).map((function(e){return["65"===e?"65+":e,n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})})]})},q=function(e){var t=e.filteredRaceUniqueValues,n=e.filteredRaceArr,a=e.graphOption,c=Object(N.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Breakdown by Race"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:c?Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}):Object(r.jsx)(w.a,{chartType:"PieChart",loader:Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Race","Number of Arrests"]].concat(t.map((function(e){return[e?e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/"):null,n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})})]})},z=function(e){var t=e.filteredSexUniqueValues,n=e.filteredSexArr,a=e.graphOption,c=Object(N.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Breakdown by Sex"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:c?Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}):Object(r.jsx)(w.a,{chartType:"PieChart",loader:Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Sex","Number of Arrests"]].concat(t.map((function(e){return["M"===e?"Male":"Female",n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})})]})},Y=function(e){var t=e.filteredBoroughUniqueValues,n=e.filteredBoroughArr,a=e.graphOption,c=Object(N.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Breakdown by Borough"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:c?Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}):Object(r.jsx)(w.a,{chartType:"PieChart",loader:Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Borough","Number of Arrests"]].concat(t.map((function(e){return["B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown",n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})})]})},W=function(e){var t=e.filteredOffenseDescriptionArr,n=e.filteredOffenseDescriptionUniqueValues,c=e.graphOption,i=e.isSame,o=e.usePrevious,l=e.isMobileOrTablet,u=e.isMediumLaptop,d=Object(a.useState)([]),f=Object(s.a)(d,2),b=f[0],p=f[1],j=o(t),g=o(n),m=Object(N.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(a.useEffect)((function(){if(t&&t.length>0&&n.length>0&&(t!==j||n!==g)){var e=n.map((function(e){return[e,t.filter((function(t){return t===e})).length]})).sort((function(e,t){return e[1]>t[1]?1:-1}));i(e,b)||p(e)}}),[i,t,n,b,j,g]),Object(r.jsx)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===c?"block":"none"},children:b.length>0?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Top 5 Offenses"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:m?Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}):Object(r.jsx)(w.a,{chartType:"BarChart",loader:Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Offense Description","Number of Arrests"]].concat(b.length>0?b.slice(b.length-5,b.length).sort((function(e,t){return e[1]>t[1]?-1:1})):["UNKNOWN",1]),options:{backgroundColor:"transparent",legend:{position:"none"},width:l?300:u?400:600,bar:l?null:{groupWidth:"95%"},chartArea:l?null:{width:"50%",height:"50%"}}})})]}):null})},H=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(N.c)((function(e){return e.ageTimelineColumnsReducer.columns}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Age Group Trends"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:Object(r.jsx)(w.a,{legendToggle:!0,chartType:"LineChart",loader:Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})})]})},Q=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(N.c)((function(e){return e.boroughTimelineColumnsReducer.columns}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Borough Trends"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:Object(r.jsx)(w.a,{legendToggle:!0,chartType:"LineChart",loader:Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})})]})},J=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(N.c)((function(e){return e.categoryTimelineColumnsReducer.columns}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Category Trends"}),Object(r.jsx)("div",{className:"bottom_info_pie_container category_timeline_container",children:Object(r.jsx)(w.a,{legendToggle:!0,chartType:"LineChart",loader:Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})})]})},K=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(N.c)((function(e){return e.sexTimelineColumnsReducer.columns}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Gender Trends"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:Object(r.jsx)(w.a,{legendToggle:!0,chartType:"LineChart",loader:Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})})]})},X=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(N.c)((function(e){return e.raceTimelineColumnsReducer.columns}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Race Trends"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:Object(r.jsx)(w.a,{legendToggle:!0,chartType:"LineChart",loader:Object(r.jsx)(B.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})})]})},Z=n(132),$=function(e){var t=e.tooltipVisible,n=e.filteredAgeGroup,c=e.filteredRaceArr,i=e.filteredSexArr,o=e.filteredBoroughArr,l=e.filteredOffenseDescriptionArr,u=e.filteredArrestCategory,d=e.filteredUniqueCategory,f=e.filteredAgeGroupData,b=e.filteredRaceUniqueValues,j=e.filteredSexUniqueValues,g=e.filteredBoroughUniqueValues,h=e.filteredOffenseDescriptionUniqueValues,O=e.currentFilters,x=e.isSame,y=e.usePrevious,_=e.graphOption,v=e.changeGraphOption,A=e.layersRef,R=e.isMobileOrTablet,C=e.isMediumLaptop,E=e.footerMenuActive,D=e.changeFooterMenuActive,T=e.filteredTimelineAgeGroupData,S=e.filteredTimelineBoroughData,k=e.filteredTimelineCategoryData,F=e.filteredTimelineSexData,G=e.filteredTimelineRaceData,w=Object(N.c)((function(e){return e.applyingFiltersReducer.filters})),I=Object(N.c)((function(e){return e.trendsAvailableReducer.available})),B=Object(N.c)((function(e){return e.ageTimelineColumnsReducer.columns})),$=Object(N.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),ee=Object(N.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),te=Object(N.c)((function(e){return e.raceTimelineColumnsReducer.columns})),ne=Object(N.c)((function(e){return e.sexTimelineColumnsReducer.columns})),re=Object(a.useState)(!1),ae=Object(s.a)(re,2),ce=ae[0],ie=ae[1],oe=Object(a.useState)(!R),se=Object(s.a)(oe,2),le=se[0],ue=se[1],de=Object(a.useState)(!0),fe=Object(s.a)(de,2),be=fe[0],pe=fe[1],je=Object(a.useRef)(null),ge=Object(a.useRef)(null),me=document.getElementsByClassName("carousel_right_arrow"),he=document.getElementsByClassName("alice-carousel"),Oe=document.getElementsByClassName("overview_carousel"),xe=document.getElementsByClassName("trends_carousel"),ye=document.getElementsByClassName("category_timeline_container"),_e=document.getElementsByClassName("google-visualization-tooltip");Object(a.useEffect)((function(){if("trends"===_&&!w){var e=setInterval((function(){var e=_e[0],t=document.getElementsByTagName("circle");if(e){for(var n=document.getElementsByClassName("alice-carousel__stage-item __active"),r=n[1].getElementsByTagName("path"),a=n[1].getElementsByTagName("text"),c=(r.length-2)/2,i=0;i<c;i++)if("none"===r.item(i).getAttribute("stroke")&&a.item(i).textContent.slice(0,4)===e.lastChild.firstChild.textContent.split(":")[0].slice(0,4)){e.style.display="none";for(var o=0;o<t.length;o++)t[o].style.display="none"}}else for(var s=0;s<t.length;s++)t[s].style.display="block"}),10);return function(){clearInterval(e)}}}),[_e,_,w]),Object(a.useEffect)((function(){if("overview"===_)if(ge.current)ge.current.style.display="none";else var e=setInterval((function(){ge&&je.current&&(ge.current.style.display="none",clearInterval(e))}),500);else je.current&&(je.current.style.display="none")}),[_]),Object(a.useEffect)((function(){var e=document.getElementsByClassName("graph_options_container")[0].lastChild.lastChild;e.style.opacity=I?1:.7}),[I]),Object(a.useEffect)((function(){if(!w)for(var e=0;e<he.length;e++)0===e?he[e].className.includes("overview_carousel")||(he[e].className+=" overview_carousel"):he[e].className.includes("trends_carousel")||(he[e].className+=" trends_carousel")}),[he,w]),Object(a.useEffect)((function(){if("overview"!==_||w)Oe&&Oe[0]&&(Oe[0].style.opacity=0,Oe[0].style.opacity=-1),xe&&xe[0]&&(xe[0].style.opacity=1,xe[0].style.zIndex=1);else if(Oe&&Oe[0]&&(Oe[0].style.opacity=1,Oe[0].style.zIndex=1),xe)if(xe[0])xe[0].style.opacity=0,xe[0].style.zIndex=-1;else var e=setInterval((function(){var t=document.getElementsByClassName("trends_carousel");t[0]&&(t[0].style.opacity=0,t[0].style.zIndex=-1,clearInterval(e))}),500)}),[_,Oe,xe,w]);return Object(r.jsxs)("div",{className:"bottom_info_panel_container",style:{zIndex:R?t?-1:10:t?-1:0,transform:R?E?"translate3d(0, 0, 0)":"translate3d(0, 100%, 0)":"none"},children:[Object(r.jsx)("div",{className:"shadow_overlay",onClick:function(){return D(!1)},style:{opacity:E?1:0,display:E?"block":"none"},children:" "}),Object(r.jsx)("div",{className:"footer_menu_trigger",onClick:function(){E?D(!1):(D(!0),ce||(setTimeout((function(){ue(!0)}),1800),ie(!0)))},children:E?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(L.a,{})," BACK TO ARREST MAP"]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(M.a,{})," VIEW GRAPHS AND TRENDS"]})}),Object(r.jsxs)("div",{className:"bottom_info_main_info_box",children:[Object(r.jsxs)("div",{className:"filters_applied",children:[Object(r.jsx)("h2",{children:"Filters Applied"}),0===O.category.length&&0===O.offense.length&&0===O.age.length&&0===O.race.length&&0===O.sex.length&&0===O.borough.length?Object(r.jsx)("p",{className:"no_filters_applied_statement",children:"No filters currently applied"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===O.category.length?null:"Categor"+(O.category.length>1?"ies: ":"y: ")}),0===O.category.length?null:O.category.map((function(e){return"F"===e?"Felony":"M"===e?"Misdemeanor":"Violation"})).join(", ")]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===O.offense.length?null:"Offense"+(1===O.offense.length?": ":"s: ")}),0===O.offense.length?null:O.offense.join(", ")]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===O.age.length?null:"Age"+(1===O.age.length?": ":"s: ")}),0===O.age.length?null:O.age.map((function(e){return"65"===e?"65+":e})).join(", ")]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===O.race.length?null:"Race"+(1===O.race.length?": ":"s: ")}),0===O.race.length?null:O.race.join(", ")]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===O.sex.length?null:"Sex: "}),0===O.sex.length?null:O.sex.map((function(e){return"M"===e?"Male":"Female"})).join(", ")]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===O.borough.length?null:"Borough"+(1===O.borough.length?": ":"s: ")}),0===O.borough.length?null:O.borough.map((function(e){return"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"})).join(", ")]})]})]}),Object(r.jsxs)("div",{className:"graph_options_container",children:[Object(r.jsx)("p",{children:"Graph Options"}),Object(r.jsxs)(Z.RadioGroup,{onChange:function(e){return v(e)},horizontal:!0,value:_,children:[Object(r.jsx)(Z.RadioButton,{rootColor:"rgb(140, 140, 140)",pointColor:"rgb(0, 0, 128)",value:"overview",children:"Overview"}),Object(r.jsx)(Z.RadioButton,{rootColor:"rgb(140, 140, 140)",pointColor:"rgb(0, 0, 128)",value:"trends",disabled:!I,disabledColor:"rgb(211, 211, 211)",children:"Trends"})]})]})]}),Object(r.jsxs)("div",{className:"carousel_container",onTouchStart:function(){"trends"===_&&(be&&pe(!1),le&&ue(!1))},children:[Object(r.jsx)(m.a,{content:"Click the left and right arrows to view more graphs",visible:R?E&&le&&A.current.length>0&&!!B&&B.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0:le&&A.current.length>0&&!!B&&B.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0,reference:me[0],className:"burger_tooltip",placement:"left",onClickOutside:function(){return ue(!1)}}),Object(r.jsx)(p.a,{color:"rgb(0, 0, 0)",className:"carousel_left_arrow",onClick:function(){je.slidePrev(),ge.slidePrev(),le&&ue(!1)}}),Object(r.jsx)(P.a,{ref:function(e){return je=e},autoPlay:!1,fadeOutAnimation:!0,dotsDisabled:!0,buttonsDisabled:!0,mouseTrackingEnabled:!0,playButtonEnabled:!1,disableAutoPlayOnAction:!1,responsive:{0:{items:1},760:{items:2},1600:{items:3}},preservePosition:!0,infinite:!0,items:[Object(r.jsx)(U,{filteredArrestCategory:u,graphOption:_},"overview"),Object(r.jsx)(V,{filteredAgeGroup:n,filteredAgeGroupData:f,graphOption:_},"overview"),Object(r.jsx)(q,{filteredRaceUniqueValues:b,filteredRaceArr:c,graphOption:_},"overview"),Object(r.jsx)(z,{filteredSexUniqueValues:j,filteredSexArr:i,graphOption:_},"overview"),Object(r.jsx)(Y,{filteredBoroughUniqueValues:g,filteredBoroughArr:o,graphOption:_},"overview"),Object(r.jsx)(W,{filteredOffenseDescriptionArr:l,filteredOffenseDescriptionUniqueValues:h,graphOption:_,isSame:x,usePrevious:y,isMobileOrTablet:R,isMediumLaptop:C},"overview")]}),Object(r.jsx)(m.a,{content:R?null:"Scroll to zoom in and out of trend graphs",visible:!R&&("trends"===_&&be),reference:ye.length>2?ye[1]:ye[0],className:"burger_tooltip trend_tooltip",placement:"top",onClickOutside:function(){return pe(!1)}}),Object(r.jsx)(m.a,{content:"Toggle data lines by selecting legend items",visible:"trends"===_&&be,reference:ye.length>2?ye[1]:ye[0],className:"burger_tooltip trend_tooltip",placement:R?"left":"right",offset:R?[-30,-180]:[0,50],onClickOutside:function(){return pe(!1)}}),w?null:Object(r.jsx)(P.a,{ref:function(e){return ge=e},autoPlay:!1,dotsDisabled:!0,buttonsDisabled:!0,mouseTrackingEnabled:!1,playButtonEnabled:!1,disableAutoPlayOnAction:!1,touchMoveDefaultEvents:!1,infinite:!0,responsive:{0:{items:1},760:{items:2},1600:{items:3}},preservePosition:!0,items:[Object(r.jsx)(J,{filteredTimelineCategoryData:k,filteredArrestCategory:u,filteredUniqueCategory:d,isMobileOrTablet:R,isMediumLaptop:C},"trends"),Object(r.jsx)(H,{filteredAgeGroupData:f,filteredTimelineAgeGroupData:T,isMobileOrTablet:R,isMediumLaptop:C},"trends"),Object(r.jsx)(Q,{filteredBoroughUniqueValues:g,filteredTimelineBoroughData:S,isMobileOrTablet:R,isMediumLaptop:C},"trends"),Object(r.jsx)(X,{filteredRaceUniqueValues:b,filteredTimelineRaceData:G,isMobileOrTablet:R,isMediumLaptop:C},"trends"),Object(r.jsx)(K,{filteredSexUniqueValues:j,filteredTimelineSexData:F,isMobileOrTablet:R,isMediumLaptop:C},"trends")]}),Object(r.jsx)(p.b,{color:"rgb(0, 0, 0)",className:"carousel_right_arrow",onClick:function(){je.slideNext(),ge.slideNext(),le&&ue(!1)}})]})]})},ee=n(133),te=n.n(ee),ne=n(187),re=n.n(ne),ae={2006:371932,2007:403229,2008:401526,2009:421314,2010:422320,2011:412856,2012:396278,2013:393807,2014:387725,2015:339468,2016:314862,2017:286223,2018:246772,2019:214616,2020:103375},ce=n(188),ie=n(120),oe=n(95),se=n(122),le=n(189),ue=n.n(le),de=n(190),fe=n.n(de),be=n(79),pe=(n(141),n(121));function je(){var e=Object(ie.a)(["\n    display: block;\n    margin: 0 auto;\n  "]);return je=function(){return e},e}var ge=function(e){var t=e.countUp,n=e.loaderColor,a=e.mapError,c=e.applyingFiltersProgressRef,i=Object(be.css)(je()),o=Object(N.c)((function(e){return e.filteredDataChunksReducer.data})),s=Object(N.c)((function(e){return e.totalCountReducer.total}));return Object(r.jsxs)(pe.a,{className:"loading_container",children:[0===s?Object(r.jsx)(ue.a,{css:i,size:50,color:n,style:{transition:"all 0.5s ease"},loading:""===o||"object"===typeof o&&o.flat().length<9e4}):t>95?Object(r.jsx)(fe.a,{css:i,size:200,color:"rgb(93, 188, 210)",style:{transition:"all 0.5s ease"},loading:t>95}):Object(r.jsxs)(oe.a,{value:t,styles:Object(oe.b)({strokeLinecap:"butt",trailColor:"#eee"}),children:[Object(r.jsx)(se.a,{color:"#fff",size:"4rem"}),Object(r.jsx)("div",{style:{fontSize:30,marginTop:20,color:"#fff"},children:Object(r.jsxs)("strong",{children:[t,"%"]})})]}),Object(r.jsx)("p",{children:a?"Error Initializing NYPD Arrest Map":0===s?"Initializing NYPD Arrest Map":t>95?"Analyzing Arrest Data (".concat(c.current,"% Done)"):"Loading Most Recent Arrest Data"})]})},me=n(123),he=n.n(me),Oe=function(e){var t=e.modalActive,n=e.changeModalActive,c=Object(N.c)((function(e){return e.loadDataChunksReducer.data})),i=Object(N.c)((function(e){return e.filteredDataChunksReducer.data})),o=Object(a.useState)(0),l=Object(s.a)(o,2),u=l[0],d=l[1];return Object(a.useEffect)((function(){if(c[0][t.year.toString()]){var e=100*Number(c[0][t.year.toString()].map((function(e){return e.length})).reduce((function(e,t){return e+t}),0)/ae[t.year.toString()]).toFixed(1);100===u?n({active:!1,year:null}):e&&e!==u&&d(e)}}),[c,t.year,n,u,i.length]),Object(r.jsxs)(he.a,{isOpen:t.active,style:{content:{position:"fixed",zIndex:1e4,opacity:.99,height:"100%",backdropFilter:"blur(5px)",WebkitBackdropFilter:"blur(5px)",paddingBottom:"10%",borderRadius:"none",width:"100vw",top:"0",left:"0",right:"0",bottom:"0",border:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)"}},children:[Object(r.jsxs)(oe.a,{value:u,styles:Object(oe.b)({strokeLinecap:"butt",trailColor:"#eee"}),children:[Object(r.jsx)(se.a,{color:"#fff",size:"4rem"}),Object(r.jsx)("div",{style:{fontSize:30,marginTop:20,color:"#fff"},children:Object(r.jsxs)("strong",{children:[u,"%"]})})]}),Object(r.jsxs)("p",{children:["Loading ",t.year," Arrest Data"]})]})},xe=function(e,t){return{type:"FILTERED_DATA_CHUNKS_ADD_TO_YEAR",data:e,dataIndex:t}},ye=function(e){return{type:"FILTERED_DATA_CHUNKS_ADD_YEAR",data:e}},_e=function(e){return{type:"ASSIGN_FILTERED_DATA_CHUNKS",data:e}},ve=function(e){return{type:"INCREMENT_TOTAL_COUNT",dataLength:e}},Ne=function(e){return{type:"ASSIGN_LOAD_DATA",data:e}},Ae=function(){return{type:"FILTERED_DATA_CHANGED"}},Re=function(){return{type:"FILTERED_DATA_CHANGED_RESET"}},Ce=function(e){return{type:"TIMELINE_AGE_GROUP_GRAPH_DATA",data:e}},Ee=function(e){return{type:"TIMELINE_BOROUGH_GRAPH_DATA",data:e}},De=function(e){return{type:"TIMELINE_CATEGORY_GRAPH_DATA",data:e}},Te=function(e){return{type:"TIMELINE_GENDER_GRAPH_DATA",data:e}},Se=function(e){return{type:"TIMELINE_RACE_GRAPH_DATA",data:e}},ke=function(){return new Worker(n.p+"static/js/setFilterAndTimelineGraphWorkers.ad7e120d.worker.js")},Fe=function(e){return{type:"AGE_TIMELINE_COLUMNS",columns:e}},Me=function(e){return{type:"BOROUGH_TIMELINE_COLUMNS",columns:e}},Le=function(e){return{type:"CATEGORY_TIMELINE_COLUMNS",columns:e}},Ge=function(e){return{type:"SEX_TIMELINE_COLUMNS",columns:e}},Pe=function(e){return{type:"RACE_TIMELINE_COLUMNS",columns:e}},we=function(){return{type:"APPLYING_FILTERS_RESET"}},Ie=n(191),Be=n.n(Ie);n(340);function Ue(){var e=Object(ie.a)(["\n    display: block;\n    margin: 0 auto;\n  "]);return Ue=function(){return e},e}var Ve=function(e){var t=e.applyingFiltersProgressRef,n=Object(a.useRef)(null),c=Object(be.css)(Ue()),i=Object(N.c)((function(e){return e.applyingFiltersReducer.filters})),o=Object(N.c)((function(e){return e.resetFiltersReducer.reset}));return Object(a.useEffect)((function(){n&&n.current&&(i||o?n.current.open():n.current.close())}),[i,o]),Object(r.jsx)(_.a,{className:"applying_filters",ref:n,modal:!0,closeOnDocumentClick:!1,closeOnEscape:!1,children:Object(r.jsxs)("div",{className:"applying_filters_modal",children:[Object(r.jsx)(Be.a,{css:c,size:80,color:"rgb(0, 109, 129)",style:{transition:"all 0.5s ease"},loading:!0}),Object(r.jsxs)("p",{children:[o?"Resetting":"Applying"," Filters (",t.current,"% Done)"]})]})})},qe=function(){return{type:"NEW_YEAR_FINISHED_LOADING_RESET"}},ze=function(){return{type:"NEW_YEAR_FINISHED_LOADING"}},Ye=function(){return{type:"TRENDS_AVAILABLE"}},We=function(){return{type:"TRENDS_NOT_AVAILABLE"}},He=n(107),Qe=n(194),Je=function(){return{type:"RESET_FILTERS_RESET"}};te.a.extend(re.a);var Ke=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.loadDataReducer.data})),n=Object(N.c)((function(e){return e.filteredDataReducer.changed})),c=Object(N.c)((function(e){return e.filteredDataChunksReducer.data})),i=Object(N.c)((function(e){return e.newYearFinishedLoadingReducer.finished})),f=Object(N.c)((function(e){return e.applyingFiltersReducer.filters})),b=Object(N.c)((function(e){return e.resetFiltersReducer.reset})),p=Object(N.c)((function(e){return e.totalCountReducer.total})),j=Object(N.c)((function(e){return e.ageGroupTimelineGraphDataReducer.data})),g=Object(N.c)((function(e){return e.boroughTimelineGraphDataReducer.data})),m=Object(N.c)((function(e){return e.categoryTimelineGraphDataReducer.data})),h=Object(N.c)((function(e){return e.genderTimelineGraphDataReducer.data})),O=Object(N.c)((function(e){return e.raceTimelineGraphDataReducer.data})),x=Object(N.c)((function(e){return e.ageTimelineColumnsReducer.columns})),y=Object(N.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),_=Object(N.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),v=Object(N.c)((function(e){return e.raceTimelineColumnsReducer.columns})),A=Object(N.c)((function(e){return e.sexTimelineColumnsReducer.columns})),R=Object(a.useState)(!1),C=Object(s.a)(R,2),E=C[0],D=C[1],T=Object(a.useState)(!1),S=Object(s.a)(T,2),k=S[0],M=S[1],L=Object(a.useState)("rgb(93, 188, 210)"),G=Object(s.a)(L,2),P=G[0],w=G[1],I=Object(a.useState)(!1),B=Object(s.a)(I,2),U=B[0],V=B[1],q=Object(a.useState)({active:!1,year:null}),z=Object(s.a)(q,2),Y=z[0],W=z[1],H=Object(a.useState)(!1),Q=Object(s.a)(H,2),J=Q[0],K=Q[1],X=Object(a.useState)(!1),Z=Object(s.a)(X,2),ee=Z[0],ne=Z[1],re=Object(a.useState)("overview"),ie=Object(s.a)(re,2),oe=ie[0],se=ie[1],le=Object(a.useState)(!1),ue=Object(s.a)(le,2),de=ue[0],fe=ue[1],be=Object(a.useState)({category:[],offense:[],age:[],race:[],sex:[],borough:[]}),je=Object(s.a)(be,2),me=je[0],Ie=je[1],Be=Object(He.useMediaQuery)({maxWidth:1224}),Ue=Object(He.useMediaQuery)({minWidth:768}),Ke=Object(He.useMediaQuery)({maxWidth:1440}),Xe=Object(He.useMediaQuery)({orientation:"portrait"}),Ze=Object(a.useState)(!1),$e=Object(s.a)(Ze,2),et=$e[0],tt=$e[1],nt=Object(a.useState)(!1),rt=Object(s.a)(nt,2),at=rt[0],ct=rt[1],it=Object(a.useState)([]),ot=Object(s.a)(it,2),st=ot[0],lt=ot[1],ut=Object(a.useState)(""),dt=Object(s.a)(ut,2),ft=dt[0],bt=dt[1],pt=Object(a.useState)(""),jt=Object(s.a)(pt,2),gt=jt[0],mt=jt[1],ht=Object(a.useState)(""),Ot=Object(s.a)(ht,2),xt=Ot[0],yt=Ot[1],_t=Object(a.useState)(""),vt=Object(s.a)(_t,2),Nt=vt[0],At=vt[1],Rt=Object(a.useState)(""),Ct=Object(s.a)(Rt,2),Et=Ct[0],Dt=Ct[1],Tt=Object(a.useState)(!1),St=Object(s.a)(Tt,2),kt=St[0],Ft=St[1],Mt=Object(a.useState)(!1),Lt=Object(s.a)(Mt,2),Gt=Lt[0],Pt=Lt[1],wt=Object(a.useState)(""),It=Object(s.a)(wt,2),Bt=It[0],Ut=It[1],Vt=Object(a.useRef)([]),qt=Object(a.useRef)(0),zt=Object(a.useRef)(null);Object(a.useEffect)((function(){he.a.setAppElement("body")}),[]);var Yt=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current},Wt=Yt(me),Ht=Object(ce.useCountUp)({start:0,end:t.length>0?100*Number((t.length/ae[2020]).toFixed(1)):0,delay:0,duration:1}),Qt=Ht.countUp,Jt=Ht.update;Object(a.useEffect)((function(){if(t.length>0){var e=100*Number((t.length/ae[2020]).toFixed(1));Jt(e>=60?100:e)}}),[Jt,Qt,t]);var Kt=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},Xt=Object(a.useState)([]),Zt=Object(s.a)(Xt,2),$t=Zt[0],en=Zt[1],tn=Object(a.useState)([]),nn=Object(s.a)(tn,2),rn=nn[0],an=nn[1],cn=Object(a.useState)([]),on=Object(s.a)(cn,2),sn=on[0],ln=on[1],un=Object(a.useState)([]),dn=Object(s.a)(un,2),fn=dn[0],bn=dn[1],pn=Object(a.useState)([]),jn=Object(s.a)(pn,2),gn=jn[0],mn=jn[1],hn=Object(a.useState)([]),On=Object(s.a)(hn,2),xn=On[0],yn=On[1],_n=Object(a.useState)([]),vn=Object(s.a)(_n,2),Nn=vn[0],An=vn[1],Rn=Object(a.useState)([]),Cn=Object(s.a)(Rn,2),En=Cn[0],Dn=Cn[1],Tn=Object(a.useState)([]),Sn=Object(s.a)(Tn,2),kn=Sn[0],Fn=Sn[1],Mn=Object(a.useState)([]),Ln=Object(s.a)(Mn,2),Gn=Ln[0],Pn=Ln[1],wn=Object(a.useState)([]),In=Object(s.a)(wn,2),Bn=In[0],Un=In[1],Vn=Object(a.useState)([]),qn=Object(s.a)(Vn,2),zn=qn[0],Yn=qn[1],Wn=Object(a.useState)([]),Hn=Object(s.a)(Wn,2),Qn=Hn[0],Jn=Hn[1],Kn=Object(a.useState)([]),Xn=Object(s.a)(Kn,2),Zn=Xn[0],$n=Xn[1],er=Object(a.useState)([]),tr=Object(s.a)(er,2),nr=tr[0],rr=tr[1],ar=Object(a.useState)([]),cr=Object(s.a)(ar,2),ir=cr[0],or=cr[1],sr=Object(a.useCallback)((function(t,n,r,a,c){Et&&(Et.postMessage({ageObj:t,raceObj:n,categoryObj:r,sexObj:a,boroughObj:c}),Et.onmessage=function(t){qt.current+=25;var n=t.data.ageGroupTimelineGraphData,r=t.data.raceTimelineGraphData,a=t.data.categoryTimelineGraphData,c=t.data.genderTimelineGraphData,i=t.data.boroughTimelineGraphData;e(Ce(n)),e(Ee(i)),e(De(a)),e(Te(c)),e(Se(r))})}),[Et,e]),lr=Object(a.useCallback)((function(e,t,n,r,a,c,i,o,s){xt&&(xt.postMessage({ageGroup:e,raceArr:t,boroughArr:n,offenseDescriptionArr:r,filteredAgeGroup:a,filteredSexArr:c,filteredRaceArr:i,filteredBoroughArr:o,filteredOffenseDescriptionArr:s}),xt.onmessage=function(e){qt.current+=25;var t=JSON.parse(e.data),n=t.ageGroupData,r=t.raceUniqueValues,a=t.boroughUniqueValues,c=t.offenseDescriptionArr,i=t.filteredAgeGroupData,o=t.filteredSexUniqueValues,s=t.filteredRaceUniqueValues,l=t.filteredBoroughUniqueValues,u=t.filteredOffenseDescriptionUniqueValues;jr(i),Or(s),vr(o),Cr(l),Sr(u),Lr(n),Ir(r),qr(a),Hr(c),ne(!0)})}),[xt]),ur=Object(a.useCallback)((function(e,t,n){gt&&(gt.postMessage({loadData:e,filteredDataChunks:t,currentFilters:n}),gt.onmessage=function(e){qt.current+=25;var t=JSON.parse(e.data),n=t.ageGroup,r=t.raceArr,a=t.boroughArr,c=t.offenseDescriptionArr,i=t.filteredArrestCategory,o=t.filteredAgeGroup,s=t.filteredSexArr,l=t.filteredRaceArr,u=t.filteredBoroughArr,d=t.filteredOffenseDescriptionArr,f=t.filteredUniqueCategory;lr(n,r,a,c,o,s,l,u,d),en(n),an(r),ln(a),bn(c),mn(i),yn(o),An(s),Dn(l),Fn(u),Pn(d),Un(f)})}),[gt,lr]),dr=Object(a.useCallback)((function(e){Nt&&(Nt.postMessage({chunk:e}),Nt.onmessage=function(e){qt.current+=25;var t=JSON.parse(e.data),n=t.age_group,r=t.borough,a=t.category,c=t.sex,i=t.race;Yn(n),Jn(r),$n(a),rr(c),or(i)})}),[Nt]),fr=Object(a.useState)([]),br=Object(s.a)(fr,2),pr=br[0],jr=br[1],gr=Object(a.useState)([]),mr=Object(s.a)(gr,2),hr=mr[0],Or=mr[1],xr=Object(a.useState)([]),yr=Object(s.a)(xr,2),_r=yr[0],vr=yr[1],Nr=Object(a.useState)([]),Ar=Object(s.a)(Nr,2),Rr=Ar[0],Cr=Ar[1],Er=Object(a.useState)([]),Dr=Object(s.a)(Er,2),Tr=Dr[0],Sr=Dr[1],kr=Object(a.useState)([]),Fr=Object(s.a)(kr,2),Mr=Fr[0],Lr=Fr[1],Gr=Object(a.useState)([]),Pr=Object(s.a)(Gr,2),wr=Pr[0],Ir=Pr[1],Br=Object(a.useState)([]),Ur=Object(s.a)(Br,2),Vr=Ur[0],qr=Ur[1],zr=Object(a.useState)([]),Yr=Object(s.a)(zr,2),Wr=Yr[0],Hr=Yr[1];Object(a.useEffect)((function(){ee&&(ne(!1),sr({unique:pr,data:zn},{unique:hr,data:ir},{unique:Bn,data:Zn},{unique:_r,data:nr},{unique:Rr,data:Qn}))}),[m.length,pr,Rr,hr,_r,zn,Qn,Zn,ir,nr,Bn,sr,ee]);var Qr=Object(a.useCallback)((function(){0!==qt.current&&(qt.current=0);var e=c.map((function(e){return Number(te()(e[5].ARREST_DATE,"MM/DD/YYYY").format("YYYY"))}));Vt.current=c.map((function(t,n){var r=te()(t[5].ARREST_DATE,"MM/DD/YYYY").format("YYYY");return new d.a({id:"chunk-".concat(n),data:t,visible:e.flat().includes(Number(r)),filled:!0,radiusMinPixels:2,getPosition:function(e){return[Number(e.Longitude),Number(e.Latitude)]},getFillColor:function(e){return"F"===e.LAW_CAT_CD?[255,0,0]:"M"===e.LAW_CAT_CD?[255,116,0]:[255,193,0]},pickable:!0,useDevicePixels:!1})}))}),[c]);Object(a.useEffect)((function(){var n=ae[2020];i&&(e(qe()),p===n&&t.length===n&&(e(_e([t])),e(Ae())))}),[i,t,e,p]),Object(a.useEffect)((function(){n||J&&K(!1)}),[n,J]),Object(a.useEffect)((function(){p>0&&p===ae[2020]&&n&&(J||(Qr(),ur(t,c,me),dr(c),e(Re())),K(!0))}),[t,J,me,n,Qr,$t,sn,xn,kn,Gn,En,Nn,fn,ur,rn,e,c,dr,Bn,Zn,p]);var Jr=Yt(j),Kr=Yt(g),Xr=Yt(m),Zr=Yt(h),$r=Yt(O);Object(a.useEffect)((function(){if(j!==Jr&&j.length>0&&pr.length===j[0].length-1&&e(Fe([[{type:"date",label:"Date"}].concat(pr.sort((function(e,t){return e.localeCompare(t)})).map((function(e){return"65"===e?"65+":e})))].concat(j))),g!==Kr&&g.length>0&&Rr.length===g[0].length-1&&e(Me([[{type:"date",label:"Date"}].concat(Rr.map((function(e){return"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"})))].concat(g))),m!==Xr&&m.length>0&&Bn.length>0){var t=Object(o.a)(new Set(Bn.map((function(e){return"F"===e?"Felony":"M"===e?"Misdemeanor":"Violation"}))));t.length===m[0].length-1&&e(Le([[{type:"date",label:"Date"}].concat(t)].concat(m)))}if(h!==Zr&&h.length>0){var n=_r.map((function(e){return"F"===e?"Female":"Male"}));n.length===h[0].length-1&&e(Ge([[{type:"date",label:"Date"}].concat(n)].concat(h)))}if(O!==$r&&O.length>0){var r=hr.map((function(e){return e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")}));r.length===O[0].length-1&&e(Pe([[{type:"date",label:"Date"}].concat(r)].concat(O))),e(Ye()),f&&e(we()),b&&e(Je())}}),[j,g,m,e,pr,h,Jr,Kr,Xr,Zr,$r,O,Rr,Bn,hr,_r,f,b]),Object(a.useEffect)((function(){if(U)w("rgb(255, 0, 0)");else for(var e=function(){var e=setInterval((function(){w("rgb(93, 188, 210)"===P?"rgb(255, 255, 255)":"rgb(255, 255, 255)"===P?"#f9c124":"rgb(93, 188, 210)")}),500);return{v:function(){clearInterval(e)}}};0===p;){var t=e();if("object"===typeof t)return t.v}}),[p,P,U]);var ea=Object(a.useCallback)((function(e,t,n){var r=document.getElementsByClassName("deck-tooltip")[0];if(e){k||(M(!0),document.addEventListener("touchstart",(function(){return r.style.opacity=0})));var a=e.ARREST_DATE,c=e.LAW_CAT_CD,i=e.OFNS_DESC,o=e.PD_DESC,s=e.AGE_GROUP,l=e.PERP_SEX,u=e.PERP_RACE;r.innerHTML="\n<p><strong>Date of Arrest:</strong> ".concat(a,"</p>\n<p><strong>Category:</strong> ").concat("F"===c?"Felony":"M"===c?"Misdemeanor":"Violation","</p>\n<p><strong>Offense:</strong> ").concat(i,"</p>\n<p><strong>Offense Description:</strong> ").concat(o,"</p>\n<p><strong>Perpetrator's Age Group:</strong> ").concat(s,"</p>\n<p><strong>Perpetrator's Sex:</strong> ").concat("M"===l?"Male":"Female","</p>\n<p><strong>Perpetrator's Race:</strong> ").concat(u.toLowerCase().split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "),"</p>\n"),r.style.display="inline-block",r.style.background="#000",r.style.color="rgb(235, 235, 235)",r.style.fontSize="1rem",r.style.overflowWrap="break-word",r.style.lineHeight="1rem",r.style.maxWidth="10rem",r.style.opacity=.9,r.style.left=t+"px",r.style.top=n+"px"}else k&&M(!1),r.style.opacity=0}),[k]),ta=Object(a.useCallback)((function(t,n,r,a){r?(e(ye(t.data)),e(Ne(t.data))):(a&&e(ze()),e(xe(t.data,n)),e(Ne(t.data)))}),[e]),na=Object(a.useCallback)((function(t,n){ft&&(ft.postMessage(t),ft.onmessage=function(t){var r=JSON.parse(t.data),a=JSON.parse(r.data),c=a.chunkArr,i=a.firstMessage,o=a.lastMessage;e(ve(c.length)),ta({year:r.year,data:c},n,i,o)})}),[ta,ft,e]);return Object(a.useEffect)((function(){me&&Wt&&(Kt(Object.values(me),Object.values(Wt))||Qr())}),[me,Wt,Qr,e,c]),Object(a.useEffect)((function(){if(!gt){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const dataSent = e.data;\n\n        const loadData = dataSent.loadData;\n        const filteredDataChunks = dataSent.filteredDataChunks;\n        const currentFilters = dataSent.currentFilters;\n\n        const filterArrIncluded = (\n          x,\n          filterExactName,\n          filterGeneralName\n        ) => {\n          if (x !== filterExactName) {\n            if (currentFilters[filterGeneralName]) {\n              if (currentFilters[filterGeneralName].length > 0) {\n                return currentFilters[filterGeneralName].includes(x);\n              } else {\n                return true;\n              }\n            } else {\n              return true;\n            }\n          } else {\n            return false;\n          }\n        };\n\n        const dataReducerFunction = (\n          chunk,\n          filterExactName,\n          filterGeneralName\n        ) => {\n          return chunk.reduce((acc, curr) => {\n            const exactName = curr[filterExactName];\n\n            if (filterArrIncluded(exactName, filterGeneralName)) {\n              acc.push(exactName);\n            }\n\n            return acc;\n          }, []);\n        };\n\n        const boroughLoadDataReducerFunction = (\n          chunk,\n          filterExactName\n        ) => {\n          return chunk.reduce((acc, curr) => {\n            const currentName = (x) => {\n              if (\n                x[filterExactName] === "K" &&\n                Number(x.Latitude) > 40.73912\n              ) {\n                return "B";\n              } else if (\n                x[filterExactName] === "M" &&\n                Number(x.Longitude) > -73.920961 &&\n                Number(x.Latitude) < 40.800709\n              ) {\n                return "Q";\n              } else if (\n                x[filterExactName] === "B" &&\n                Number(x.Latitude) < 40.697465\n              ) {\n                return "K";\n              } else if (\n                x[filterExactName] === "Q" &&\n                Number(x.Longitude) < -73.962745\n              ) {\n                return "M";\n              } else if (\n                x[filterExactName] === "Q" &&\n                Number(x.Longitude) < -73.878559 &&\n                Number(x.Latitude) > 40.787907\n              ) {\n                return "B";\n              } else {\n                return x[filterExactName];\n              }\n            };\n\n            const currentPushItem = currentName(curr);\n\n            if (filterArrIncluded(currentPushItem)) {\n              acc.push(currentPushItem);\n            }\n\n            return acc;\n          }, []);\n        };\n\n        const filteredDataChunksReducerFunction = (\n          filterExactName,\n          filterGeneralName\n        ) => {\n          const yearsArr = filteredDataChunks.map((x) => {\n            const date = x[5][filterExactName];\n\n            return Number(date.substring(date.length - 4, date.length));\n          });\n\n          const dateFilterArrIncluded = (item, index, generalName) => {\n            if (item !== filterExactName) {\n              if (currentFilters[generalName]) {\n                if (currentFilters[generalName].length > 0) {\n                  if (\n                    currentFilters[generalName].includes(\n                      yearsArr[index]\n                    )\n                  ) {\n                    return true;\n                  } else {\n                    return false;\n                  }\n                } else {\n                  return true;\n                }\n              } else {\n                return false;\n              }\n            } else {\n              return false;\n            }\n          };\n\n          return filteredDataChunks\n            .map((x, i) => [\n              ...new Set(\n                x.reduce((acc, curr) => {\n                  const exactName = curr[filterExactName];\n\n                  if (filterGeneralName === "category") {\n                    if (\n                      filterArrIncluded(\n                        exactName,\n                        filterExactName,\n                        filterGeneralName\n                      )\n                    ) {\n                      acc.push(exactName);\n                    }\n                  } else {\n                    if (\n                      dateFilterArrIncluded(\n                        exactName,\n                        i,\n                        filterGeneralName\n                      )\n                    ) {\n                      acc.push(exactName);\n                    }\n                  }\n\n                  return acc;\n                }, [])\n              ),\n            ])\n            .flat();\n        };\n\n        postMessage(\n          JSON.stringify({\n            ageGroup: dataReducerFunction(loadData, "AGE_GROUP"),\n            raceArr: dataReducerFunction(loadData, "PERP_RACE"),\n            boroughArr: boroughLoadDataReducerFunction(\n              loadData,\n              "ARREST_BORO"\n            ),\n            offenseDescriptionArr: dataReducerFunction(\n              loadData,\n              "OFNS_DESC"\n            ),\n            filteredArrestCategory: dataReducerFunction(\n              filteredDataChunks[0],\n              "LAW_CAT_CD",\n              "category"\n            ),\n            filteredAgeGroup: dataReducerFunction(\n              filteredDataChunks[0],\n              "AGE_GROUP",\n              "age"\n            ),\n            filteredSexArr: dataReducerFunction(\n              filteredDataChunks[0],\n              "PERP_SEX",\n              "sex"\n            ),\n            filteredRaceArr: dataReducerFunction(\n              filteredDataChunks[0],\n              "PERP_RACE",\n              "race"\n            ),\n            filteredBoroughArr: boroughLoadDataReducerFunction(\n              filteredDataChunks[0],\n              "ARREST_BORO",\n              "borough"\n            ),\n            filteredOffenseDescriptionArr: dataReducerFunction(\n              filteredDataChunks[0],\n              "OFNS_DESC",\n              "offense"\n            ),\n            filteredUniqueCategory: filteredDataChunksReducerFunction(\n              "LAW_CAT_CD",\n              "category"\n            ),\n          })\n        );\n      };'],{type:"application/javascript"})),t=new Worker(e);mt(t)}}),[gt]),Object(a.useEffect)((function(){if(!Nt){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const dataSent = e.data;\n\n        const chunk = dataSent.chunk;\n\n        const filteredDataChunksReducerFunction = (\n          filterGeneralName,\n          filterExactName\n        ) => {\n          return chunk.map((item) =>\n            item.reduce((acc, curr) => {\n              const formatName = (x) => {\n                return {\n                  date: x["ARREST_DATE"],\n                  [filterGeneralName]:\n                    filterGeneralName === "category"\n                      ? x[filterExactName] === "F"\n                        ? "Felony"\n                        : x[filterExactName] === "M"\n                        ? "Misdemeanor"\n                        : "Violation"\n                      : filterGeneralName === "sex"\n                      ? x[filterExactName] === "F"\n                        ? "Female"\n                        : "Male"\n                      : x[filterExactName],\n                };\n              };\n\n              const notNameMatchFilter = (x) =>\n                x.date !== "ARREST_DATE" &&\n                x[filterGeneralName] !== filterExactName;\n\n              const newPushItem = formatName(curr);\n\n              if (notNameMatchFilter(newPushItem)) {\n                acc.push(newPushItem);\n              }\n\n              return acc;\n            }, [])\n          );\n        };\n\n        postMessage(\n          JSON.stringify({\n            age_group: filteredDataChunksReducerFunction(\n              "age_group",\n              "AGE_GROUP"\n            ),\n            borough: filteredDataChunksReducerFunction(\n              "borough",\n              "ARREST_BORO"\n            ),\n            category: filteredDataChunksReducerFunction(\n              "category",\n              "LAW_CAT_CD"\n            ),\n            sex: filteredDataChunksReducerFunction("sex", "PERP_SEX"),\n            race: filteredDataChunksReducerFunction(\n              "race",\n              "PERP_RACE"\n            ),\n          })\n        );\n      }'],{type:"application/javascript"})),t=new Worker(e);At(t)}}),[Nt]),Object(a.useEffect)((function(){if(!Et){var e=new ke;Dt(e)}}),[Et]),Object(a.useEffect)((function(){if(!xt){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const hasNumber = (input) => {\n          return /[0-9]/.test(input); \n        };\n\n        const dataSent = e.data;\n\n        const ageGroup = dataSent.ageGroup;\n        const raceArr = dataSent.raceArr;\n        const boroughArr = dataSent.boroughArr;\n        const offenseDescriptionArr = dataSent.offenseDescriptionArr;\n        const filteredAgeGroup = dataSent.filteredAgeGroup;\n        const filteredSexArr = dataSent.filteredSexArr;\n        const filteredRaceArr = dataSent.filteredRaceArr;\n        const filteredBoroughArr = dataSent.filteredBoroughArr;\n        const filteredOffenseDescriptionArr =\n          dataSent.filteredOffenseDescriptionArr;\n\n        const uniqueValuesReducerFunction = (\n          arrName,\n          categoryName,\n          arr\n        ) =>\n          arr\n            ? [...new Set(arr)]\n                .filter((x) => x !== categoryName)\n                .sort((a, b) => {\n                  if (\n                    arrName === "filteredAgeGroupData" ||\n                    arrName === "ageGroupData"\n                  ) {\n                    const first = hasNumber(a)\n                      ? Number(\n                          a.split(a[0] === "<" ? "<" : "-")[\n                            a[0] === "<" ? 1 : 0\n                          ]\n                        )\n                      : null;\n                    const second = hasNumber(b)\n                      ? Number(\n                          b.split(b[0] === "<" ? "<" : "-")[\n                            b[0] === "<" ? 1 : 0\n                          ]\n                        )\n                      : null;\n\n                    return first - second;\n                  } else {\n                    // Sort in increasing order\n                    return a - b;\n                  }\n                })\n            : [];\n\n        postMessage(\n          JSON.stringify({\n            ageGroupData: uniqueValuesReducerFunction(\n              "ageGroupData",\n              "AGE_GROUP",\n              ageGroup\n            ),\n            raceUniqueValues: uniqueValuesReducerFunction(\n              "raceUniqueValues",\n              "PERP_RACE",\n              raceArr\n            ),\n            boroughUniqueValues: uniqueValuesReducerFunction(\n              "boroughUniqueValues",\n              "ARREST_BORO",\n              boroughArr\n            ),\n            offenseDescriptionArr: uniqueValuesReducerFunction(\n              "offenseDescriptionArr",\n              "OFNS_DESC",\n              offenseDescriptionArr\n            ),\n            filteredAgeGroupData: uniqueValuesReducerFunction(\n              "filteredAgeGroupData",\n              "AGE_GROUP",\n              filteredAgeGroup\n            ),\n            filteredSexUniqueValues: uniqueValuesReducerFunction(\n              "filteredSexUniqueValues",\n              "PERP_SEX",\n              filteredSexArr\n            ),\n            filteredRaceUniqueValues: uniqueValuesReducerFunction(\n              "filteredRaceUniqueValues",\n              "PERP_RACE",\n              filteredRaceArr\n            ),\n            filteredBoroughUniqueValues: uniqueValuesReducerFunction(\n              "filteredBoroughUniqueValues",\n              "ARREST_BORO",\n              filteredBoroughArr\n            ),\n            filteredOffenseDescriptionUniqueValues: uniqueValuesReducerFunction(\n              "filteredOffenseDescriptionUniqueValues",\n              "OFNS_DESC",\n              filteredOffenseDescriptionArr\n            ),\n          })\n        );\n      };'],{type:"application/javascript"})),t=new Worker(e);yt(t)}}),[xt]),Object(a.useEffect)((function(){if(!ft){var e=URL.createObjectURL(new Blob(["(",function(){var e="";e=new WebSocket("wss://nypd-arrest-map.herokuapp.com"),onmessage=function(t){var n=t.data;1===e.readyState&&e.send(n),e.onopen=function(){setInterval((function(){e.send(".")}),55e3),e.send(n)},e.onmessage=function(e){var t=e.data;t&&postMessage(JSON.stringify({year:n,data:t}))}}}.toString(),")()"],{type:"application/javascript"})),t=new Worker(e);bt(t)}}),[ft]),Object(a.useEffect)((function(){ft&&(0===t.length?0===st.length&&(Be?Xe&&(lt([2020]),na(2020,c.length)):(lt([2020]),na(2020,c.length))):st.length>0&&0===t.length&&(na(st[0],c.length),lt([])))}),[ft,na,st,c.length,Xe,Be,t.length,p]),Object(a.useEffect)((function(){p>9e4&&x&&y&&_&&v&&A&&x.length>0&&y.length>0&&_.length>0&&v.length>0&&A.length>0&&(kt||Ft(!0))}),[p,kt,x,y,_,v,A]),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"mobile_landscape_block",style:{display:Be?Xe?"none":"flex":"none"},children:[Object(r.jsx)(Qe.a,{}),Object(r.jsx)("p",{children:"NYPD Arrest Map is available only for desktop mode or mobile portrait mode."})]}),0!==Vt.current.length&&x&&0!==x.length&&y&&0!==y.length&&_&&0!==_.length&&v&&0!==v.length&&A&&0!==A.length?null:Object(r.jsx)(ge,{countUp:Qt,loaderColor:P,mapError:U,applyingFiltersProgressRef:qt}),Y.active&&Y.year?Object(r.jsx)(Oe,{modalActive:Y,changeModalActive:W}):null,Object(r.jsxs)(pe.a,{className:"nypd_arrest_map_container",style:{opacity:0!==Vt.current.length&&x&&0!==x.length&&y&&0!==y.length&&_&&0!==_.length&&v&&0!==v.length&&A&&0!==A.length?1:0},children:[Object(r.jsx)(F,{loadData:t,raceUniqueValues:wr,boroughUniqueValues:Vr,offenseDescriptionUniqueValues:Wr,ageGroupData:Mr,setFilters:function(t,n,r,a,c,i,o){Et&&(0!==qt.current&&(qt.current=0),"trends"===oe&&se("overview"),Ut(""),Pt(!1),e(We()),Et.postMessage({category:t,offense:n,age:r,race:a,sex:c,borough:i,suppliedData:o}),Et.onmessage=function(o){var s=o.data.assignFilteredData;s&&(e(_e(s)),Ie({category:t,offense:n,age:r,race:a,sex:c,borough:i}),e(Ae()))},setTimeout((function(){return tt(!1)}),1e3),setTimeout((function(){return ct(!1)}),1e3))},changeLaddaLoading:tt,laddaLoading:et,resetLaddaLoading:at,changeResetLaddaLoading:ct,menuClicked:Gt,changeMenuClicked:Pt,collapseOpen:Bt,changeCollapseOpen:Ut,layersRef:Vt,footerMenuActive:de,isMobileOrTablet:Be,isTablet:Ue,currentFilters:me,isSame:Kt}),Object(r.jsx)(l.a,{initialViewState:{longitude:-73.935242,latitude:40.73061,zoom:window.innerWidth<1200?9:11,minZoom:9,pitch:0,bearing:0},ref:zt,layers:Vt.current,pickingRadius:20,controller:!0,onLoad:function(){return D(!0)},onError:function(){return V(!0)},onHover:function(e){var t=e.object,n=e.x,r=e.y;return ea(t,n,r)},useDevicePixels:!1,children:Object(r.jsx)(u.a,{mapStyle:"mapbox://styles/mapbox/dark-v9",preventStyleDiffing:!0,mapboxApiAccessToken:"pk.eyJ1IjoibGVpZ2hoYWxsaWRheSIsImEiOiJjanVma3E4aGMwZjk0NDVwZzFpcG84M3cwIn0.GrI8s893TPtJfjHzpMMP_A"})}),E?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ve,{applyingFiltersProgressRef:qt}),Object(r.jsx)($,{isSame:Kt,mapVisible:kt,loadData:t,tooltipVisible:k,filteredArrestCategory:gn,filteredAgeGroupData:pr,filteredRaceUniqueValues:hr,filteredSexUniqueValues:_r,filteredBoroughUniqueValues:Rr,filteredOffenseDescriptionUniqueValues:Tr,filteredUniqueCategory:Bn,filteredAgeGroup:xn,filteredRaceArr:En,filteredSexArr:Nn,filteredBoroughArr:kn,filteredOffenseDescriptionArr:Gn,usePrevious:Yt,currentFilters:me,filteredTimelineAgeGroupData:zn,filteredTimelineBoroughData:Qn,filteredTimelineCategoryData:Zn,filteredTimelineSexData:nr,filteredTimelineRaceData:ir,graphOption:oe,changeGraphOption:se,layersRef:Vt,footerMenuActive:de,changeFooterMenuActive:fe,isMobileOrTablet:Be,isMediumLaptop:Ke})]}):null]})]})},Xe=n(199);n(346).config();var Ze=Object(Xe.a)(new function(){return new Worker(n.p+"static/js/store.worker.30a9de6f.worker.js")},{loadDataReducer:{data:[]},filteredDataReducer:{changed:!1},filteredDataChunksReducer:{data:[]},newYearFinishedLoadingReducer:{finished:!1},ageFilterReducer:{age:[]},boroughFilterReducer:{borough:[]},categoryFilterReducer:{category:[]},offenseFilterReducer:{offense:[]},raceFilterReducer:{race:[]},sexFilterReducer:{sex:[]},ageTimelineColumnsReducer:{columns:[]},boroughTimelineColumnsReducer:{columns:[]},categoryTimelineColumnsReducer:{columns:[]},raceTimelineColumnsReducer:{columns:[]},sexTimelineColumnsReducer:{columns:[]},ageGroupTimelineGraphDataReducer:{data:[]},boroughTimelineGraphDataReducer:{data:[]},categoryTimelineGraphDataReducer:{data:[]},genderTimelineGraphDataReducer:{data:[]},raceTimelineGraphDataReducer:{data:[]},totalCountReducer:{total:0},applyingFiltersReducer:{filters:!1},resetFiltersReducer:{reset:!1},trendsAvailableReducer:{available:!1}});i.a.render(Object(r.jsx)(N.a,{store:Ze,children:Object(r.jsx)(Ke,{})}),document.getElementById("root"))}},[[349,1,2]]]);
//# sourceMappingURL=main.df8a11a2.chunk.js.map