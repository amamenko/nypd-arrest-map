(this["webpackJsonpnypd-arrest-map"]=this["webpackJsonpnypd-arrest-map"]||[]).push([[0],{141:function(e,t){},206:function(e,t,n){e.exports=n(335)},211:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},266:function(e,t,n){},326:function(e,t,n){},327:function(e,t){},335:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),l=n(55),o=n.n(l),i=(n(211),n(16)),c=n(7),u=n(350),s=n(189),m=n(353),f=(n(213),n(214),n(174)),d=n(110),p=n(40),g=n(82),b=n.n(g),h=n(72),E=n(123),y=n.n(E),_=(n(233),n(234),n(235),n(135)),O=n(175),v=n(109),N=(n(236),n(150),function(e){var t=e.footerMenuActive,n=e.isMobileOrTablet;return r.a.createElement(v.a,{trigger:r.a.createElement("div",{className:"info_circle_container",style:{pointerEvents:n&&t?"none":"all"}},r.a.createElement(d.b,{color:"rgb(255, 255, 255)",style:{opacity:n&&t?.2:1,transition:"opacity 1s ease"},className:"info_button"})),modal:!0},(function(e){return r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"close",onClick:e},"\xd7"),r.a.createElement("div",{className:"header"},"About NYPD Arrest Map"),r.a.createElement("div",{className:"content"},"NYPD Arrest Map is a data visualization and analysis tool that utilizes the"," ",r.a.createElement("a",{href:"https://data.cityofnewyork.us/Public-Safety/NYPD-Arrest-Data-Year-to-Date-/uip8-fykc",target:"_blank",rel:"noopener noreferrer"},"NYPD Arrest Data (Year to Date)")," ","NYC Open Data dataset. This dataset is updated quarterly and reviewed by the Office of Management Analysis and Planning before being posted on the New York Police Department website. The data reflected here will be updated shortly after such changes.",r.a.createElement("br",null),r.a.createElement("br",null),"Occasionally, arrests in the NYPD datasets will be erroneously attributed to one borough, while having the longitude and latitude of another. These have been corrected in the NYPD Arrest Map in favor of the arrest's geocoordinates.",r.a.createElement("br",null),r.a.createElement("br",null),'As stated by the NYPD, "each record represents an arrest effected in NYC by the NYPD and includes information about the type of crime, the location and time of enforcement. In addition, information related to suspect demographics is also included. This data can be used by the public to explore the nature of police enforcement activity."',r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"Have any questions? Comments? Contact me via e-mail or LinkedIn"),r.a.createElement("div",{className:"pop_up_icons_container"},r.a.createElement("a",{href:"https://github.com/amamenko/nypd-arrest-map-full-stack",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(_.a,{color:"#000"})),r.a.createElement("a",{href:"https://www.linkedin.com/in/avraham-mamenko-0599831b8/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(_.b,{color:"#000"})),r.a.createElement("a",{href:"mailto:amamenko@hotmail.com?subject=Comment/Question About NYPD Arrest Map"},r.a.createElement(O.a,{color:"#000"})))))}))}),A=n(13),j=function(e){return{type:"CHANGE_CATEGORY_FILTER",category:e}},R=function(e){return{type:"CHANGE_OFFENSE_FILTER",offense:e}},C=function(e){return{type:"CHANGE_AGE_FILTER",age:e}},D=function(e){return{type:"CHANGE_RACE_FILTER",race:e}},x=function(e){return{type:"CHANGE_SEX_FILTER",sex:e}},T=function(e){return{type:"CHANGE_BOROUGH_FILTER",borough:e}},S=function(){return{type:"APPLYING_FILTERS"}},k=function(e){var t=e.loadData,n=e.raceUniqueValues,l=e.boroughUniqueValues,o=e.ageGroupData,i=e.offenseDescriptionUniqueValues,u=e.setFilters,s=e.changeLaddaLoading,m=e.laddaLoading,g=e.menuClicked,_=e.changeMenuClicked,O=e.collapseOpen,v=e.changeCollapseOpen,k=e.layersRef,F=e.isMobileOrTablet,M=e.footerMenuActive,G=e.isTablet,L=Object(A.b)(),P=Object(A.c)((function(e){return e.applyingFiltersReducer.filters})),w=Object(A.c)((function(e){return e.filteredDataChunksReducer.data})),I=Object(A.c)((function(e){return e.totalCountReducer.total})),B=Object(A.c)((function(e){return e.categoryFilterReducer.category})),U=Object(A.c)((function(e){return e.ageFilterReducer.age})),V=Object(A.c)((function(e){return e.boroughFilterReducer.borough})),q=Object(A.c)((function(e){return e.sexFilterReducer.sex})),z=Object(A.c)((function(e){return e.offenseFilterReducer.offense})),Y=Object(A.c)((function(e){return e.raceFilterReducer.race})),W=Object(A.c)((function(e){return e.ageTimelineColumnsReducer.columns})),H=Object(A.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),Q=Object(A.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),J=Object(A.c)((function(e){return e.raceTimelineColumnsReducer.columns})),K=Object(A.c)((function(e){return e.sexTimelineColumnsReducer.columns})),Z=Object(a.useRef)(null),X=document.getElementsByClassName("bm-burger-button"),$=document.getElementsByClassName("mapboxgl-ctrl-bottom-left"),ee=document.getElementsByClassName("footer_menu_trigger"),te=document.getElementsByClassName("overview_tooltip"),ne=document.getElementsByClassName("map_details_tooltip_container"),ae=document.getElementsByClassName("overview_tooltip legend_tooltip"),re=Object(a.useState)(!0),le=Object(c.a)(re,2),oe=le[0],ie=le[1],ce=function(e){if(B.includes(e))L(j(B.filter((function(t){return t!==e}))));else{var t=B.slice();t.push(e),L(j(t))}},ue=function(e){if(q.includes(e))L(x(q.filter((function(t){return t!==e}))));else{var t=q.slice();t.push(e),L(x(t))}};return Object(a.useEffect)((function(){F&&M?(X[0].style.opacity=.2,X[0].style.pointerEvents="none",X[0].style.transition="opacity 0.5s ease",te[0]&&ne[0]&&(te[0].style.setProperty("opacity",.4,"important"),te[0].style.setProperty("pointerEvents","none"),te[0].style.setProperty("transition","opacity 0.5s ease"),ne[0].style.setProperty("opacity",.4,"important"),ne[0].style.setProperty("pointerEvents","none"),ne[0].style.setProperty("transition","opacity 0.5s ease"))):(X[0].style.opacity=1,X[0].style.pointerEvents="all",X[0].style.transition="opacity 0.5s ease",te[0]&&ne[0]&&(te[0].style.setProperty("opacity",1,"important"),te[0].style.setProperty("pointerEvents","all"),te[0].style.setProperty("transition","opacity 0.5s ease"),ne[0].style.setProperty("opacity",1,"important"),ne[0].style.setProperty("pointerEvents","all"),ne[0].style.setProperty("transition","opacity 0.5s ease")))}),[M,X,F,ne,te]),Object(a.useEffect)((function(){if(F&&W&&W.length>0&&H&&H.length>0&&Q&&Q.length>0&&J&&J.length>0&&K&&K.length>0){var e=setTimeout((function(){oe&&ie(!1)}),4e3);return function(){clearTimeout(e)}}}),[F,oe,W,H,Q,J,K]),Object(a.useEffect)((function(){oe||(te[0]&&ne[0]&&(te[0].style.setProperty("opacity",1,"important"),ne[0].style.setProperty("opacity",1,"important")),ae[0]&&ae[0].style.setProperty("opacity",1,"important"))}),[oe,te,ne,ae]),Object(a.useEffect)((function(){F||(g?(te[0]&&ne[0]&&(te[0].style.setProperty("opacity",.3,"important"),ne[0].style.setProperty("opacity",.3,"important")),ae[0]&&ae[0].style.setProperty("opacity",.3,"important")):(te[0]&&ne[0]&&(te[0].style.setProperty("opacity",1,"important"),ne[0].style.setProperty("opacity",1,"important")),ae[0]&&ae[0].style.setProperty("opacity",1,"important")))}),[F,ae,g,ne,te]),r.a.createElement("div",{className:"navigation_bar_container"},r.a.createElement(h.a,{content:r.a.createElement("div",{className:"map_details_tooltip_container"},r.a.createElement("div",{className:"overview_tooltip_content",style:{minWidth:Z.current&&Z.current.clientWidth,maxWidth:Z.current&&Z.current.clientWidth}},r.a.createElement("p",{style:{color:"rgb(166, 166, 166)"}},"Data Last Updated: November 5, 2020"),r.a.createElement("p",null,"Total Number of Arrests Shown: ",r.a.createElement("br",null),r.a.createElement("strong",null,w.flat().length.toLocaleString())," ","of ",r.a.createElement("strong",null,I.toLocaleString()))),F?G?null:r.a.createElement("div",{className:"map_legend_container",style:{minWidth:Z.current&&Z.current.clientWidth,maxWidth:Z.current&&Z.current.clientWidth}},r.a.createElement("p",null,"Map Legend"),r.a.createElement("div",{className:"map_legend_items_container"},r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 0, 0)"}),r.a.createElement("p",null,"Felony")),r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 116, 0)"}),r.a.createElement("p",null,"Misdemeanor")),r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 193, 0)"}),r.a.createElement("p",null,"Violation")))):null),visible:k.current.length>0&&!!W&&W.length>0&&!!H&&H.length>0&&!!Q&&Q.length>0&&!!J&&J.length>0&&!!K&&K.length>0,allowHTML:!0,reference:Z.current,className:"overview_tooltip"}),r.a.createElement(h.a,{content:r.a.createElement("div",{className:"map_legend_container",style:{minWidth:Z.current&&Z.current.clientWidth,maxWidth:Z.current&&Z.current.clientWidth}},r.a.createElement("p",null,"Map Legend"),r.a.createElement("div",{className:"map_legend_items_container"},r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 0, 0)"}),r.a.createElement("p",null,"Felony")),r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 116, 0)"}),r.a.createElement("p",null,"Misdemeanor")),r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 193, 0)"}),r.a.createElement("p",null,"Violation")))),visible:F?!!G&&(k.current.length>0&&!!W&&W.length>0&&!!H&&H.length>0&&!!Q&&Q.length>0&&!!J&&J.length>0&&!!K&&K.length>0):k.current.length>0&&!!W&&W.length>0&&!!H&&H.length>0&&!!Q&&Q.length>0&&!!J&&J.length>0&&!!K&&K.length>0,allowHTML:!0,reference:F?G?X[0]:ee[0]:$[0],className:"overview_tooltip legend_tooltip",placement:"top-start"}),r.a.createElement("div",{className:"nypd_arrest_map_logo_container",ref:Z},r.a.createElement("a",{href:"/"},r.a.createElement("p",null,"NYPD"),r.a.createElement("p",null,"Arrest"),r.a.createElement("p",null,"Map"))),r.a.createElement(h.a,{content:F?r.a.createElement("p",{style:{textAlign:"center"}},"Click here ",r.a.createElement("br",null),"to set ",r.a.createElement("br",null),"data filters"):"Click here to set data filters",duration:[null,500],arrow:!0,visible:oe&&!!W&&W.length>0&&!!H&&H.length>0&&!!Q&&Q.length>0&&!!J&&J.length>0&&!!K&&K.length>0,reference:X[0],className:"burger_tooltip",placement:"bottom-end",onClickOutside:function(){return ie(!1)}}),r.a.createElement(N,{footerMenuActive:M,isMobileOrTablet:F}),r.a.createElement(f.slide,{right:!0,className:"navbar_nav_menu",customBurgerIcon:r.a.createElement(d.a,{color:"rgb(93, 188, 210)"}),onOpen:function(){g?_(!1):(_(!0),oe&&ie(!1))},onClose:function(){return _(!1)},isOpen:g},r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Category"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return v("category")},onTriggerClosing:function(){return v("")},open:"category"===O,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:B.includes("F"),onChange:function(){return ce("F")}}),"Felony")),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:B.includes("M"),onChange:function(){return ce("M")}}),"Misdemeanor")),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:B.includes("V"),onChange:function(){return ce("V")}}),"Violation")))),r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Offense"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return v("description")},onTriggerClosing:function(){return v("")},open:"description"===O,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},i&&0!==i.length?i.map((function(e,t){return!e||e.includes("OTHER STATE LAWS")&&e.includes("(")?null:r.a.createElement("p",{key:t},r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:z.includes(e),onChange:function(){return function(e){if(z.includes(e))L(R(z.filter((function(t){return t!==e}))));else{var t=z.slice();t.push(e),L(R(t))}}(e)}}),e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")))})):null)),r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Age Group"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return v("age")},onTriggerClosing:function(){return v("")},open:"age"===O,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},o?o.sort((function(e,t){return e.localeCompare(t)})).map((function(e,t){return r.a.createElement("p",{key:t},r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:U.includes(e),onChange:function(){return function(e){if(U.includes(e))L(C(U.filter((function(t){return t!==e}))));else{var t=U.slice();t.push(e),L(C(t))}}(e)}}),"65"===e?"65+":e))})):null)),r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Race"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return v("race")},onTriggerClosing:function(){return v("")},open:"race"===O,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},n?n.map((function(e,t){return e?r.a.createElement("p",{key:t},r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:Y.includes(e),onChange:function(){return function(e){if(Y.includes(e))L(D(Y.filter((function(t){return t!==e}))));else{var t=Y.slice();t.push(e),L(D(t))}}(e)}}),e&&e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/"))):null})):null)),r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Sex"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return v("sex")},onTriggerClosing:function(){return v("")},open:"sex"===O,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:q.includes("F"),onChange:function(){return ue("F")}}),"Female")),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:q.includes("M"),onChange:function(){return ue("M")}}),"Male")))),r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Borough"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return v("borough")},onTriggerClosing:function(){return v("")},open:"borough"===O,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},l?l.map((function(e,t){return r.a.createElement("p",{key:t},r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:V.includes(e),onChange:function(){return function(e){if(V.includes(e))L(T(V.filter((function(t){return t!==e}))));else{var t=V.slice();t.push(e),L(T(t))}}(e)}}),"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"))})):null)),r.a.createElement("span",{className:"spacer"}),r.a.createElement(y.a,{loading:m,className:"apply_filters_button",onClick:function(){P||L(S()),m||s(!0),u(B,z,U,Y,q,V,t,!1)},"data-color":"blue","data-size":E.XL,"data-style":E.EXPAND_LEFT,"data-spinner-size":30,"data-spinner-color":"#fff","data-spinner-lines":12},m?"APPLYING FILTERS":"APPLY FILTERS")))},F=n(178),M=n(179),G=n(138),L=n.n(G),P=(n(265),n(266),n(267),n(34)),w=n(28),I=n.n(w),B=function(e){var t=e.filteredArrestCategory,n=e.graphOption,a=Object(A.c)((function(e){return e.applyingFiltersReducer.filters}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===n?"block":"none"}},r.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Category"),r.a.createElement("div",{className:"bottom_info_pie_container"},a?r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}):r.a.createElement(P.a,{chartType:"PieChart",loader:r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}),data:t?[["Category","Number of Arrests"],["Felony",t.filter((function(e){return"F"===e})).length],["Misdemeanor",t.filter((function(e){return"M"===e})).length],["Violation",t.filter((function(e){return"F"!==e&&"M"!==e})).length]]:[],options:{backgroundColor:"transparent"}})))},U=function(e){var t=e.filteredAgeGroupData,n=e.filteredAgeGroup,a=e.graphOption,l=Object(A.c)((function(e){return e.applyingFiltersReducer.filters}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"}},r.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Age Group"),r.a.createElement("div",{className:"bottom_info_pie_container"},l?r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}):r.a.createElement(P.a,{chartType:"PieChart",loader:r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Age Group","Number of Arrests"]].concat(t.map((function(e){return["65"===e?"65+":e,n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},V=function(e){var t=e.filteredRaceUniqueValues,n=e.filteredRaceArr,a=e.graphOption,l=Object(A.c)((function(e){return e.applyingFiltersReducer.filters}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"}},r.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Race"),r.a.createElement("div",{className:"bottom_info_pie_container"},l?r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}):r.a.createElement(P.a,{chartType:"PieChart",loader:r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Race","Number of Arrests"]].concat(t.map((function(e){return[e?e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/"):null,n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},q=function(e){var t=e.filteredSexUniqueValues,n=e.filteredSexArr,a=e.graphOption,l=Object(A.c)((function(e){return e.applyingFiltersReducer.filters}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"}},r.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Sex"),r.a.createElement("div",{className:"bottom_info_pie_container"},l?r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}):r.a.createElement(P.a,{chartType:"PieChart",loader:r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Sex","Number of Arrests"]].concat(t.map((function(e){return["M"===e?"Male":"Female",n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},z=function(e){var t=e.filteredBoroughUniqueValues,n=e.filteredBoroughArr,a=e.graphOption,l=Object(A.c)((function(e){return e.applyingFiltersReducer.filters}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"}},r.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Borough"),r.a.createElement("div",{className:"bottom_info_pie_container"},l?r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}):r.a.createElement(P.a,{chartType:"PieChart",loader:r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Borough","Number of Arrests"]].concat(t.map((function(e){return["B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown",n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},Y=function(e){var t=e.filteredOffenseDescriptionArr,n=e.filteredOffenseDescriptionUniqueValues,l=e.graphOption,o=e.isSame,i=e.usePrevious,u=e.isMobileOrTablet,s=e.isMediumLaptop,m=Object(a.useState)([]),f=Object(c.a)(m,2),d=f[0],p=f[1],g=i(t),b=i(n),h=Object(A.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(a.useEffect)((function(){if(t&&t.length>0&&n.length>0&&(t!==g||n!==b)){var e=n.map((function(e){return[e,t.filter((function(t){return t===e})).length]})).sort((function(e,t){return e[1]>t[1]?1:-1}));o(e,d)||p(e)}}),[o,t,n,d,g,b]),r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===l?"block":"none"}},d.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"bottom_info_section_title"},"Top 5 Offenses"),r.a.createElement("div",{className:"bottom_info_pie_container"},h?r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}):r.a.createElement(P.a,{chartType:"BarChart",loader:r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Offense Description","Number of Arrests"]].concat(d.length>0?d.slice(d.length-5,d.length).sort((function(e,t){return e[1]>t[1]?-1:1})):["UNKNOWN",1]),options:{backgroundColor:"transparent",legend:{position:"none"},width:u?300:s?400:600,bar:u?null:{groupWidth:"95%"},chartArea:u?null:{width:"50%",height:"50%"}}}))):null)},W=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(A.c)((function(e){return e.ageTimelineColumnsReducer.columns}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()}},r.a.createElement("p",{className:"bottom_info_section_title"},"Age Group Trends"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(P.a,{legendToggle:!0,chartType:"LineChart",loader:r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})))},H=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(A.c)((function(e){return e.boroughTimelineColumnsReducer.columns}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()}},r.a.createElement("p",{className:"bottom_info_section_title"},"Borough Trends"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(P.a,{legendToggle:!0,chartType:"LineChart",loader:r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})))},Q=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(A.c)((function(e){return e.categoryTimelineColumnsReducer.columns}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()}},r.a.createElement("p",{className:"bottom_info_section_title"},"Category Trends"),r.a.createElement("div",{className:"bottom_info_pie_container category_timeline_container"},r.a.createElement(P.a,{legendToggle:!0,chartType:"LineChart",loader:r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})))},J=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(A.c)((function(e){return e.sexTimelineColumnsReducer.columns}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()}},r.a.createElement("p",{className:"bottom_info_section_title"},"Gender Trends"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(P.a,{legendToggle:!0,chartType:"LineChart",loader:r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})))},K=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(A.c)((function(e){return e.raceTimelineColumnsReducer.columns}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()}},r.a.createElement("p",{className:"bottom_info_section_title"},"Race Trends"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(P.a,{legendToggle:!0,chartType:"LineChart",loader:r.a.createElement(I.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})))},Z=n(124),X=function(e){var t=e.tooltipVisible,n=e.filteredAgeGroup,l=e.filteredRaceArr,o=e.filteredSexArr,i=e.filteredBoroughArr,u=e.filteredOffenseDescriptionArr,s=e.filteredArrestCategory,m=e.filteredUniqueCategory,f=e.filteredAgeGroupData,d=e.filteredRaceUniqueValues,g=e.filteredSexUniqueValues,b=e.filteredBoroughUniqueValues,E=e.filteredOffenseDescriptionUniqueValues,y=e.currentFilters,_=e.isSame,O=e.usePrevious,v=e.graphOption,N=e.changeGraphOption,j=e.layersRef,R=e.isMobileOrTablet,C=e.isMediumLaptop,D=e.footerMenuActive,x=e.changeFooterMenuActive,T=e.filteredTimelineAgeGroupData,S=e.filteredTimelineBoroughData,k=e.filteredTimelineCategoryData,G=e.filteredTimelineSexData,P=e.filteredTimelineRaceData,w=Object(A.c)((function(e){return e.applyingFiltersReducer.filters})),I=Object(A.c)((function(e){return e.trendsAvailableReducer.available})),X=Object(A.c)((function(e){return e.ageTimelineColumnsReducer.columns})),$=Object(A.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),ee=Object(A.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),te=Object(A.c)((function(e){return e.raceTimelineColumnsReducer.columns})),ne=Object(A.c)((function(e){return e.sexTimelineColumnsReducer.columns})),ae=Object(a.useState)(!1),re=Object(c.a)(ae,2),le=re[0],oe=re[1],ie=Object(a.useState)(!R),ce=Object(c.a)(ie,2),ue=ce[0],se=ce[1],me=Object(a.useState)(!0),fe=Object(c.a)(me,2),de=fe[0],pe=fe[1],ge=Object(a.useRef)(null),be=Object(a.useRef)(null),he=document.getElementsByClassName("carousel_right_arrow"),Ee=document.getElementsByClassName("alice-carousel"),ye=document.getElementsByClassName("overview_carousel"),_e=document.getElementsByClassName("trends_carousel"),Oe=document.getElementsByClassName("category_timeline_container"),ve=document.getElementsByClassName("google-visualization-tooltip");Object(a.useEffect)((function(){if("trends"===v&&!w){var e=setInterval((function(){var e=ve[0],t=document.getElementsByTagName("circle");if(e){for(var n=document.getElementsByClassName("alice-carousel__stage-item __active"),a=n[1].getElementsByTagName("path"),r=n[1].getElementsByTagName("text"),l=(a.length-2)/2,o=0;o<l;o++)if("none"===a.item(o).getAttribute("stroke")&&r.item(o).textContent.slice(0,4)===e.lastChild.firstChild.textContent.split(":")[0].slice(0,4)){e.style.display="none";for(var i=0;i<t.length;i++)t[i].style.display="none"}}else for(var c=0;c<t.length;c++)t[c].style.display="block"}),10);return function(){clearInterval(e)}}}),[ve,v,w]),Object(a.useEffect)((function(){if("overview"===v)if(be.current)be.current.style.display="none";else var e=setInterval((function(){be&&ge.current&&(be.current.style.display="none",clearInterval(e))}),500);else ge.current&&(ge.current.style.display="none")}),[v]),Object(a.useEffect)((function(){var e=document.getElementsByClassName("graph_options_container")[0].lastChild.lastChild;e.style.opacity=I?1:.7}),[I]),Object(a.useEffect)((function(){if(!w)for(var e=0;e<Ee.length;e++)0===e?Ee[e].className.includes("overview_carousel")||(Ee[e].className+=" overview_carousel"):Ee[e].className.includes("trends_carousel")||(Ee[e].className+=" trends_carousel")}),[Ee,w]),Object(a.useEffect)((function(){if("overview"!==v||w)ye&&ye[0]&&(ye[0].style.opacity=0,ye[0].style.opacity=-1),_e&&_e[0]&&(_e[0].style.opacity=1,_e[0].style.zIndex=1);else if(ye&&ye[0]&&(ye[0].style.opacity=1,ye[0].style.zIndex=1),_e)if(_e[0])_e[0].style.opacity=0,_e[0].style.zIndex=-1;else var e=setInterval((function(){var t=document.getElementsByClassName("trends_carousel");t[0]&&(t[0].style.opacity=0,t[0].style.zIndex=-1,clearInterval(e))}),500)}),[v,ye,_e,w]);return r.a.createElement("div",{className:"bottom_info_panel_container",style:{zIndex:R?t?-1:10:t?-1:0,transform:R?D?"translate3d(0, 0, 0)":"translate3d(0, 100%, 0)":"none"}},r.a.createElement("div",{className:"shadow_overlay",onClick:function(){return x(!1)},style:{opacity:D?1:0,display:D?"block":"none"}}," "),r.a.createElement("div",{className:"footer_menu_trigger",onClick:function(){D?x(!1):(x(!0),le||(setTimeout((function(){se(!0)}),1800),oe(!0)))}},D?r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,null)," BACK TO ARREST MAP"):r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,null)," VIEW GRAPHS AND TRENDS")),r.a.createElement("div",{className:"bottom_info_main_info_box"},r.a.createElement("div",{className:"filters_applied"},r.a.createElement("h2",null,"Filters Applied"),0===y.category.length&&0===y.offense.length&&0===y.age.length&&0===y.race.length&&0===y.sex.length&&0===y.borough.length?r.a.createElement("p",{className:"no_filters_applied_statement"},"No filters currently applied"):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,0===y.category.length?null:"Categor"+(y.category.length>1?"ies: ":"y: ")),0===y.category.length?null:y.category.map((function(e){return"F"===e?"Felony":"M"===e?"Misdemeanor":"Violation"})).join(", ")),r.a.createElement("p",null,r.a.createElement("strong",null,0===y.offense.length?null:"Offense"+(1===y.offense.length?": ":"s: ")),0===y.offense.length?null:y.offense.join(", ")),r.a.createElement("p",null,r.a.createElement("strong",null,0===y.age.length?null:"Age"+(1===y.age.length?": ":"s: ")),0===y.age.length?null:y.age.map((function(e){return"65"===e?"65+":e})).join(", ")),r.a.createElement("p",null,r.a.createElement("strong",null,0===y.race.length?null:"Race"+(1===y.race.length?": ":"s: ")),0===y.race.length?null:y.race.join(", ")),r.a.createElement("p",null,r.a.createElement("strong",null,0===y.sex.length?null:"Sex: "),0===y.sex.length?null:y.sex.map((function(e){return"M"===e?"Male":"Female"})).join(", ")),r.a.createElement("p",null,r.a.createElement("strong",null,0===y.borough.length?null:"Borough"+(1===y.borough.length?": ":"s: ")),0===y.borough.length?null:y.borough.map((function(e){return"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"})).join(", ")))),r.a.createElement("div",{className:"graph_options_container"},r.a.createElement("p",null,"Graph Options"),r.a.createElement(Z.RadioGroup,{onChange:function(e){return N(e)},horizontal:!0,value:v},r.a.createElement(Z.RadioButton,{rootColor:"rgb(140, 140, 140)",pointColor:"rgb(0, 0, 128)",value:"overview"},"Overview"),r.a.createElement(Z.RadioButton,{rootColor:"rgb(140, 140, 140)",pointColor:"rgb(0, 0, 128)",value:"trends",disabled:!I,disabledColor:"rgb(211, 211, 211)"},"Trends")))),r.a.createElement("div",{className:"carousel_container",onTouchStart:function(){"trends"===v&&(de&&pe(!1),ue&&se(!1))}},r.a.createElement(h.a,{content:"Click the left and right arrows to view more graphs",visible:R?D&&ue&&j.current.length>0&&!!X&&X.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0:ue&&j.current.length>0&&!!X&&X.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0,reference:he[0],className:"burger_tooltip",placement:"left",onClickOutside:function(){return se(!1)}}),r.a.createElement(p.a,{color:"rgb(0, 0, 0)",className:"carousel_left_arrow",onClick:function(){ge.slidePrev(),be.slidePrev(),ue&&se(!1)}}),r.a.createElement(L.a,{ref:function(e){return ge=e},autoPlay:!1,fadeOutAnimation:!0,dotsDisabled:!0,buttonsDisabled:!0,mouseTrackingEnabled:!0,playButtonEnabled:!1,disableAutoPlayOnAction:!1,responsive:{0:{items:1},760:{items:2},1600:{items:3}},preservePosition:!0,items:[r.a.createElement(B,{key:"overview",filteredArrestCategory:s,graphOption:v}),r.a.createElement(U,{key:"overview",filteredAgeGroup:n,filteredAgeGroupData:f,graphOption:v}),r.a.createElement(V,{key:"overview",filteredRaceUniqueValues:d,filteredRaceArr:l,graphOption:v}),r.a.createElement(q,{key:"overview",filteredSexUniqueValues:g,filteredSexArr:o,graphOption:v}),r.a.createElement(z,{key:"overview",filteredBoroughUniqueValues:b,filteredBoroughArr:i,graphOption:v}),r.a.createElement(Y,{key:"overview",filteredOffenseDescriptionArr:u,filteredOffenseDescriptionUniqueValues:E,graphOption:v,isSame:_,usePrevious:O,isMobileOrTablet:R,isMediumLaptop:C})]}),r.a.createElement(h.a,{content:R?null:"Scroll to zoom in and out of trend graphs",visible:!R&&("trends"===v&&de),reference:Oe.length>2?Oe[1]:Oe[0],className:"burger_tooltip trend_tooltip",placement:"top",onClickOutside:function(){return pe(!1)}}),r.a.createElement(h.a,{content:"Toggle data lines by selecting legend items",visible:"trends"===v&&de,reference:Oe.length>2?Oe[1]:Oe[0],className:"burger_tooltip trend_tooltip",placement:R?"left":"right",offset:R?[-30,-180]:[0,50],onClickOutside:function(){return pe(!1)}}),w?null:r.a.createElement(L.a,{ref:function(e){return be=e},autoPlay:!1,dotsDisabled:!0,buttonsDisabled:!0,mouseTrackingEnabled:!1,playButtonEnabled:!1,disableAutoPlayOnAction:!1,touchMoveDefaultEvents:!1,responsive:{0:{items:1},760:{items:2},1600:{items:3}},preservePosition:!0,items:[r.a.createElement(Q,{key:"trends",filteredTimelineCategoryData:k,filteredArrestCategory:s,filteredUniqueCategory:m,isMobileOrTablet:R,isMediumLaptop:C}),r.a.createElement(W,{key:"trends",filteredAgeGroupData:f,filteredTimelineAgeGroupData:T,isMobileOrTablet:R,isMediumLaptop:C}),r.a.createElement(H,{key:"trends",filteredBoroughUniqueValues:b,filteredTimelineBoroughData:S,isMobileOrTablet:R,isMediumLaptop:C}),r.a.createElement(K,{key:"trends",filteredRaceUniqueValues:d,filteredTimelineRaceData:P,isMobileOrTablet:R,isMediumLaptop:C}),r.a.createElement(J,{key:"trends",filteredSexUniqueValues:g,filteredTimelineSexData:G,isMobileOrTablet:R,isMediumLaptop:C})]}),r.a.createElement(p.b,{color:"rgb(0, 0, 0)",className:"carousel_right_arrow",onClick:function(){ge.slideNext(),be.slideNext(),ue&&se(!1)}})))},$=n(125),ee=n.n($),te=n(180),ne=n.n(te),ae={2006:371932,2007:403229,2008:401526,2009:421314,2010:422320,2011:412856,2012:396278,2013:393807,2014:387725,2015:339468,2016:314862,2017:286223,2018:246772,2019:214616,2020:103375},re=n(181),le=n(111),oe=n(89),ie=n(113),ce=n(182),ue=n.n(ce),se=n(184),me=n.n(se),fe=n(75),de=(n(132),n(112));function pe(){var e=Object(le.a)(["\n    display: block;\n    margin: 0 auto;\n  "]);return pe=function(){return e},e}var ge=function(e){var t=e.countUp,n=e.loaderColor,a=e.mapError,l=e.applyingFiltersProgressRef,o=Object(fe.css)(pe()),i=Object(A.c)((function(e){return e.filteredDataChunksReducer.data})),c=Object(A.c)((function(e){return e.totalCountReducer.total}));return r.a.createElement(de.a,{className:"loading_container"},0===c?r.a.createElement(ue.a,{css:o,size:50,color:n,style:{transition:"all 0.5s ease"},loading:""===i||"object"===typeof i&&i.flat().length<9e4}):t>95?r.a.createElement(me.a,{css:o,size:200,color:"rgb(93, 188, 210)",style:{transition:"all 0.5s ease"},loading:t>95}):r.a.createElement(oe.a,{value:t,styles:Object(oe.b)({strokeLinecap:"butt",trailColor:"#eee"})},r.a.createElement(ie.a,{color:"#fff",size:"4rem"}),r.a.createElement("div",{style:{fontSize:30,marginTop:20,color:"#fff"}},r.a.createElement("strong",null,t,"%"))),r.a.createElement("p",null,a?"Error Initializing NYPD Arrest Map":0===c?"Initializing NYPD Arrest Map":t>95?"Analyzing Arrest Data (".concat(l.current,"% Done)"):"Loading Most Recent Arrest Data"))},be=n(114),he=n.n(be),Ee=function(e){var t=e.modalActive,n=e.changeModalActive,l=Object(A.c)((function(e){return e.loadDataChunksReducer.data})),o=Object(A.c)((function(e){return e.filteredDataChunksReducer.data})),i=Object(a.useState)(0),u=Object(c.a)(i,2),s=u[0],m=u[1];return Object(a.useEffect)((function(){if(l[0][t.year.toString()]){var e=100*Number(l[0][t.year.toString()].map((function(e){return e.length})).reduce((function(e,t){return e+t}),0)/ae[t.year.toString()]).toFixed(1);100===s?n({active:!1,year:null}):e&&e!==s&&m(e)}}),[l,t.year,n,s,o.length]),r.a.createElement(he.a,{isOpen:t.active,style:{content:{position:"fixed",zIndex:1e4,opacity:.99,height:"100%",backdropFilter:"blur(5px)",WebkitBackdropFilter:"blur(5px)",paddingBottom:"10%",borderRadius:"none",width:"100vw",top:"0",left:"0",right:"0",bottom:"0",border:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)"}}},r.a.createElement(oe.a,{value:s,styles:Object(oe.b)({strokeLinecap:"butt",trailColor:"#eee"})},r.a.createElement(ie.a,{color:"#fff",size:"4rem"}),r.a.createElement("div",{style:{fontSize:30,marginTop:20,color:"#fff"}},r.a.createElement("strong",null,s,"%"))),r.a.createElement("p",null,"Loading ",t.year," Arrest Data"))},ye=function(e,t){return{type:"FILTERED_DATA_CHUNKS_ADD_TO_YEAR",data:e,dataIndex:t}},_e=function(e){return{type:"FILTERED_DATA_CHUNKS_ADD_YEAR",data:e}},Oe=function(e){return{type:"ASSIGN_FILTERED_DATA_CHUNKS",data:e}},ve=function(e){return{type:"INCREMENT_TOTAL_COUNT",dataLength:e}},Ne=function(e){return{type:"ASSIGN_LOAD_DATA",data:e}},Ae=function(){return{type:"FILTERED_DATA_CHANGED"}},je=function(){return{type:"FILTERED_DATA_CHANGED_RESET"}},Re=function(e){return{type:"TIMELINE_AGE_GROUP_GRAPH_DATA",data:e}},Ce=function(e){return{type:"TIMELINE_BOROUGH_GRAPH_DATA",data:e}},De=function(e){return{type:"TIMELINE_CATEGORY_GRAPH_DATA",data:e}},xe=function(e){return{type:"TIMELINE_GENDER_GRAPH_DATA",data:e}},Te=function(e){return{type:"TIMELINE_RACE_GRAPH_DATA",data:e}},Se=function(){return new Worker(n.p+"static/js/setFilterAndTimelineGraphWorkers.d8562690.worker.js")},ke=function(e){return{type:"AGE_TIMELINE_COLUMNS",columns:e}},Fe=function(e){return{type:"BOROUGH_TIMELINE_COLUMNS",columns:e}},Me=function(e){return{type:"CATEGORY_TIMELINE_COLUMNS",columns:e}},Ge=function(e){return{type:"SEX_TIMELINE_COLUMNS",columns:e}},Le=function(e){return{type:"RACE_TIMELINE_COLUMNS",columns:e}},Pe=function(){return{type:"APPLYING_FILTERS_RESET"}},we=n(185),Ie=n.n(we);n(326);function Be(){var e=Object(le.a)(["\n    display: block;\n    margin: 0 auto;\n  "]);return Be=function(){return e},e}var Ue=function(e){var t=e.applyingFiltersProgressRef,n=Object(a.useRef)(null),l=Object(fe.css)(Be()),o=Object(A.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(a.useEffect)((function(){n&&n.current&&(o?n.current.open():n.current.close())}),[o]),r.a.createElement(v.a,{className:"applying_filters",ref:n,modal:!0,closeOnDocumentClick:!1,closeOnEscape:!1},r.a.createElement("div",{className:"applying_filters_modal"},r.a.createElement(Ie.a,{css:l,size:80,color:"rgb(0, 109, 129)",style:{transition:"all 0.5s ease"},loading:!0}),r.a.createElement("p",null,"Applying Filters (",t.current,"% Done)")))},Ve=function(){return{type:"NEW_YEAR_FINISHED_LOADING_RESET"}},qe=function(){return{type:"NEW_YEAR_FINISHED_LOADING"}},ze=function(){return{type:"TRENDS_AVAILABLE"}},Ye=function(){return{type:"TRENDS_NOT_AVAILABLE"}},We=n(100),He=n(188);ee.a.extend(ne.a);var Qe=function(){var e=Object(A.b)(),t=Object(A.c)((function(e){return e.loadDataReducer.data})),n=Object(A.c)((function(e){return e.filteredDataReducer.changed})),l=Object(A.c)((function(e){return e.filteredDataChunksReducer.data})),o=Object(A.c)((function(e){return e.newYearFinishedLoadingReducer.finished})),f=Object(A.c)((function(e){return e.totalCountReducer.total})),d=Object(A.c)((function(e){return e.ageGroupTimelineGraphDataReducer.data})),p=Object(A.c)((function(e){return e.boroughTimelineGraphDataReducer.data})),g=Object(A.c)((function(e){return e.categoryTimelineGraphDataReducer.data})),b=Object(A.c)((function(e){return e.genderTimelineGraphDataReducer.data})),h=Object(A.c)((function(e){return e.raceTimelineGraphDataReducer.data})),E=Object(A.c)((function(e){return e.ageTimelineColumnsReducer.columns})),y=Object(A.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),_=Object(A.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),O=Object(A.c)((function(e){return e.raceTimelineColumnsReducer.columns})),v=Object(A.c)((function(e){return e.sexTimelineColumnsReducer.columns})),N=Object(a.useState)(!1),j=Object(c.a)(N,2),R=j[0],C=j[1],D=Object(a.useState)(!1),x=Object(c.a)(D,2),T=x[0],S=x[1],F=Object(a.useState)("rgb(93, 188, 210)"),M=Object(c.a)(F,2),G=M[0],L=M[1],P=Object(a.useState)(!1),w=Object(c.a)(P,2),I=w[0],B=w[1],U=Object(a.useState)({active:!1,year:null}),V=Object(c.a)(U,2),q=V[0],z=V[1],Y=Object(a.useState)(!1),W=Object(c.a)(Y,2),H=W[0],Q=W[1],J=Object(a.useState)(!1),K=Object(c.a)(J,2),Z=K[0],$=K[1],te=Object(a.useState)("overview"),ne=Object(c.a)(te,2),le=ne[0],oe=ne[1],ie=Object(a.useState)(!1),ce=Object(c.a)(ie,2),ue=ce[0],se=ce[1],me=Object(a.useState)({category:[],offense:[],age:[],race:[],sex:[],borough:[]}),fe=Object(c.a)(me,2),pe=fe[0],be=fe[1],we=Object(We.useMediaQuery)({maxWidth:1224}),Ie=Object(We.useMediaQuery)({minWidth:768}),Be=Object(We.useMediaQuery)({maxWidth:1440}),Qe=Object(We.useMediaQuery)({orientation:"portrait"}),Je=Object(a.useState)(!1),Ke=Object(c.a)(Je,2),Ze=Ke[0],Xe=Ke[1],$e=Object(a.useState)([]),et=Object(c.a)($e,2),tt=et[0],nt=et[1],at=Object(a.useState)(""),rt=Object(c.a)(at,2),lt=rt[0],ot=rt[1],it=Object(a.useState)(""),ct=Object(c.a)(it,2),ut=ct[0],st=ct[1],mt=Object(a.useState)(""),ft=Object(c.a)(mt,2),dt=ft[0],pt=ft[1],gt=Object(a.useState)(""),bt=Object(c.a)(gt,2),ht=bt[0],Et=bt[1],yt=Object(a.useState)(""),_t=Object(c.a)(yt,2),Ot=_t[0],vt=_t[1],Nt=Object(a.useState)(!1),At=Object(c.a)(Nt,2),jt=At[0],Rt=At[1],Ct=Object(a.useState)(!1),Dt=Object(c.a)(Ct,2),xt=Dt[0],Tt=Dt[1],St=Object(a.useState)(""),kt=Object(c.a)(St,2),Ft=kt[0],Mt=kt[1],Gt=Object(a.useRef)([]),Lt=Object(a.useRef)(0),Pt=Object(a.useRef)(null);Object(a.useEffect)((function(){he.a.setAppElement("body")}),[]);var wt=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current},It=wt(pe),Bt=Object(re.useCountUp)({start:0,end:t.length>0?100*Number((t.length/ae[2020]).toFixed(1)):0,delay:0,duration:1}),Ut=Bt.countUp,Vt=Bt.update;Object(a.useEffect)((function(){if(t.length>0){var e=100*Number((t.length/ae[2020]).toFixed(1));Vt(e>=60?100:e)}}),[Vt,Ut,t]);var qt=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},zt=Object(a.useState)([]),Yt=Object(c.a)(zt,2),Wt=Yt[0],Ht=Yt[1],Qt=Object(a.useState)([]),Jt=Object(c.a)(Qt,2),Kt=Jt[0],Zt=Jt[1],Xt=Object(a.useState)([]),$t=Object(c.a)(Xt,2),en=$t[0],tn=$t[1],nn=Object(a.useState)([]),an=Object(c.a)(nn,2),rn=an[0],ln=an[1],on=Object(a.useState)([]),cn=Object(c.a)(on,2),un=cn[0],sn=cn[1],mn=Object(a.useState)([]),fn=Object(c.a)(mn,2),dn=fn[0],pn=fn[1],gn=Object(a.useState)([]),bn=Object(c.a)(gn,2),hn=bn[0],En=bn[1],yn=Object(a.useState)([]),_n=Object(c.a)(yn,2),On=_n[0],vn=_n[1],Nn=Object(a.useState)([]),An=Object(c.a)(Nn,2),jn=An[0],Rn=An[1],Cn=Object(a.useState)([]),Dn=Object(c.a)(Cn,2),xn=Dn[0],Tn=Dn[1],Sn=Object(a.useState)([]),kn=Object(c.a)(Sn,2),Fn=kn[0],Mn=kn[1],Gn=Object(a.useState)([]),Ln=Object(c.a)(Gn,2),Pn=Ln[0],wn=Ln[1],In=Object(a.useState)([]),Bn=Object(c.a)(In,2),Un=Bn[0],Vn=Bn[1],qn=Object(a.useState)([]),zn=Object(c.a)(qn,2),Yn=zn[0],Wn=zn[1],Hn=Object(a.useState)([]),Qn=Object(c.a)(Hn,2),Jn=Qn[0],Kn=Qn[1],Zn=Object(a.useState)([]),Xn=Object(c.a)(Zn,2),$n=Xn[0],ea=Xn[1],ta=Object(a.useCallback)((function(t,n,a,r,l){Ot&&(Ot.postMessage({ageObj:t,raceObj:n,categoryObj:a,sexObj:r,boroughObj:l}),Ot.onmessage=function(t){Lt.current+=25;var n=t.data.ageGroupTimelineGraphData,a=t.data.raceTimelineGraphData,r=t.data.categoryTimelineGraphData,l=t.data.genderTimelineGraphData,o=t.data.boroughTimelineGraphData;e(Re(n)),e(Ce(o)),e(De(r)),e(xe(l)),e(Te(a))})}),[Ot,e]),na=Object(a.useCallback)((function(e,t,n,a,r,l,o,i,c){dt&&(dt.postMessage({ageGroup:e,raceArr:t,boroughArr:n,offenseDescriptionArr:a,filteredAgeGroup:r,filteredSexArr:l,filteredRaceArr:o,filteredBoroughArr:i,filteredOffenseDescriptionArr:c}),dt.onmessage=function(e){Lt.current+=25;var t=JSON.parse(e.data),n=t.ageGroupData,a=t.raceUniqueValues,r=t.boroughUniqueValues,l=t.offenseDescriptionArr,o=t.filteredAgeGroupData,i=t.filteredSexUniqueValues,c=t.filteredRaceUniqueValues,u=t.filteredBoroughUniqueValues,s=t.filteredOffenseDescriptionUniqueValues;ca(o),fa(c),ba(i),_a(u),Aa(s),Da(n),ka(a),La(r),Ba(l),$(!0)})}),[dt]),aa=Object(a.useCallback)((function(e,t,n){ut&&(ut.postMessage({loadData:e,filteredDataChunks:t,currentFilters:n}),ut.onmessage=function(e){Lt.current+=25;var t=JSON.parse(e.data),n=t.ageGroup,a=t.raceArr,r=t.boroughArr,l=t.offenseDescriptionArr,o=t.filteredArrestCategory,i=t.filteredAgeGroup,c=t.filteredSexArr,u=t.filteredRaceArr,s=t.filteredBoroughArr,m=t.filteredOffenseDescriptionArr,f=t.filteredUniqueCategory;na(n,a,r,l,i,c,u,s,m),Ht(n),Zt(a),tn(r),ln(l),sn(o),pn(i),En(c),vn(u),Rn(s),Tn(m),Mn(f)})}),[ut,na]),ra=Object(a.useCallback)((function(e){ht&&(ht.postMessage({chunk:e}),ht.onmessage=function(e){Lt.current+=25;var t=JSON.parse(e.data),n=t.age_group,a=t.borough,r=t.category,l=t.sex,o=t.race;wn(n),Vn(a),Wn(r),Kn(l),ea(o)})}),[ht]),la=Object(a.useState)([]),oa=Object(c.a)(la,2),ia=oa[0],ca=oa[1],ua=Object(a.useState)([]),sa=Object(c.a)(ua,2),ma=sa[0],fa=sa[1],da=Object(a.useState)([]),pa=Object(c.a)(da,2),ga=pa[0],ba=pa[1],ha=Object(a.useState)([]),Ea=Object(c.a)(ha,2),ya=Ea[0],_a=Ea[1],Oa=Object(a.useState)([]),va=Object(c.a)(Oa,2),Na=va[0],Aa=va[1],ja=Object(a.useState)([]),Ra=Object(c.a)(ja,2),Ca=Ra[0],Da=Ra[1],xa=Object(a.useState)([]),Ta=Object(c.a)(xa,2),Sa=Ta[0],ka=Ta[1],Fa=Object(a.useState)([]),Ma=Object(c.a)(Fa,2),Ga=Ma[0],La=Ma[1],Pa=Object(a.useState)([]),wa=Object(c.a)(Pa,2),Ia=wa[0],Ba=wa[1];Object(a.useEffect)((function(){Z&&($(!1),ta({unique:ia,data:Pn},{unique:ma,data:$n},{unique:Fn,data:Yn},{unique:ga,data:Jn},{unique:ya,data:Un}))}),[g.length,ia,ya,ma,ga,Pn,Un,Yn,$n,Jn,Fn,ta,Z]);var Ua=Object(a.useCallback)((function(){0!==Lt.current&&(Lt.current=0);var e=l.map((function(e){return Number(ee()(e[5].ARREST_DATE,"MM/DD/YYYY").format("YYYY"))}));Gt.current=l.map((function(t,n){var a=ee()(t[5].ARREST_DATE,"MM/DD/YYYY").format("YYYY");return new m.a({id:"chunk-".concat(n),data:t,visible:e.flat().includes(Number(a)),filled:!0,radiusMinPixels:2,getPosition:function(e){return[Number(e.Longitude),Number(e.Latitude)]},getFillColor:function(e){return"F"===e.LAW_CAT_CD?[255,0,0]:"M"===e.LAW_CAT_CD?[255,116,0]:[255,193,0]},pickable:!0,useDevicePixels:!1})}))}),[l]);Object(a.useEffect)((function(){var n=ae[2020];o&&(e(Ve()),f===n&&t.length===n&&(e(Oe([t])),e(Ae())))}),[o,t,e,f]),Object(a.useEffect)((function(){n||H&&Q(!1)}),[n,H]),Object(a.useEffect)((function(){f>0&&f===ae[2020]&&n&&(H||(Ua(),aa(t,l,pe),ra(l),e(je())),Q(!0))}),[t,H,pe,n,Ua,Wt,en,dn,jn,xn,On,hn,rn,aa,Kt,e,l,ra,Fn,Yn,f]);var Va=wt(d),qa=wt(p),za=wt(g),Ya=wt(b),Wa=wt(h);Object(a.useEffect)((function(){if(d!==Va&&d.length>0&&ia.length===d[0].length-1&&e(ke([[{type:"date",label:"Date"}].concat(ia.map((function(e){return"65"===e?"65+":e})))].concat(d))),p!==qa&&p.length>0&&ya.length===p[0].length-1&&e(Fe([[{type:"date",label:"Date"}].concat(ya.map((function(e){return"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"})))].concat(p))),g!==za&&g.length>0&&Fn.length>0){var t=Object(i.a)(new Set(Fn.map((function(e){return"F"===e?"Felony":"M"===e?"Misdemeanor":"Violation"}))));t.length===g[0].length-1&&e(Me([[{type:"date",label:"Date"}].concat(t)].concat(g)))}if(b!==Ya&&b.length>0){var n=ga.map((function(e){return"F"===e?"Female":"Male"}));n.length===b[0].length-1&&e(Ge([[{type:"date",label:"Date"}].concat(n)].concat(b)))}if(h!==Wa&&h.length>0){var a=ma.map((function(e){return e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")}));a.length===h[0].length-1&&e(Le([[{type:"date",label:"Date"}].concat(a)].concat(h))),e(ze()),e(Pe())}}),[d,p,g,e,ia,b,Va,qa,za,Ya,Wa,h,ya,Fn,ma,ga]),Object(a.useEffect)((function(){if(I)L("rgb(255, 0, 0)");else for(var e=function(){var e=setInterval((function(){L("rgb(93, 188, 210)"===G?"rgb(255, 255, 255)":"rgb(255, 255, 255)"===G?"#f9c124":"rgb(93, 188, 210)")}),500);return{v:function(){clearInterval(e)}}};0===f;){var t=e();if("object"===typeof t)return t.v}}),[f,G,I]);var Ha=Object(a.useCallback)((function(e,t,n){var a=document.getElementsByClassName("deck-tooltip")[0];if(e){T||(S(!0),document.addEventListener("touchstart",(function(){return a.style.opacity=0})));var r=e.ARREST_DATE,l=e.LAW_CAT_CD,o=e.OFNS_DESC,i=e.PD_DESC,c=e.AGE_GROUP,u=e.PERP_SEX,s=e.PERP_RACE;a.innerHTML="\n<p><strong>Date of Arrest:</strong> ".concat(r,"</p>\n<p><strong>Category:</strong> ").concat("F"===l?"Felony":"M"===l?"Misdemeanor":"Violation","</p>\n<p><strong>Offense:</strong> ").concat(o,"</p>\n<p><strong>Offense Description:</strong> ").concat(i,"</p>\n<p><strong>Perpetrator's Age Group:</strong> ").concat(c,"</p>\n<p><strong>Perpetrator's Sex:</strong> ").concat("M"===u?"Male":"Female","</p>\n<p><strong>Perpetrator's Race:</strong> ").concat(s.toLowerCase().split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "),"</p>\n"),a.style.display="inline-block",a.style.background="#000",a.style.color="rgb(235, 235, 235)",a.style.fontSize="1rem",a.style.overflowWrap="break-word",a.style.lineHeight="1rem",a.style.maxWidth="10rem",a.style.opacity=.9,a.style.left=t+"px",a.style.top=n+"px"}else T&&S(!1),a.style.opacity=0}),[T]),Qa=Object(a.useCallback)((function(t,n,a,r){a?(e(_e(t.data)),e(Ne(t.data))):(r&&e(qe()),e(ye(t.data,n)),e(Ne(t.data)))}),[e]),Ja=Object(a.useCallback)((function(t,n){lt&&(lt.postMessage(t),lt.onmessage=function(t){var a=JSON.parse(t.data),r=JSON.parse(a.data),l=r.chunkArr,o=r.firstMessage,i=r.lastMessage;e(ve(l.length)),Qa({year:a.year,data:l},n,o,i)})}),[Qa,lt,e]);return Object(a.useEffect)((function(){pe&&It&&(qt(Object.values(pe),Object.values(It))||Ua())}),[pe,It,Ua,e,l]),Object(a.useEffect)((function(){if(!ut){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const dataSent = e.data;\n\n        const loadData = dataSent.loadData;\n        const filteredDataChunks = dataSent.filteredDataChunks;\n        const currentFilters = dataSent.currentFilters;\n\n        const filterArrIncluded = (\n          x,\n          filterExactName,\n          filterGeneralName\n        ) => {\n          if (x !== filterExactName) {\n            if (currentFilters[filterGeneralName]) {\n              if (currentFilters[filterGeneralName].length > 0) {\n                return currentFilters[filterGeneralName].includes(x);\n              } else {\n                return true;\n              }\n            } else {\n              return true;\n            }\n          } else {\n            return false;\n          }\n        };\n\n        const dataReducerFunction = (\n          chunk,\n          filterExactName,\n          filterGeneralName\n        ) => {\n          return chunk.reduce((acc, curr) => {\n            const exactName = curr[filterExactName];\n\n            if (filterArrIncluded(exactName, filterGeneralName)) {\n              acc.push(exactName);\n            }\n\n            return acc;\n          }, []);\n        };\n\n        const boroughLoadDataReducerFunction = (\n          chunk,\n          filterExactName\n        ) => {\n          return chunk.reduce((acc, curr) => {\n            const currentName = (x) => {\n              if (\n                x[filterExactName] === "K" &&\n                Number(x.Latitude) > 40.73912\n              ) {\n                return "B";\n              } else if (\n                x[filterExactName] === "M" &&\n                Number(x.Longitude) > -73.920961 &&\n                Number(x.Latitude) < 40.800709\n              ) {\n                return "Q";\n              } else if (\n                x[filterExactName] === "B" &&\n                Number(x.Latitude) < 40.697465\n              ) {\n                return "K";\n              } else if (\n                x[filterExactName] === "Q" &&\n                Number(x.Longitude) < -73.962745\n              ) {\n                return "M";\n              } else if (\n                x[filterExactName] === "Q" &&\n                Number(x.Longitude) < -73.878559 &&\n                Number(x.Latitude) > 40.787907\n              ) {\n                return "B";\n              } else {\n                return x[filterExactName];\n              }\n            };\n\n            const currentPushItem = currentName(curr);\n\n            if (filterArrIncluded(currentPushItem)) {\n              acc.push(currentPushItem);\n            }\n\n            return acc;\n          }, []);\n        };\n\n        const filteredDataChunksReducerFunction = (\n          filterExactName,\n          filterGeneralName\n        ) => {\n          const yearsArr = filteredDataChunks.map((x) => {\n            const date = x[5][filterExactName];\n\n            return Number(date.substring(date.length - 4, date.length));\n          });\n\n          const dateFilterArrIncluded = (item, index, generalName) => {\n            if (item !== filterExactName) {\n              if (currentFilters[generalName]) {\n                if (currentFilters[generalName].length > 0) {\n                  if (\n                    currentFilters[generalName].includes(\n                      yearsArr[index]\n                    )\n                  ) {\n                    return true;\n                  } else {\n                    return false;\n                  }\n                } else {\n                  return true;\n                }\n              } else {\n                return false;\n              }\n            } else {\n              return false;\n            }\n          };\n\n          return filteredDataChunks\n            .map((x, i) => [\n              ...new Set(\n                x.reduce((acc, curr) => {\n                  const exactName = curr[filterExactName];\n\n                  if (filterGeneralName === "category") {\n                    if (\n                      filterArrIncluded(\n                        exactName,\n                        filterExactName,\n                        filterGeneralName\n                      )\n                    ) {\n                      acc.push(exactName);\n                    }\n                  } else {\n                    if (\n                      dateFilterArrIncluded(\n                        exactName,\n                        i,\n                        filterGeneralName\n                      )\n                    ) {\n                      acc.push(exactName);\n                    }\n                  }\n\n                  return acc;\n                }, [])\n              ),\n            ])\n            .flat();\n        };\n\n        postMessage(\n          JSON.stringify({\n            ageGroup: dataReducerFunction(loadData, "AGE_GROUP"),\n            raceArr: dataReducerFunction(loadData, "PERP_RACE"),\n            boroughArr: boroughLoadDataReducerFunction(\n              loadData,\n              "ARREST_BORO"\n            ),\n            offenseDescriptionArr: dataReducerFunction(\n              loadData,\n              "OFNS_DESC"\n            ),\n            filteredArrestCategory: dataReducerFunction(\n              filteredDataChunks[0],\n              "LAW_CAT_CD",\n              "category"\n            ),\n            filteredAgeGroup: dataReducerFunction(\n              filteredDataChunks[0],\n              "AGE_GROUP",\n              "age"\n            ),\n            filteredSexArr: dataReducerFunction(\n              filteredDataChunks[0],\n              "PERP_SEX",\n              "sex"\n            ),\n            filteredRaceArr: dataReducerFunction(\n              filteredDataChunks[0],\n              "PERP_RACE",\n              "race"\n            ),\n            filteredBoroughArr: boroughLoadDataReducerFunction(\n              filteredDataChunks[0],\n              "ARREST_BORO",\n              "borough"\n            ),\n            filteredOffenseDescriptionArr: dataReducerFunction(\n              filteredDataChunks[0],\n              "OFNS_DESC",\n              "offense"\n            ),\n            filteredUniqueCategory: filteredDataChunksReducerFunction(\n              "LAW_CAT_CD",\n              "category"\n            ),\n          })\n        );\n      };'],{type:"application/javascript"})),t=new Worker(e);st(t)}}),[ut]),Object(a.useEffect)((function(){if(!ht){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const dataSent = e.data;\n\n        const chunk = dataSent.chunk;\n\n        const filteredDataChunksReducerFunction = (\n          filterGeneralName,\n          filterExactName\n        ) => {\n          return chunk.map((item) =>\n            item.reduce((acc, curr) => {\n              const formatName = (x) => {\n                return {\n                  date: x["ARREST_DATE"],\n                  [filterGeneralName]:\n                    filterGeneralName === "category"\n                      ? x[filterExactName] === "F"\n                        ? "Felony"\n                        : x[filterExactName] === "M"\n                        ? "Misdemeanor"\n                        : "Violation"\n                      : filterGeneralName === "sex"\n                      ? x[filterExactName] === "F"\n                        ? "Female"\n                        : "Male"\n                      : x[filterExactName],\n                };\n              };\n\n              const notNameMatchFilter = (x) =>\n                x.date !== "ARREST_DATE" &&\n                x[filterGeneralName] !== filterExactName;\n\n              const newPushItem = formatName(curr);\n\n              if (notNameMatchFilter(newPushItem)) {\n                acc.push(newPushItem);\n              }\n\n              return acc;\n            }, [])\n          );\n        };\n\n        postMessage(\n          JSON.stringify({\n            age_group: filteredDataChunksReducerFunction(\n              "age_group",\n              "AGE_GROUP"\n            ),\n            borough: filteredDataChunksReducerFunction(\n              "borough",\n              "ARREST_BORO"\n            ),\n            category: filteredDataChunksReducerFunction(\n              "category",\n              "LAW_CAT_CD"\n            ),\n            sex: filteredDataChunksReducerFunction("sex", "PERP_SEX"),\n            race: filteredDataChunksReducerFunction(\n              "race",\n              "PERP_RACE"\n            ),\n          })\n        );\n      }'],{type:"application/javascript"})),t=new Worker(e);Et(t)}}),[ht]),Object(a.useEffect)((function(){if(!Ot){var e=new Se;vt(e)}}),[Ot]),Object(a.useEffect)((function(){if(!dt){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const hasNumber = (input) => {\n          return /[0-9]/.test(input); \n        };\n\n        const dataSent = e.data;\n\n        const ageGroup = dataSent.ageGroup;\n        const raceArr = dataSent.raceArr;\n        const boroughArr = dataSent.boroughArr;\n        const offenseDescriptionArr = dataSent.offenseDescriptionArr;\n        const filteredAgeGroup = dataSent.filteredAgeGroup;\n        const filteredSexArr = dataSent.filteredSexArr;\n        const filteredRaceArr = dataSent.filteredRaceArr;\n        const filteredBoroughArr = dataSent.filteredBoroughArr;\n        const filteredOffenseDescriptionArr =\n          dataSent.filteredOffenseDescriptionArr;\n\n        const uniqueValuesReducerFunction = (\n          arrName,\n          categoryName,\n          arr\n        ) =>\n          arr\n            ? [...new Set(arr)]\n                .filter((x) => x !== categoryName)\n                .sort((a, b) => {\n                  if (\n                    arrName === "filteredAgeGroupData" ||\n                    arrName === "ageGroupData"\n                  ) {\n                    const first = hasNumber(a)\n                      ? Number(\n                          a.split(a[0] === "<" ? "<" : "-")[\n                            a[0] === "<" ? 1 : 0\n                          ]\n                        )\n                      : null;\n                    const second = hasNumber(b)\n                      ? Number(\n                          b.split(b[0] === "<" ? "<" : "-")[\n                            b[0] === "<" ? 1 : 0\n                          ]\n                        )\n                      : null;\n\n                    return first - second;\n                  } else {\n                    // Sort in increasing order\n                    return a - b;\n                  }\n                })\n            : [];\n\n        postMessage(\n          JSON.stringify({\n            ageGroupData: uniqueValuesReducerFunction(\n              "ageGroupData",\n              "AGE_GROUP",\n              ageGroup\n            ),\n            raceUniqueValues: uniqueValuesReducerFunction(\n              "raceUniqueValues",\n              "PERP_RACE",\n              raceArr\n            ),\n            boroughUniqueValues: uniqueValuesReducerFunction(\n              "boroughUniqueValues",\n              "ARREST_BORO",\n              boroughArr\n            ),\n            offenseDescriptionArr: uniqueValuesReducerFunction(\n              "offenseDescriptionArr",\n              "OFNS_DESC",\n              offenseDescriptionArr\n            ),\n            filteredAgeGroupData: uniqueValuesReducerFunction(\n              "filteredAgeGroupData",\n              "AGE_GROUP",\n              filteredAgeGroup\n            ),\n            filteredSexUniqueValues: uniqueValuesReducerFunction(\n              "filteredSexUniqueValues",\n              "PERP_SEX",\n              filteredSexArr\n            ),\n            filteredRaceUniqueValues: uniqueValuesReducerFunction(\n              "filteredRaceUniqueValues",\n              "PERP_RACE",\n              filteredRaceArr\n            ),\n            filteredBoroughUniqueValues: uniqueValuesReducerFunction(\n              "filteredBoroughUniqueValues",\n              "ARREST_BORO",\n              filteredBoroughArr\n            ),\n            filteredOffenseDescriptionUniqueValues: uniqueValuesReducerFunction(\n              "filteredOffenseDescriptionUniqueValues",\n              "OFNS_DESC",\n              filteredOffenseDescriptionArr\n            ),\n          })\n        );\n      };'],{type:"application/javascript"})),t=new Worker(e);pt(t)}}),[dt]),Object(a.useEffect)((function(){if(!lt){var e=URL.createObjectURL(new Blob(["(",function(){var e="";e=new WebSocket("wss://nypd-arrest-map.herokuapp.com"),onmessage=function(t){var n=t.data;1===e.readyState&&e.send(n),e.onopen=function(){setInterval((function(){e.send(".")}),55e3),e.send(n)},e.onmessage=function(e){var t=e.data;t&&postMessage(JSON.stringify({year:n,data:t}))}}}.toString(),")()"],{type:"application/javascript"})),t=new Worker(e);ot(t)}}),[lt]),Object(a.useEffect)((function(){lt&&(0===t.length?0===tt.length&&(we?Qe&&(nt([2020]),Ja(2020,l.length)):(nt([2020]),Ja(2020,l.length))):tt.length>0&&0===t.length&&(Ja(tt[0],l.length),nt([])))}),[lt,Ja,tt,l.length,Qe,we,t.length,f]),Object(a.useEffect)((function(){f>9e4&&E&&y&&_&&O&&v&&E.length>0&&y.length>0&&_.length>0&&O.length>0&&v.length>0&&(jt||Rt(!0))}),[f,jt,E,y,_,O,v]),r.a.createElement("div",null,r.a.createElement("div",{className:"mobile_landscape_block",style:{display:we?Qe?"none":"flex":"none"}},r.a.createElement(He.a,null),r.a.createElement("p",null,"NYPD Arrest Map is available only for desktop mode or mobile portrait mode.")),0!==Gt.current.length&&E&&0!==E.length&&y&&0!==y.length&&_&&0!==_.length&&O&&0!==O.length&&v&&0!==v.length?null:r.a.createElement(ge,{countUp:Ut,loaderColor:G,mapError:I,applyingFiltersProgressRef:Lt}),q.active&&q.year?r.a.createElement(Ee,{modalActive:q,changeModalActive:z}):null,r.a.createElement(de.a,{className:"nypd_arrest_map_container",style:{opacity:0!==Gt.current.length&&E&&0!==E.length&&y&&0!==y.length&&_&&0!==_.length&&O&&0!==O.length&&v&&0!==v.length?1:0}},r.a.createElement(k,{loadData:t,raceUniqueValues:Sa,boroughUniqueValues:Ga,offenseDescriptionUniqueValues:Ia,ageGroupData:Ca,setFilters:function(t,n,a,r,l,o,i,c){Ot&&(0!==Lt.current&&(Lt.current=0),"trends"===le&&oe("overview"),Mt(""),Tt(!1),e(Ye()),Ot.postMessage({category:t,offense:n,age:a,race:r,sex:l,borough:o,suppliedData:i}),Ot.onmessage=function(i){var u=i.data.assignFilteredData;u&&(e(Oe(u)),be({category:t,offense:n,age:a,race:r,sex:l,borough:o}),c||e(Ae()))},setTimeout((function(){return Xe(!1)}),1e3))},changeLaddaLoading:Xe,laddaLoading:Ze,menuClicked:xt,changeMenuClicked:Tt,collapseOpen:Ft,changeCollapseOpen:Mt,layersRef:Gt,footerMenuActive:ue,isMobileOrTablet:we,isTablet:Ie}),r.a.createElement(u.a,{initialViewState:{longitude:-73.935242,latitude:40.73061,zoom:window.innerWidth<1200?9:11,minZoom:9,pitch:0,bearing:0},ref:Pt,layers:Gt.current,pickingRadius:10,controller:!0,onLoad:function(){return C(!0)},onError:function(){return B(!0)},onHover:function(e){var t=e.object,n=e.x,a=e.y;return Ha(t,n,a)},useDevicePixels:!1},r.a.createElement(s.a,{mapStyle:"mapbox://styles/mapbox/dark-v9",preventStyleDiffing:!0,mapboxApiAccessToken:"pk.eyJ1IjoibGVpZ2hoYWxsaWRheSIsImEiOiJjanVma3E4aGMwZjk0NDVwZzFpcG84M3cwIn0.GrI8s893TPtJfjHzpMMP_A"})),R?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{applyingFiltersProgressRef:Lt}),r.a.createElement(X,{isSame:qt,mapVisible:jt,loadData:t,tooltipVisible:T,filteredArrestCategory:un,filteredAgeGroupData:ia,filteredRaceUniqueValues:ma,filteredSexUniqueValues:ga,filteredBoroughUniqueValues:ya,filteredOffenseDescriptionUniqueValues:Na,filteredUniqueCategory:Fn,filteredAgeGroup:dn,filteredRaceArr:On,filteredSexArr:hn,filteredBoroughArr:jn,filteredOffenseDescriptionArr:xn,usePrevious:wt,currentFilters:pe,filteredTimelineAgeGroupData:Pn,filteredTimelineBoroughData:Un,filteredTimelineCategoryData:Yn,filteredTimelineSexData:Jn,filteredTimelineRaceData:$n,graphOption:le,changeGraphOption:oe,layersRef:Gt,footerMenuActive:ue,changeFooterMenuActive:se,isMobileOrTablet:we,isMediumLaptop:Be})):null))},Je=n(193);n(332).config();var Ke=Object(Je.a)(new function(){return new Worker(n.p+"static/js/store.worker.357f87ca.worker.js")},{loadDataReducer:{data:[]},filteredDataReducer:{changed:!1},filteredDataChunksReducer:{data:[]},newYearFinishedLoadingReducer:{finished:!1},ageFilterReducer:{age:[]},boroughFilterReducer:{borough:[]},categoryFilterReducer:{category:[]},offenseFilterReducer:{offense:[]},raceFilterReducer:{race:[]},sexFilterReducer:{sex:[]},yearFilterReducer:{year:[]},ageTimelineColumnsReducer:{columns:[]},boroughTimelineColumnsReducer:{columns:[]},categoryTimelineColumnsReducer:{columns:[]},raceTimelineColumnsReducer:{columns:[]},sexTimelineColumnsReducer:{columns:[]},ageGroupTimelineGraphDataReducer:{data:[]},boroughTimelineGraphDataReducer:{data:[]},categoryTimelineGraphDataReducer:{data:[]},genderTimelineGraphDataReducer:{data:[]},raceTimelineGraphDataReducer:{data:[]},totalCountReducer:{total:0},applyingFiltersReducer:{filters:!1},trendsAvailableReducer:{available:!1}});o.a.render(r.a.createElement(A.a,{store:Ke},r.a.createElement(Qe,null)),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.8c99169b.chunk.js.map