(this["webpackJsonpnypd-arrest-map"]=this["webpackJsonpnypd-arrest-map"]||[]).push([[0],{141:function(e,t){},205:function(e,t,n){e.exports=n(334)},210:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},265:function(e,t,n){},325:function(e,t,n){},326:function(e,t){},334:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),l=n(55),o=n.n(l),c=(n(210),n(15)),i=n(7),u=n(349),s=n(188),m=n(352),f=(n(212),n(213),n(175)),d=n(110),p=n(40),g=n(81),b=n.n(g),h=n(72),E=n(124),y=n.n(E),_=(n(232),n(233),n(234),n(135)),O=n(176),v=n(109),A=(n(235),n(150),function(e){var t=e.footerMenuActive,n=e.isMobileOrTablet;return r.a.createElement(v.a,{trigger:r.a.createElement("div",{className:"info_circle_container",style:{pointerEvents:n&&t?"none":"all"}},r.a.createElement(d.b,{color:"rgb(255, 255, 255)",style:{opacity:n&&t?.2:1,transition:"opacity 1s ease"},className:"info_button"})),modal:!0},(function(e){return r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"close",onClick:e},"\xd7"),r.a.createElement("div",{className:"header"},"About NYPD Arrest Map"),r.a.createElement("div",{className:"content"},"NYPD Arrest Map is a data visualization and analysis tool that utilizes the"," ",r.a.createElement("a",{href:"https://data.cityofnewyork.us/Public-Safety/NYPD-Arrest-Data-Year-to-Date-/uip8-fykc",target:"_blank",rel:"noopener noreferrer"},"NYPD Arrest Data (Year to Date)")," ","NYC Open Data dataset. This dataset is updated quarterly and reviewed by the Office of Management Analysis and Planning before being posted on the New York Police Department website. The data reflected here will be updated shortly after such changes.",r.a.createElement("br",null),r.a.createElement("br",null),"Occasionally, arrests in the NYPD datasets will be erroneously attributed to one borough, while having the longitude and latitude of another. These have been corrected in the NYPD Arrest Map in favor of the arrest's geocoordinates.",r.a.createElement("br",null),r.a.createElement("br",null),'As stated by the NYPD, "each record represents an arrest effected in NYC by the NYPD and includes information about the type of crime, the location and time of enforcement. In addition, information related to suspect demographics is also included. This data can be used by the public to explore the nature of police enforcement activity."',r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"Have any questions? Comments? Contact me via e-mail or LinkedIn"),r.a.createElement("div",{className:"pop_up_icons_container"},r.a.createElement("a",{href:"https://github.com/amamenko/nypd-arrest-map-full-stack",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(_.a,{color:"#000"})),r.a.createElement("a",{href:"https://www.linkedin.com/in/avraham-mamenko-0599831b8/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(_.b,{color:"#000"})),r.a.createElement("a",{href:"mailto:amamenko@hotmail.com?subject=Comment/Question About NYPD Arrest Map"},r.a.createElement(O.a,{color:"#000"})))))}))}),N=n(13),D=function(e){return{type:"CHANGE_CATEGORY_FILTER",category:e}},R=function(e){return{type:"CHANGE_OFFENSE_FILTER",offense:e}},j=function(e){return{type:"CHANGE_AGE_FILTER",age:e}},C=function(e){return{type:"CHANGE_RACE_FILTER",race:e}},x=function(e){return{type:"CHANGE_SEX_FILTER",sex:e}},T=function(e){return{type:"CHANGE_BOROUGH_FILTER",borough:e}},S=function(e){var t=e.loadData,n=e.raceUniqueValues,l=e.boroughUniqueValues,o=e.ageGroupData,c=e.offenseDescriptionUniqueValues,u=e.setFilters,s=e.changeLaddaLoading,m=e.laddaLoading,g=e.loadedYears,_=e.menuClicked,O=e.changeMenuClicked,v=e.collapseOpen,S=e.changeCollapseOpen,k=e.layersRef,F=e.isMobileOrTablet,M=e.footerMenuActive,G=e.isTablet,L=Object(N.b)(),w=Object(N.c)((function(e){return e.filteredDataChunksReducer.data})),P=Object(N.c)((function(e){return e.totalCountReducer.total})),I=Object(N.c)((function(e){return e.categoryFilterReducer.category})),B=Object(N.c)((function(e){return e.ageFilterReducer.age})),U=Object(N.c)((function(e){return e.yearFilterReducer.year})),V=Object(N.c)((function(e){return e.boroughFilterReducer.borough})),q=Object(N.c)((function(e){return e.sexFilterReducer.sex})),Y=Object(N.c)((function(e){return e.offenseFilterReducer.offense})),W=Object(N.c)((function(e){return e.raceFilterReducer.race})),z=Object(N.c)((function(e){return e.ageTimelineColumnsReducer.columns})),H=Object(N.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),Q=Object(N.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),J=Object(N.c)((function(e){return e.raceTimelineColumnsReducer.columns})),K=Object(N.c)((function(e){return e.sexTimelineColumnsReducer.columns})),Z=Object(a.useRef)(null),X=document.getElementsByClassName("bm-burger-button"),$=document.getElementsByClassName("mapboxgl-ctrl-bottom-left"),ee=document.getElementsByClassName("footer_menu_trigger"),te=document.getElementsByClassName("overview_tooltip"),ne=document.getElementsByClassName("map_details_tooltip_container"),ae=document.getElementsByClassName("overview_tooltip legend_tooltip"),re=Object(a.useState)(!0),le=Object(i.a)(re,2),oe=le[0],ce=le[1],ie=function(e){if(I.includes(e))L(D(I.filter((function(t){return t!==e}))));else{var t=I.slice();t.push(e),L(D(t))}},ue=function(e){if(q.includes(e))L(x(q.filter((function(t){return t!==e}))));else{var t=q.slice();t.push(e),L(x(t))}};return Object(a.useEffect)((function(){F&&M?(X[0].style.opacity=.2,X[0].style.pointerEvents="none",X[0].style.transition="opacity 0.5s ease",te[0]&&ne[0]&&(te[0].style.setProperty("opacity",.4,"important"),te[0].style.setProperty("pointerEvents","none"),te[0].style.setProperty("transition","opacity 0.5s ease"),ne[0].style.setProperty("opacity",.4,"important"),ne[0].style.setProperty("pointerEvents","none"),ne[0].style.setProperty("transition","opacity 0.5s ease"))):(X[0].style.opacity=1,X[0].style.pointerEvents="all",X[0].style.transition="opacity 0.5s ease",te[0]&&ne[0]&&(te[0].style.setProperty("opacity",1,"important"),te[0].style.setProperty("pointerEvents","all"),te[0].style.setProperty("transition","opacity 0.5s ease"),ne[0].style.setProperty("opacity",1,"important"),ne[0].style.setProperty("pointerEvents","all"),ne[0].style.setProperty("transition","opacity 0.5s ease")))}),[M,X,F,ne,te]),Object(a.useEffect)((function(){if(F&&z&&z.length>0&&H&&H.length>0&&Q&&Q.length>0&&J&&J.length>0&&K&&K.length>0){var e=setTimeout((function(){oe&&ce(!1)}),4e3);return function(){clearTimeout(e)}}}),[F,oe,z,H,Q,J,K]),Object(a.useEffect)((function(){oe||(te[0]&&ne[0]&&(te[0].style.setProperty("opacity",1,"important"),ne[0].style.setProperty("opacity",1,"important")),ae[0]&&ae[0].style.setProperty("opacity",1,"important"))}),[oe,te,ne,ae]),Object(a.useEffect)((function(){F||(_?(te[0]&&ne[0]&&(te[0].style.setProperty("opacity",.3,"important"),ne[0].style.setProperty("opacity",.3,"important")),ae[0]&&ae[0].style.setProperty("opacity",.3,"important")):(te[0]&&ne[0]&&(te[0].style.setProperty("opacity",1,"important"),ne[0].style.setProperty("opacity",1,"important")),ae[0]&&ae[0].style.setProperty("opacity",1,"important")))}),[F,ae,_,ne,te]),r.a.createElement("div",{className:"navigation_bar_container"},r.a.createElement(h.a,{content:r.a.createElement("div",{className:"map_details_tooltip_container"},r.a.createElement("div",{className:"overview_tooltip_content",style:{minWidth:Z.current&&Z.current.clientWidth,maxWidth:Z.current&&Z.current.clientWidth}},r.a.createElement("p",{style:{color:"rgb(166, 166, 166)"}},"Data Last Updated: November 5, 2020"),r.a.createElement("p",null,"Showing Arrest Data for"," ",r.a.createElement("strong",null,g.sort().join(", "))),r.a.createElement("p",null,"Total Number of Arrests Shown: ",r.a.createElement("br",null),r.a.createElement("strong",null,w.flat().length.toLocaleString())," ","of ",r.a.createElement("strong",null,P.toLocaleString()))),F?G?null:r.a.createElement("div",{className:"map_legend_container",style:{minWidth:Z.current&&Z.current.clientWidth,maxWidth:Z.current&&Z.current.clientWidth}},r.a.createElement("p",null,"Map Legend"),r.a.createElement("div",{className:"map_legend_items_container"},r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 0, 0)"}),r.a.createElement("p",null,"Felony")),r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 116, 0)"}),r.a.createElement("p",null,"Misdemeanor")),r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 193, 0)"}),r.a.createElement("p",null,"Violation")))):null),visible:k.current.length>0&&!!z&&z.length>0&&!!H&&H.length>0&&!!Q&&Q.length>0&&!!J&&J.length>0&&!!K&&K.length>0,allowHTML:!0,reference:Z.current,className:"overview_tooltip"}),r.a.createElement(h.a,{content:r.a.createElement("div",{className:"map_legend_container",style:{minWidth:Z.current&&Z.current.clientWidth,maxWidth:Z.current&&Z.current.clientWidth}},r.a.createElement("p",null,"Map Legend"),r.a.createElement("div",{className:"map_legend_items_container"},r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 0, 0)"}),r.a.createElement("p",null,"Felony")),r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 116, 0)"}),r.a.createElement("p",null,"Misdemeanor")),r.a.createElement("div",{className:"map_legend_element"},r.a.createElement(p.c,{color:"rgb(255, 193, 0)"}),r.a.createElement("p",null,"Violation")))),visible:F?!!G&&(k.current.length>0&&!!z&&z.length>0&&!!H&&H.length>0&&!!Q&&Q.length>0&&!!J&&J.length>0&&!!K&&K.length>0):k.current.length>0&&!!z&&z.length>0&&!!H&&H.length>0&&!!Q&&Q.length>0&&!!J&&J.length>0&&!!K&&K.length>0,allowHTML:!0,reference:F?G?X[0]:ee[0]:$[0],className:"overview_tooltip legend_tooltip",placement:"top-start"}),r.a.createElement("div",{className:"nypd_arrest_map_logo_container",ref:Z},r.a.createElement("a",{href:"/"},r.a.createElement("p",null,"NYPD"),r.a.createElement("p",null,"Arrest"),r.a.createElement("p",null,"Map"))),r.a.createElement(h.a,{content:F?r.a.createElement("p",{style:{textAlign:"center"}},"Click here ",r.a.createElement("br",null),"to set ",r.a.createElement("br",null),"data filters"):"Click here to set data filters",duration:[null,500],arrow:!0,visible:oe&&!!z&&z.length>0&&!!H&&H.length>0&&!!Q&&Q.length>0&&!!J&&J.length>0&&!!K&&K.length>0,reference:X[0],className:"burger_tooltip",placement:"bottom-end",onClickOutside:function(){return ce(!1)}}),r.a.createElement(A,{footerMenuActive:M,isMobileOrTablet:F}),r.a.createElement(f.slide,{right:!0,className:"navbar_nav_menu",customBurgerIcon:r.a.createElement(d.a,{color:"rgb(93, 188, 210)"}),onOpen:function(){_?O(!1):(O(!0),oe&&ce(!1))},onClose:function(){return O(!1)},isOpen:_},r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Category"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return S("category")},onTriggerClosing:function(){return S("")},open:"category"===v,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:I.includes("F"),onChange:function(){return ie("F")}}),"Felony")),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:I.includes("M"),onChange:function(){return ie("M")}}),"Misdemeanor")),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:I.includes("V"),onChange:function(){return ie("V")}}),"Violation")))),r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Offense"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return S("description")},onTriggerClosing:function(){return S("")},open:"description"===v,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},c&&0!==c.length?c.map((function(e,t){return!e||e.includes("OTHER STATE LAWS")&&e.includes("(")?null:r.a.createElement("p",{key:t},r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:Y.includes(e),onChange:function(){return function(e){if(Y.includes(e))L(R(Y.filter((function(t){return t!==e}))));else{var t=Y.slice();t.push(e),L(R(t))}}(e)}}),e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")))})):null)),r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Age Group"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return S("age")},onTriggerClosing:function(){return S("")},open:"age"===v,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},o?o.map((function(e,t){return r.a.createElement("p",{key:t},r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:B.includes(e),onChange:function(){return function(e){if(B.includes(e))L(j(B.filter((function(t){return t!==e}))));else{var t=B.slice();t.push(e),L(j(t))}}(e)}}),"65"===e?"65+":e))})):null)),r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Race"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return S("race")},onTriggerClosing:function(){return S("")},open:"race"===v,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},n?n.map((function(e,t){return e?r.a.createElement("p",{key:t},r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:W.includes(e),onChange:function(){return function(e){if(W.includes(e))L(C(W.filter((function(t){return t!==e}))));else{var t=W.slice();t.push(e),L(C(t))}}(e)}}),e&&e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/"))):null})):null)),r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Sex"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return S("sex")},onTriggerClosing:function(){return S("")},open:"sex"===v,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:q.includes("F"),onChange:function(){return ue("F")}}),"Female")),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:q.includes("M"),onChange:function(){return ue("M")}}),"Male")))),r.a.createElement(b.a,{trigger:r.a.createElement("div",{className:"nav_item"},r.a.createElement("p",{className:"filter_identifier"},"Filter By Borough"),r.a.createElement(p.d,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return S("borough")},onTriggerClosing:function(){return S("")},open:"borough"===v,className:"nav_item"},r.a.createElement("div",{className:"nav_item_content_container"},l?l.map((function(e,t){return r.a.createElement("p",{key:t},r.a.createElement("label",null,r.a.createElement("input",{name:"my-checkbox",type:"checkbox",checked:V.includes(e),onChange:function(){return function(e){if(V.includes(e))L(T(V.filter((function(t){return t!==e}))));else{var t=V.slice();t.push(e),L(T(t))}}(e)}}),"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"))})):null)),r.a.createElement("span",{className:"spacer"}),r.a.createElement(y.a,{loading:m,className:"apply_filters_button",onClick:function(){s(!0),u(U,I,Y,B,W,q,V,t,!1)},"data-color":"blue","data-size":E.XL,"data-style":E.EXPAND_LEFT,"data-spinner-size":30,"data-spinner-color":"#fff","data-spinner-lines":12},m?"APPLYING FILTERS":"APPLY FILTERS")))},k=n(179),F=n(180),M=n(138),G=n.n(M),L=(n(264),n(265),n(266),n(33)),w=n(34),P=n.n(w),I=function(e){var t=e.filteredArrestCategory,n=e.graphOption;return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===n?"block":"none"}},r.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Category"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(L.a,{chartEvents:[{eventName:"select",callback:function(e){return e.chartWrapper.getChart().setSelection([])}}],chartType:"PieChart",loader:r.a.createElement(P.a,{size:100,color:"rgb(93, 188, 210)"}),data:t?[["Category","Number of Arrests"],["Felony",t.filter((function(e){return"F"===e})).length],["Misdemeanor",t.filter((function(e){return"M"===e})).length],["Violation",t.filter((function(e){return"F"!==e&&"M"!==e})).length]]:[],options:{backgroundColor:"transparent"}})))},B=function(e){var t=e.filteredAgeGroupData,n=e.filteredAgeGroup,a=e.graphOption;return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"}},r.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Age Group"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(L.a,{chartType:"PieChart",chartEvents:[{eventName:"select",callback:function(e){return e.chartWrapper.getChart().setSelection([])}}],loader:r.a.createElement(P.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Age Group","Number of Arrests"]].concat(t.map((function(e){return["65"===e?"65+":e,n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},U=function(e){var t=e.filteredRaceUniqueValues,n=e.filteredRaceArr,a=e.graphOption;return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"}},r.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Race"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(L.a,{chartEvents:[{eventName:"select",callback:function(e){return e.chartWrapper.getChart().setSelection([])}}],chartType:"PieChart",loader:r.a.createElement(P.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Race","Number of Arrests"]].concat(t.map((function(e){return[e?e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/"):null,n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},V=function(e){var t=e.filteredSexUniqueValues,n=e.filteredSexArr,a=e.graphOption;return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"}},r.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Sex"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(L.a,{chartType:"PieChart",chartEvents:[{eventName:"select",callback:function(e){return e.chartWrapper.getChart().setSelection([])}}],loader:r.a.createElement(P.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Sex","Number of Arrests"]].concat(t.map((function(e){return["M"===e?"Male":"Female",n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},q=function(e){var t=e.filteredBoroughUniqueValues,n=e.filteredBoroughArr,a=e.graphOption;return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"}},r.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Borough"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(L.a,{chartType:"PieChart",chartEvents:[{eventName:"select",callback:function(e){return e.chartWrapper.getChart().setSelection([])}}],loader:r.a.createElement(P.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Borough","Number of Arrests"]].concat(t.map((function(e){return["B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown",n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},Y=function(e){var t=e.filteredOffenseDescriptionArr,n=e.filteredOffenseDescriptionUniqueValues,l=e.graphOption,o=e.isSame,c=e.usePrevious,u=e.isMobileOrTablet,s=e.isMediumLaptop,m=Object(a.useState)([]),f=Object(i.a)(m,2),d=f[0],p=f[1],g=c(t),b=c(n);return Object(a.useEffect)((function(){if(t&&t.length>0&&n.length>0&&(t!==g||n!==b)){var e=n.map((function(e){return[e,t.filter((function(t){return t===e})).length]})).sort((function(e,t){return e[1]>t[1]?1:-1}));o(e,d)||p(e)}}),[o,t,n,d,g,b]),r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===l?"block":"none"}},d.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"bottom_info_section_title"},"Top 5 Offenses"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(L.a,{chartType:"BarChart",loader:r.a.createElement(P.a,{size:100,color:"rgb(93, 188, 210)"}),chartEvents:[{eventName:"select",callback:function(e){return e.chartWrapper.getChart().setSelection([])}}],data:[["Offense Description","Number of Arrests"]].concat(d.length>0?d.slice(d.length-5,d.length).sort((function(e,t){return e[1]>t[1]?-1:1})):["UNKNOWN",1]),options:{backgroundColor:"transparent",legend:{position:"none"},width:u?300:s?400:600,bar:u?null:{groupWidth:"95%"},chartArea:u?null:{width:"50%",height:"50%"}}}))):null)},W=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(N.c)((function(e){return e.ageTimelineColumnsReducer.columns}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()}},r.a.createElement("p",{className:"bottom_info_section_title"},"Age Group Trends"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(L.a,{legendToggle:!0,chartType:"LineChart",loader:r.a.createElement(P.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})))},z=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(N.c)((function(e){return e.boroughTimelineColumnsReducer.columns}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()}},r.a.createElement("p",{className:"bottom_info_section_title"},"Borough Trends"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(L.a,{legendToggle:!0,chartType:"LineChart",loader:r.a.createElement(P.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})))},H=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(N.c)((function(e){return e.categoryTimelineColumnsReducer.columns}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()}},r.a.createElement("p",{className:"bottom_info_section_title"},"Category Trends"),r.a.createElement("div",{className:"bottom_info_pie_container category_timeline_container"},r.a.createElement(L.a,{legendToggle:!0,chartType:"LineChart",loader:r.a.createElement(P.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})))},Q=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(N.c)((function(e){return e.sexTimelineColumnsReducer.columns}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()}},r.a.createElement("p",{className:"bottom_info_section_title"},"Gender Trends"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(L.a,{legendToggle:!0,chartType:"LineChart",loader:r.a.createElement(P.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})))},J=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=Object(N.c)((function(e){return e.raceTimelineColumnsReducer.columns}));return r.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()}},r.a.createElement("p",{className:"bottom_info_section_title"},"Race Trends"),r.a.createElement("div",{className:"bottom_info_pie_container"},r.a.createElement(L.a,{legendToggle:!0,chartType:"LineChart",loader:r.a.createElement(P.a,{size:100,color:"rgb(93, 188, 210)"}),data:a,options:{legendToggle:!0,backgroundColor:"transparent",width:t?300:n?400:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})))},K=n(125),Z=function(e){var t=e.tooltipVisible,n=e.filteredAgeGroup,l=e.filteredRaceArr,o=e.filteredSexArr,c=e.filteredBoroughArr,u=e.filteredOffenseDescriptionArr,s=e.filteredArrestCategory,m=e.filteredUniqueCategory,f=e.filteredAgeGroupData,d=e.filteredRaceUniqueValues,g=e.filteredSexUniqueValues,b=e.filteredBoroughUniqueValues,E=e.filteredOffenseDescriptionUniqueValues,y=e.currentFilters,_=e.loadedYears,O=e.isSame,v=e.usePrevious,A=e.graphOption,D=e.changeGraphOption,R=e.layersRef,j=e.isMobileOrTablet,C=e.isMediumLaptop,x=e.footerMenuActive,T=e.changeFooterMenuActive,S=e.filteredTimelineAgeGroupData,M=e.filteredTimelineBoroughData,L=e.filteredTimelineCategoryData,w=e.filteredTimelineSexData,P=e.filteredTimelineRaceData,Z=Object(N.c)((function(e){return e.loadDataChunksReducer.data})),X=Object(N.c)((function(e){return e.trendsAvailableReducer.available})),$=Object(N.c)((function(e){return e.ageTimelineColumnsReducer.columns})),ee=Object(N.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),te=Object(N.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),ne=Object(N.c)((function(e){return e.raceTimelineColumnsReducer.columns})),ae=Object(N.c)((function(e){return e.sexTimelineColumnsReducer.columns})),re=Object(a.useState)(!1),le=Object(i.a)(re,2),oe=le[0],ce=le[1],ie=Object(a.useState)(!j),ue=Object(i.a)(ie,2),se=ue[0],me=ue[1],fe=Object(a.useState)(!0),de=Object(i.a)(fe,2),pe=de[0],ge=de[1],be=Object(a.useRef)(null),he=Object(a.useRef)(null),Ee=document.getElementsByClassName("carousel_right_arrow"),ye=document.getElementsByClassName("alice-carousel"),_e=document.getElementsByClassName("overview_carousel"),Oe=document.getElementsByClassName("trends_carousel"),ve=document.getElementsByClassName("category_timeline_container"),Ae=document.getElementsByClassName("google-visualization-tooltip");Object(a.useEffect)((function(){if("trends"===A){var e=setInterval((function(){var e=Ae[0],t=document.getElementsByTagName("circle");if(e){for(var n=document.getElementsByClassName("alice-carousel__stage-item __active"),a=n[1].getElementsByTagName("path"),r=n[1].getElementsByTagName("text"),l=(a.length-2)/2,o=0;o<l;o++)if("none"===a.item(o).getAttribute("stroke")&&r.item(o).textContent.slice(0,4)===e.lastChild.firstChild.textContent.split(":")[0].slice(0,4)){e.style.display="none";for(var c=0;c<t.length;c++)t[c].style.display="none"}}else for(var i=0;i<t.length;i++)t[i].style.display="block"}),10);return function(){clearInterval(e)}}}),[Ae,A]),Object(a.useEffect)((function(){"overview"===A?he.current&&(he.current.style.display="none"):be.current&&(be.current.style.display="none")}),[A]),Object(a.useEffect)((function(){var e=document.getElementsByClassName("graph_options_container")[0].lastChild.lastChild;e.style.opacity=X?1:.7}),[X]),Object(a.useEffect)((function(){for(var e=0;e<ye.length;e++)0===e?ye[e].className.includes("overview_carousel")||(ye[e].className+=" overview_carousel"):ye[e].className.includes("trends_carousel")||(ye[e].className+=" trends_carousel")}),[ye]),Object(a.useEffect)((function(){"overview"===A?(_e[0].style.opacity=1,_e[0].style.zIndex=1,Oe[0].style.opacity=0,Oe[0].style.zIndex=-1):(_e[0].style.opacity=0,_e[0].style.opacity=-1,Oe[0].style.opacity=1,Oe[0].style.zIndex=1)}),[A,_e,Oe]);return r.a.createElement("div",{className:"bottom_info_panel_container",style:{zIndex:j?t?-1:10:t?-1:0,transform:j?x?"translate3d(0, 0, 0)":"translate3d(0, 100%, 0)":"none"}},r.a.createElement("div",{className:"shadow_overlay",onClick:function(){return T(!1)},style:{opacity:x?1:0,display:x?"block":"none"}}," "),r.a.createElement("div",{className:"footer_menu_trigger",onClick:function(){x?T(!1):(T(!0),oe||(setTimeout((function(){me(!0)}),1800),ce(!0)))}},x?r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,null)," BACK TO ARREST MAP"):r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null)," VIEW GRAPHS AND TRENDS")),r.a.createElement("div",{className:"bottom_info_main_info_box"},r.a.createElement("div",{className:"filters_applied"},r.a.createElement("h2",null,"Filters Applied"),0!==y.year.length&&!O(_,Object.keys(Z[0]))||0!==y.category.length||0!==y.offense.length||0!==y.age.length||0!==y.race.length||0!==y.sex.length||0!==y.borough.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,0===y.year.length||y.year.length===_.length?null:1===y.year.length?"Year: ":"Years: "),0===y.year.length||y.year.length===_.length?null:y.year.join(", ")),r.a.createElement("p",null,r.a.createElement("strong",null,0===y.category.length?null:"Categor"+(y.category.length>1?"ies: ":"y: ")),0===y.category.length?null:y.category.map((function(e){return"F"===e?"Felony":"M"===e?"Misdemeanor":"Violation"})).join(", ")),r.a.createElement("p",null,r.a.createElement("strong",null,0===y.offense.length?null:"Offense"+(1===y.offense.length?": ":"s: ")),0===y.offense.length?null:y.offense.join(", ")),r.a.createElement("p",null,r.a.createElement("strong",null,0===y.age.length?null:"Age"+(1===y.age.length?": ":"s: ")),0===y.age.length?null:y.age.map((function(e){return"65"===e?"65+":e})).join(", ")),r.a.createElement("p",null,r.a.createElement("strong",null,0===y.race.length?null:"Race"+(1===y.race.length?": ":"s: ")),0===y.race.length?null:y.race.join(", ")),r.a.createElement("p",null,r.a.createElement("strong",null,0===y.sex.length?null:"Sex: "),0===y.sex.length?null:y.sex.map((function(e){return"M"===e?"Male":"Female"})).join(", ")),r.a.createElement("p",null,r.a.createElement("strong",null,0===y.borough.length?null:"Borough"+(1===y.borough.length?": ":"s: ")),0===y.borough.length?null:y.borough.map((function(e){return"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"})).join(", "))):r.a.createElement("p",{className:"no_filters_applied_statement"},"No filters currently applied")),r.a.createElement("div",{className:"graph_options_container"},r.a.createElement("p",null,"Graph Options"),r.a.createElement(K.RadioGroup,{onChange:function(e){return D(e)},horizontal:!0,value:A},r.a.createElement(K.RadioButton,{rootColor:"rgb(140, 140, 140)",pointColor:"rgb(0, 0, 128)",value:"overview"},"Overview"),r.a.createElement(K.RadioButton,{rootColor:"rgb(140, 140, 140)",pointColor:"rgb(0, 0, 128)",value:"trends",disabled:!X,disabledColor:"rgb(211, 211, 211)"},"Trends")))),r.a.createElement("div",{className:"carousel_container",onTouchStart:function(){"trends"===A&&(pe&&ge(!1),se&&me(!1))}},r.a.createElement(h.a,{content:"Click the left and right arrows to view more graphs",visible:j?x&&se&&R.current.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0&&!!ae&&ae.length>0:se&&R.current.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0&&!!ae&&ae.length>0,reference:Ee[0],className:"burger_tooltip",placement:"left",onClickOutside:function(){return me(!1)}}),r.a.createElement(p.a,{color:"rgb(0, 0, 0)",className:"carousel_left_arrow",onClick:function(){be.slidePrev(),he.slidePrev(),se&&me(!1)}}),r.a.createElement(G.a,{ref:function(e){return be=e},autoPlay:!1,fadeOutAnimation:!0,dotsDisabled:!0,buttonsDisabled:!0,mouseTrackingEnabled:!0,playButtonEnabled:!1,disableAutoPlayOnAction:!1,responsive:{0:{items:1},760:{items:2},1600:{items:3}},preservePosition:!0,items:[r.a.createElement(I,{key:"overview",filteredArrestCategory:s,graphOption:A}),r.a.createElement(B,{key:"overview",filteredAgeGroup:n,filteredAgeGroupData:f,graphOption:A}),r.a.createElement(U,{key:"overview",filteredRaceUniqueValues:d,filteredRaceArr:l,graphOption:A}),r.a.createElement(V,{key:"overview",filteredSexUniqueValues:g,filteredSexArr:o,graphOption:A}),r.a.createElement(q,{key:"overview",filteredBoroughUniqueValues:b,filteredBoroughArr:c,graphOption:A}),r.a.createElement(Y,{key:"overview",filteredOffenseDescriptionArr:u,filteredOffenseDescriptionUniqueValues:E,graphOption:A,isSame:O,usePrevious:v,isMobileOrTablet:j,isMediumLaptop:C})]}),r.a.createElement(h.a,{content:j?null:"Scroll to zoom in and out of trend graphs",visible:!j&&("trends"===A&&pe),reference:ve.length>2?ve[1]:ve[0],className:"burger_tooltip trend_tooltip",placement:"top",onClickOutside:function(){return ge(!1)}}),r.a.createElement(h.a,{content:"Toggle data lines by selecting legend items",visible:"trends"===A&&pe,reference:ve.length>2?ve[1]:ve[0],className:"burger_tooltip trend_tooltip",placement:j?"left":"right",offset:j?[-30,-180]:[0,50],onClickOutside:function(){return ge(!1)}}),r.a.createElement(G.a,{ref:function(e){return he=e},autoPlay:!1,dotsDisabled:!0,buttonsDisabled:!0,mouseTrackingEnabled:!1,playButtonEnabled:!1,disableAutoPlayOnAction:!1,touchMoveDefaultEvents:!1,responsive:{0:{items:1},760:{items:2},1600:{items:3}},preservePosition:!0,items:[r.a.createElement(H,{key:"trends",filteredTimelineCategoryData:L,filteredArrestCategory:s,filteredUniqueCategory:m,isMobileOrTablet:j,isMediumLaptop:C}),r.a.createElement(W,{key:"trends",filteredAgeGroupData:f,filteredTimelineAgeGroupData:S,isMobileOrTablet:j,isMediumLaptop:C}),r.a.createElement(z,{key:"trends",filteredBoroughUniqueValues:b,filteredTimelineBoroughData:M,isMobileOrTablet:j,isMediumLaptop:C}),r.a.createElement(J,{key:"trends",filteredRaceUniqueValues:d,filteredTimelineRaceData:P,isMobileOrTablet:j,isMediumLaptop:C}),r.a.createElement(Q,{key:"trends",filteredSexUniqueValues:g,filteredTimelineSexData:w,isMobileOrTablet:j,isMediumLaptop:C})]}),r.a.createElement(p.b,{color:"rgb(0, 0, 0)",className:"carousel_right_arrow",onClick:function(){be.slideNext(),he.slideNext(),se&&me(!1)}})))},X=n(126),$=n.n(X),ee=n(181),te=n.n(ee),ne={2006:371932,2007:403229,2008:401526,2009:421314,2010:422320,2011:412856,2012:396278,2013:393807,2014:387725,2015:339468,2016:314862,2017:286223,2018:246772,2019:214616,2020:103375},ae=n(182),re=n(111),le=n(89),oe=n(114),ce=n(112),ie=n.n(ce),ue=n(184),se=n.n(ue),me=n(83),fe=(n(132),n(113));function de(){var e=Object(re.a)(["\n    display: block;\n    margin: 0 auto;\n  "]);return de=function(){return e},e}var pe=function(e){var t=e.countUp,n=e.loaderColor,a=e.mapError,l=e.applyingFiltersProgressRef,o=Object(me.css)(de()),c=Object(N.c)((function(e){return e.filteredDataChunksReducer.data})),i=Object(N.c)((function(e){return e.totalCountReducer.total}));return r.a.createElement(fe.a,{className:"loading_container"},0===i?r.a.createElement(ie.a,{css:o,size:50,color:n,style:{transition:"all 0.5s ease"},loading:""===c||"object"===typeof c&&c.flat().length<9e4}):t>95?r.a.createElement(se.a,{css:o,size:200,color:"rgb(93, 188, 210)",style:{transition:"all 0.5s ease"},loading:t>95}):r.a.createElement(le.a,{value:t,styles:Object(le.b)({strokeLinecap:"butt",trailColor:"#eee"})},r.a.createElement(oe.a,{color:"#fff",size:"4rem"}),r.a.createElement("div",{style:{fontSize:30,marginTop:20,color:"#fff"}},r.a.createElement("strong",null,t,"%"))),r.a.createElement("p",null,a?"Error Initializing NYPD Arrest Map":0===i?"Initializing NYPD Arrest Map":t>95?"Analyzing Arrest Data (".concat(l.current,"% Done)"):"Loading Most Recent Arrest Data"))},ge=n(115),be=n.n(ge),he=function(e){var t=e.modalActive,n=e.changeModalActive,l=e.loadedYears,o=Object(N.c)((function(e){return e.loadDataChunksReducer.data})),c=Object(N.c)((function(e){return e.filteredDataChunksReducer.data})),u=Object(a.useState)(0),s=Object(i.a)(u,2),m=s[0],f=s[1];return Object(a.useEffect)((function(){if(o[0][t.year.toString()]){var e=100*Number(o[0][t.year.toString()].map((function(e){return e.length})).reduce((function(e,t){return e+t}),0)/ne[t.year.toString()]).toFixed(1);100===m&&c.length===l.length?n({active:!1,year:null}):e&&e!==m&&f(e)}}),[o,t.year,n,m,c.length,l.length]),r.a.createElement(be.a,{isOpen:t.active,style:{content:{position:"fixed",zIndex:1e4,opacity:.99,height:"100%",backdropFilter:"blur(5px)",WebkitBackdropFilter:"blur(5px)",paddingBottom:"10%",borderRadius:"none",width:"100vw",top:"0",left:"0",right:"0",bottom:"0",border:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)"}}},r.a.createElement(le.a,{value:m,styles:Object(le.b)({strokeLinecap:"butt",trailColor:"#eee"})},r.a.createElement(oe.a,{color:"#fff",size:"4rem"}),r.a.createElement("div",{style:{fontSize:30,marginTop:20,color:"#fff"}},r.a.createElement("strong",null,m,"%"))),r.a.createElement("p",null,"Loading ",t.year," Arrest Data"))},Ee=function(e,t){return{type:"LOAD_DATA_CHUNKS_ADD_TO_YEAR",data:e,year:t}},ye=function(e,t){return{type:"LOAD_DATA_CHUNKS_ADD_YEAR",data:e,year:t}},_e=function(e,t){return{type:"FILTERED_DATA_CHUNKS_ADD_TO_YEAR",data:e,dataIndex:t}},Oe=function(e){return{type:"FILTERED_DATA_CHUNKS_ADD_YEAR",data:e}},ve=function(e){return{type:"ASSIGN_FILTERED_DATA_CHUNKS",data:e}},Ae=function(e){return{type:"INCREMENT_TOTAL_COUNT",dataLength:e}},Ne=function(e){return{type:"ASSIGN_LOAD_DATA",data:e}},De=function(e){return{type:"ASSIGN_FILTERED_DATA",data:e}},Re=function(){return{type:"FILTERED_DATA_CHANGED"}},je=function(){return{type:"FILTERED_DATA_CHANGED_RESET"}},Ce=function(e){return{type:"TIMELINE_AGE_GROUP_GRAPH_DATA",data:e}},xe=function(e){return{type:"TIMELINE_BOROUGH_GRAPH_DATA",data:e}},Te=function(e){return{type:"TIMELINE_CATEGORY_GRAPH_DATA",data:e}},Se=function(e){return{type:"TIMELINE_GENDER_GRAPH_DATA",data:e}},ke=function(e){return{type:"TIMELINE_RACE_GRAPH_DATA",data:e}},Fe=function(){return new Worker(n.p+"static/js/setFilterAndTimelineGraphWorkers.ef31545b.worker.js")},Me=function(e){return{type:"AGE_TIMELINE_COLUMNS",columns:e}},Ge=function(e){return{type:"BOROUGH_TIMELINE_COLUMNS",columns:e}},Le=function(e){return{type:"CATEGORY_TIMELINE_COLUMNS",columns:e}},we=function(e){return{type:"SEX_TIMELINE_COLUMNS",columns:e}},Pe=function(e){return{type:"RACE_TIMELINE_COLUMNS",columns:e}},Ie=function(e){return{type:"CHANGE_YEAR_FILTER",year:e}},Be=function(){return{type:"APPLYING_FILTERS"}},Ue=function(){return{type:"APPLYING_FILTERS_RESET"}};n(325);function Ve(){var e=Object(re.a)(["\n    display: block;\n    margin: 0 auto;\n  "]);return Ve=function(){return e},e}var qe=function(e){var t=e.applyingFiltersProgressRef,n=Object(a.useRef)(null),l=Object(me.css)(Ve()),o=Object(N.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(a.useEffect)((function(){n&&n.current&&(o?n.current.open():n.current.close())}),[o]),r.a.createElement(v.a,{className:"applying_filters",ref:n,modal:!0,closeOnDocumentClick:!1,closeOnEscape:!1},r.a.createElement("div",{className:"applying_filters_modal"},r.a.createElement(ie.a,{css:l,size:40,color:"rgb(0, 109, 129)",style:{transition:"all 0.5s ease"},loading:!0}),r.a.createElement("p",null,"Applying Filters (",t.current,"% Done)")))},Ye=function(){return{type:"NEW_YEAR_FINISHED_LOADING_RESET"}},We=function(){return{type:"NEW_YEAR_FINISHED_LOADING"}},ze=function(){return{type:"TRENDS_AVAILABLE"}},He=function(){return{type:"TRENDS_NOT_AVAILABLE"}},Qe=n(100),Je=n(187);$.a.extend(te.a);var Ke=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.loadDataReducer.data})),n=Object(N.c)((function(e){return e.filteredDataReducer.data})),l=Object(N.c)((function(e){return e.filteredDataReducer.changed})),o=Object(N.c)((function(e){return e.filteredDataChunksReducer.data})),f=Object(N.c)((function(e){return e.newYearFinishedLoadingReducer.finished})),d=Object(N.c)((function(e){return e.loadDataChunksReducer.data})),p=Object(N.c)((function(e){return e.totalCountReducer.total})),g=Object(N.c)((function(e){return e.ageGroupTimelineGraphDataReducer.data})),b=Object(N.c)((function(e){return e.boroughTimelineGraphDataReducer.data})),h=Object(N.c)((function(e){return e.categoryTimelineGraphDataReducer.data})),E=Object(N.c)((function(e){return e.genderTimelineGraphDataReducer.data})),y=Object(N.c)((function(e){return e.raceTimelineGraphDataReducer.data})),_=Object(N.c)((function(e){return e.ageTimelineColumnsReducer.columns})),O=Object(N.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),v=Object(N.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),A=Object(N.c)((function(e){return e.raceTimelineColumnsReducer.columns})),k=Object(N.c)((function(e){return e.sexTimelineColumnsReducer.columns})),F=Object(a.useState)(!1),M=Object(i.a)(F,2),G=M[0],L=M[1],w=Object(a.useState)(!1),P=Object(i.a)(w,2),I=P[0],B=P[1],U=Object(a.useState)("rgb(93, 188, 210)"),V=Object(i.a)(U,2),q=V[0],Y=V[1],W=Object(a.useState)(!1),z=Object(i.a)(W,2),H=z[0],Q=z[1],J=Object(a.useState)({active:!1,year:null}),K=Object(i.a)(J,2),X=K[0],ee=K[1],te=Object(a.useState)(!1),re=Object(i.a)(te,2),le=re[0],oe=re[1],ce=Object(a.useState)(!1),ie=Object(i.a)(ce,2),ue=ie[0],se=ie[1],me=Object(a.useState)("overview"),de=Object(i.a)(me,2),ge=de[0],Ve=de[1],Ke=Object(a.useState)(!1),Ze=Object(i.a)(Ke,2),Xe=Ze[0],$e=Ze[1],et=Object(a.useState)({year:[],category:[],offense:[],age:[],race:[],sex:[],borough:[]}),tt=Object(i.a)(et,2),nt=tt[0],at=tt[1],rt=Object(Qe.useMediaQuery)({maxWidth:1224}),lt=Object(Qe.useMediaQuery)({minWidth:768}),ot=Object(Qe.useMediaQuery)({maxWidth:1440}),ct=Object(Qe.useMediaQuery)({orientation:"portrait"}),it=Object(a.useState)(!1),ut=Object(i.a)(it,2),st=ut[0],mt=ut[1],ft=Object(a.useState)([]),dt=Object(i.a)(ft,2),pt=dt[0],gt=dt[1],bt=Object(a.useState)(""),ht=Object(i.a)(bt,2),Et=ht[0],yt=ht[1],_t=Object(a.useState)(""),Ot=Object(i.a)(_t,2),vt=Ot[0],At=Ot[1],Nt=Object(a.useState)(""),Dt=Object(i.a)(Nt,2),Rt=Dt[0],jt=Dt[1],Ct=Object(a.useState)(""),xt=Object(i.a)(Ct,2),Tt=xt[0],St=xt[1],kt=Object(a.useState)(""),Ft=Object(i.a)(kt,2),Mt=Ft[0],Gt=Ft[1],Lt=Object(a.useState)(!1),wt=Object(i.a)(Lt,2),Pt=wt[0],It=wt[1],Bt=Object(a.useState)(!1),Ut=Object(i.a)(Bt,2),Vt=Ut[0],qt=Ut[1],Yt=Object(a.useState)(""),Wt=Object(i.a)(Yt,2),zt=Wt[0],Ht=Wt[1],Qt=Object(a.useRef)([]),Jt=Object(a.useRef)(0),Kt=Object(a.useRef)(null);Object(a.useEffect)((function(){be.a.setAppElement("body")}),[]);var Zt=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current},Xt=Zt(nt),$t=d[0]?Object.keys(d[0]).map((function(e){return Number(e)})):[],en=Object(ae.useCountUp)({start:0,end:d[0]&&d[0][2020]?100*Number((d[0][2020].map((function(e){return e.length})).reduce((function(e,t){return e+t}),0)/ne[2020]).toFixed(1)):0,delay:0,duration:1}),tn=en.countUp,nn=en.update;Object(a.useEffect)((function(){if(d[0]&&d[0][2020]){var e=100*Number((d[0][2020].map((function(e){return e.length})).reduce((function(e,t){return e+t}),0)/ne[2020]).toFixed(1));nn(e>=60?100:e)}}),[nn,tn,d]);var an=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},rn=Object(a.useState)([]),ln=Object(i.a)(rn,2),on=ln[0],cn=ln[1],un=Object(a.useState)([]),sn=Object(i.a)(un,2),mn=sn[0],fn=sn[1],dn=Object(a.useState)([]),pn=Object(i.a)(dn,2),gn=pn[0],bn=pn[1],hn=Object(a.useState)([]),En=Object(i.a)(hn,2),yn=En[0],_n=En[1],On=Object(a.useState)([]),vn=Object(i.a)(On,2),An=vn[0],Nn=vn[1],Dn=Object(a.useState)([]),Rn=Object(i.a)(Dn,2),jn=Rn[0],Cn=Rn[1],xn=Object(a.useState)([]),Tn=Object(i.a)(xn,2),Sn=Tn[0],kn=Tn[1],Fn=Object(a.useState)([]),Mn=Object(i.a)(Fn,2),Gn=Mn[0],Ln=Mn[1],wn=Object(a.useState)([]),Pn=Object(i.a)(wn,2),In=Pn[0],Bn=Pn[1],Un=Object(a.useState)([]),Vn=Object(i.a)(Un,2),qn=Vn[0],Yn=Vn[1],Wn=Object(a.useState)([]),zn=Object(i.a)(Wn,2),Hn=zn[0],Qn=zn[1],Jn=Object(a.useState)([]),Kn=Object(i.a)(Jn,2),Zn=Kn[0],Xn=Kn[1],$n=Object(a.useState)([]),ea=Object(i.a)($n,2),ta=ea[0],na=ea[1],aa=Object(a.useState)([]),ra=Object(i.a)(aa,2),la=ra[0],oa=ra[1],ca=Object(a.useState)([]),ia=Object(i.a)(ca,2),ua=ia[0],sa=ia[1],ma=Object(a.useState)([]),fa=Object(i.a)(ma,2),da=fa[0],pa=fa[1],ga=Object(a.useCallback)((function(t,n,a,r,l){Mt&&(Mt.postMessage({ageObj:t,raceObj:n,categoryObj:a,sexObj:r,boroughObj:l}),Mt.onmessage=function(t){Jt.current+=25;var n=t.data.ageGroupTimelineGraphData,a=t.data.raceTimelineGraphData,r=t.data.categoryTimelineGraphData,l=t.data.genderTimelineGraphData,o=t.data.boroughTimelineGraphData;e(Ce(n)),e(xe(o)),e(Te(r)),e(Se(l)),e(ke(a)),e(Ue())})}),[Mt,e]),ba=Object(a.useCallback)((function(e,t,n,a,r,l,o,c,i){Rt&&(Rt.postMessage({ageGroup:e,raceArr:t,boroughArr:n,offenseDescriptionArr:a,filteredAgeGroup:r,filteredSexArr:l,filteredRaceArr:o,filteredBoroughArr:c,filteredOffenseDescriptionArr:i}),Rt.onmessage=function(e){Jt.current+=25;var t=JSON.parse(e.data),n=t.ageGroupData,a=t.raceUniqueValues,r=t.boroughUniqueValues,l=t.offenseDescriptionArr,o=t.filteredAgeGroupData,c=t.filteredSexUniqueValues,i=t.filteredRaceUniqueValues,u=t.filteredBoroughUniqueValues,s=t.filteredOffenseDescriptionUniqueValues;va(o),Ra(i),Ta(c),Ma(u),Pa(s),Va(n),za(a),Ka(r),er(l),se(!0)})}),[Rt]),ha=Object(a.useCallback)((function(e,t,n,a){vt&&(vt.postMessage({loadData:e,filteredData:t,filteredDataChunks:n,currentFilters:a}),vt.onmessage=function(e){Jt.current+=25;var t=JSON.parse(e.data),n=t.ageGroup,a=t.raceArr,r=t.boroughArr,l=t.offenseDescriptionArr,o=t.filteredArrestCategory,c=t.filteredAgeGroup,i=t.filteredSexArr,u=t.filteredRaceArr,s=t.filteredBoroughArr,m=t.filteredOffenseDescriptionArr,f=t.filteredUniqueCategory;ba(n,a,r,l,c,i,u,s,m),cn(n),fn(a),bn(r),_n(l),Nn(o),Cn(c),kn(i),Ln(u),Bn(s),Yn(m),Qn(f)})}),[vt,ba]),Ea=Object(a.useCallback)((function(e){Tt&&(Tt.postMessage({chunk:e}),Tt.onmessage=function(e){Jt.current+=25;var t=JSON.parse(e.data),n=t.age_group,a=t.borough,r=t.category,l=t.sex,o=t.race;Xn(n),na(a),oa(r),sa(l),pa(o)})}),[Tt]),ya=Object(a.useState)([]),_a=Object(i.a)(ya,2),Oa=_a[0],va=_a[1],Aa=Object(a.useState)([]),Na=Object(i.a)(Aa,2),Da=Na[0],Ra=Na[1],ja=Object(a.useState)([]),Ca=Object(i.a)(ja,2),xa=Ca[0],Ta=Ca[1],Sa=Object(a.useState)([]),ka=Object(i.a)(Sa,2),Fa=ka[0],Ma=ka[1],Ga=Object(a.useState)([]),La=Object(i.a)(Ga,2),wa=La[0],Pa=La[1],Ia=Object(a.useState)([]),Ba=Object(i.a)(Ia,2),Ua=Ba[0],Va=Ba[1],qa=Object(a.useState)([]),Ya=Object(i.a)(qa,2),Wa=Ya[0],za=Ya[1],Ha=Object(a.useState)([]),Qa=Object(i.a)(Ha,2),Ja=Qa[0],Ka=Qa[1],Za=Object(a.useState)([]),Xa=Object(i.a)(Za,2),$a=Xa[0],er=Xa[1];Object(a.useEffect)((function(){ue&&(se(!1),ga({unique:Oa,data:Zn},{unique:Da,data:da},{unique:Hn,data:la},{unique:xa,data:ua},{unique:Fa,data:ta}))}),[h.length,Oa,Fa,Da,xa,Zn,ta,la,da,ua,Hn,ga,ue]);var tr=Object(a.useCallback)((function(){0!==Jt.current&&(Jt.current=0);var e=o.map((function(e){return Number($()(e[5].ARREST_DATE,"MM/DD/YYYY").format("YYYY"))}));Qt.current=o.map((function(t,n){var a=$()(t[5].ARREST_DATE,"MM/DD/YYYY").format("YYYY");return new m.a({id:"chunk-".concat(n),data:t,visible:e.flat().includes(Number(a)),filled:!0,radiusMinPixels:2,getPosition:function(e){return[Number(e.Longitude),Number(e.Latitude)]},getFillColor:function(e){return"F"===e.LAW_CAT_CD?[255,0,0]:"M"===e.LAW_CAT_CD?[255,116,0]:[255,193,0]},pickable:!0,useDevicePixels:!1,parameters:{depthTest:!1,depthRange:[0,1]}})}))}),[o]);Object(a.useEffect)((function(){var n=$t.map((function(e){return ne[e]})).reduce((function(e,t){return e+t}),0);f&&(e(Ye()),p===n&&t.length===n&&(1===$t.length?e(De(t)):e(De("loadData")),e(Re())))}),[f,t,e,$t,p]),Object(a.useEffect)((function(){l||le&&oe(!1)}),[l,le]),Object(a.useEffect)((function(){var a=$t.map((function(e){return ne[e]})).reduce((function(e,t){return e+t}),0);p>0&&p===a&&l&&(le||(tr(),ha(t,n,o,nt),Ea(o),e(je())),oe(!0))}),[t,le,nt,l,tr,on,gn,jn,In,n,qn,Gn,Sn,yn,ha,mn,e,o,Ea,Hn,la,$t,p]);var nr=Zt(g),ar=Zt(b),rr=Zt(h),lr=Zt(E),or=Zt(y);Object(a.useEffect)((function(){if(g!==nr&&g.length>0&&Oa.length===g[0].length-1&&e(Me([[{type:"date",label:"Date"}].concat(Oa.map((function(e){return"65"===e?"65+":e})))].concat(g))),b!==ar&&b.length>0&&Fa.length===b[0].length-1&&e(Ge([[{type:"date",label:"Date"}].concat(Fa.map((function(e){return"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"})))].concat(b))),h!==rr&&h.length>0&&Hn.length>0){var t=Object(c.a)(new Set(Hn.map((function(e){return"F"===e?"Felony":"M"===e?"Misdemeanor":"Violation"}))));t.length===h[0].length-1&&e(Le([[{type:"date",label:"Date"}].concat(t)].concat(h)))}if(E!==lr&&E.length>0){var n=xa.map((function(e){return"F"===e?"Female":"Male"}));n.length===E[0].length-1&&e(we([[{type:"date",label:"Date"}].concat(n)].concat(E)))}if(y!==or&&y.length>0){var a=Da.map((function(e){return e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")}));a.length===y[0].length-1&&e(Pe([[{type:"date",label:"Date"}].concat(a)].concat(y))),e(ze())}}),[g,b,h,e,Oa,E,nr,ar,rr,lr,or,y,Fa,Hn,Da,xa]),Object(a.useEffect)((function(){if(H)Y("rgb(255, 0, 0)");else for(var e=function(){var e=setInterval((function(){Y("rgb(93, 188, 210)"===q?"rgb(255, 255, 255)":"rgb(255, 255, 255)"===q?"#f9c124":"rgb(93, 188, 210)")}),500);return{v:function(){clearInterval(e)}}};0===p;){var t=e();if("object"===typeof t)return t.v}}),[p,q,H]);var cr=Object(a.useCallback)((function(e,t,n){var a=document.getElementsByClassName("deck-tooltip")[0];if(e){I||(B(!0),document.addEventListener("touchstart",(function(){return a.style.opacity=0})));var r=e.ARREST_DATE,l=e.LAW_CAT_CD,o=e.OFNS_DESC,c=e.PD_DESC,i=e.AGE_GROUP,u=e.PERP_SEX,s=e.PERP_RACE;a.innerHTML="\n<p><strong>Date of Arrest:</strong> ".concat(r,"</p>\n<p><strong>Category:</strong> ").concat("F"===l?"Felony":"M"===l?"Misdemeanor":"Violation","</p>\n<p><strong>Offense:</strong> ").concat(o,"</p>\n<p><strong>Offense Description:</strong> ").concat(c,"</p>\n<p><strong>Perpetrator's Age Group:</strong> ").concat(i,"</p>\n<p><strong>Perpetrator's Sex:</strong> ").concat("M"===u?"Male":"Female","</p>\n<p><strong>Perpetrator's Race:</strong> ").concat(s.toLowerCase().split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "),"</p>\n"),a.style.display="inline-block",a.style.background="#000",a.style.color="rgb(235, 235, 235)",a.style.fontSize="1rem",a.style.overflowWrap="break-word",a.style.lineHeight="1rem",a.style.maxWidth="10rem",a.style.opacity=.9,a.style.left=t+"px",a.style.top=n+"px"}else I&&B(!1),a.style.opacity=0}),[I]),ir=Object(a.useCallback)((function(t,n,a,r){var l=t.year;a?(e(ye(t.data,l)),e(Oe(t.data)),e(Ne(t.data))):(r&&e(We()),e(Ee(t.data,l)),e(_e(t.data,n)),e(Ne(t.data)))}),[e]),ur=Object(a.useCallback)((function(t,n){Et&&(Et.postMessage(t),Et.onmessage=function(t){var a=JSON.parse(t.data),r=JSON.parse(a.data),l=r.chunkArr,o=r.firstMessage,c=r.lastMessage;e(Ae(l.length)),ir({year:a.year,data:l},n,o,c)})}),[ir,Et,e]),sr=function(t,n,a,r,l,o,c,i,u){Mt&&(0!==Jt.current&&(Jt.current=0),"trends"===ge&&Ve("overview"),Ht(""),qt(!1),e(He()),Mt.postMessage({year:t,category:n,offense:a,age:r,race:l,sex:o,borough:c,suppliedData:i}),u||e(Be()),Mt.onmessage=function(i){var s=i.data.assignFilteredData,m=i.data.assignFilteredDataFlat;s&&m&&(e(ve(s)),e(De(m)),at({year:t,category:n,offense:a,age:r,race:l,sex:o,borough:c}),u||e(Re()))},setTimeout((function(){return mt(!1)}),1e3))};Object(a.useEffect)((function(){nt&&Xt&&(an(Object.values(nt),Object.values(Xt))||tr())}),[nt,Xt,tr,e,o]);return Object(a.useEffect)((function(){if(!vt){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const dataSent = e.data;\n\n        const loadData = dataSent.loadData;\n        const filteredData = dataSent.filteredData;\n        const filteredDataChunks = dataSent.filteredDataChunks;\n        const currentFilters = dataSent.currentFilters;\n\n        const filterArrIncluded = (\n          x,\n          filterExactName,\n          filterGeneralName\n        ) => {\n          if (x !== filterExactName) {\n            if (currentFilters[filterGeneralName]) {\n              if (currentFilters[filterGeneralName].length > 0) {\n                return currentFilters[filterGeneralName].includes(x);\n              } else {\n                return true;\n              }\n            } else {\n              return true;\n            }\n          } else {\n            return false;\n          }\n        };\n\n        const dataReducerFunction = (\n          chunk,\n          filterExactName,\n          filterGeneralName\n        ) => {\n          return chunk.reduce((acc, curr) => {\n            const exactName = curr[filterExactName];\n\n            if (filterArrIncluded(exactName, filterGeneralName)) {\n              acc.push(exactName);\n            }\n\n            return acc;\n          }, []);\n        };\n\n        const boroughLoadDataReducerFunction = (\n          chunk,\n          filterExactName\n        ) => {\n          return chunk.reduce((acc, curr) => {\n            const currentName = (x) => {\n              if (\n                x[filterExactName] === "K" &&\n                Number(x.Latitude) > 40.73912\n              ) {\n                return "B";\n              } else if (\n                x[filterExactName] === "M" &&\n                Number(x.Longitude) > -73.920961 &&\n                Number(x.Latitude) < 40.800709\n              ) {\n                return "Q";\n              } else if (\n                x[filterExactName] === "B" &&\n                Number(x.Latitude) < 40.697465\n              ) {\n                return "K";\n              } else if (\n                x[filterExactName] === "Q" &&\n                Number(x.Longitude) < -73.962745\n              ) {\n                return "M";\n              } else if (\n                x[filterExactName] === "Q" &&\n                Number(x.Longitude) < -73.878559 &&\n                Number(x.Latitude) > 40.787907\n              ) {\n                return "B";\n              } else {\n                return x[filterExactName];\n              }\n            };\n\n            const currentPushItem = currentName(curr);\n\n            if (filterArrIncluded(currentPushItem)) {\n              acc.push(currentPushItem);\n            }\n\n            return acc;\n          }, []);\n        };\n\n        const filteredDataChunksReducerFunction = (\n          filterExactName,\n          filterGeneralName\n        ) => {\n          const yearsArr = filteredDataChunks.map((x) => {\n            const date = x[5][filterExactName];\n\n            return Number(date.substring(date.length - 4, date.length));\n          });\n\n          const dateFilterArrIncluded = (item, index, generalName) => {\n            if (item !== filterExactName) {\n              if (currentFilters[generalName]) {\n                if (currentFilters[generalName].length > 0) {\n                  if (\n                    currentFilters[generalName].includes(\n                      yearsArr[index]\n                    )\n                  ) {\n                    return true;\n                  } else {\n                    return false;\n                  }\n                } else {\n                  return true;\n                }\n              } else {\n                return false;\n              }\n            } else {\n              return false;\n            }\n          };\n\n          return filteredDataChunks\n            .map((x, i) => [\n              ...new Set(\n                x.reduce((acc, curr) => {\n                  const exactName = curr[filterExactName];\n\n                  if (filterGeneralName === "category") {\n                    if (\n                      filterArrIncluded(\n                        exactName,\n                        filterExactName,\n                        filterGeneralName\n                      )\n                    ) {\n                      acc.push(exactName);\n                    }\n                  } else {\n                    if (\n                      dateFilterArrIncluded(\n                        exactName,\n                        i,\n                        filterGeneralName\n                      )\n                    ) {\n                      acc.push(exactName);\n                    }\n                  }\n\n                  return acc;\n                }, [])\n              ),\n            ])\n            .flat();\n        };\n\n        postMessage(\n          JSON.stringify({\n            ageGroup: dataReducerFunction(loadData, "AGE_GROUP"),\n            raceArr: dataReducerFunction(loadData, "PERP_RACE"),\n            boroughArr: boroughLoadDataReducerFunction(\n              loadData,\n              "ARREST_BORO"\n            ),\n            offenseDescriptionArr: dataReducerFunction(\n              loadData,\n              "OFNS_DESC"\n            ),\n            filteredArrestCategory: dataReducerFunction(\n              filteredData,\n              "LAW_CAT_CD",\n              "category"\n            ),\n            filteredAgeGroup: dataReducerFunction(\n              filteredData,\n              "AGE_GROUP",\n              "age"\n            ),\n            filteredSexArr: dataReducerFunction(\n              filteredData,\n              "PERP_SEX",\n              "sex"\n            ),\n            filteredRaceArr: dataReducerFunction(\n              filteredData,\n              "PERP_RACE",\n              "race"\n            ),\n            filteredBoroughArr: boroughLoadDataReducerFunction(\n              filteredData,\n              "ARREST_BORO",\n              "borough"\n            ),\n            filteredOffenseDescriptionArr: dataReducerFunction(\n              filteredData,\n              "OFNS_DESC",\n              "offense"\n            ),\n            filteredUniqueCategory: filteredDataChunksReducerFunction(\n              "LAW_CAT_CD",\n              "category"\n            ),\n          })\n        );\n      };'],{type:"application/javascript"})),t=new Worker(e);At(t)}}),[vt]),Object(a.useEffect)((function(){if(!Tt){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const dataSent = e.data;\n\n        const chunk = dataSent.chunk;\n\n        const filteredDataChunksReducerFunction = (\n          filterGeneralName,\n          filterExactName\n        ) => {\n          return chunk.map((item) =>\n            item.reduce((acc, curr) => {\n              const formatName = (x) => {\n                return {\n                  date: x["ARREST_DATE"],\n                  [filterGeneralName]:\n                    filterGeneralName === "category"\n                      ? x[filterExactName] === "F"\n                        ? "Felony"\n                        : x[filterExactName] === "M"\n                        ? "Misdemeanor"\n                        : "Violation"\n                      : filterGeneralName === "sex"\n                      ? x[filterExactName] === "F"\n                        ? "Female"\n                        : "Male"\n                      : x[filterExactName],\n                };\n              };\n\n              const notNameMatchFilter = (x) =>\n                x.date !== "ARREST_DATE" &&\n                x[filterGeneralName] !== filterExactName;\n\n              const newPushItem = formatName(curr);\n\n              if (notNameMatchFilter(newPushItem)) {\n                acc.push(newPushItem);\n              }\n\n              return acc;\n            }, [])\n          );\n        };\n\n        postMessage(\n          JSON.stringify({\n            age_group: filteredDataChunksReducerFunction(\n              "age_group",\n              "AGE_GROUP"\n            ),\n            borough: filteredDataChunksReducerFunction(\n              "borough",\n              "ARREST_BORO"\n            ),\n            category: filteredDataChunksReducerFunction(\n              "category",\n              "LAW_CAT_CD"\n            ),\n            sex: filteredDataChunksReducerFunction("sex", "PERP_SEX"),\n            race: filteredDataChunksReducerFunction(\n              "race",\n              "PERP_RACE"\n            ),\n          })\n        );\n      }'],{type:"application/javascript"})),t=new Worker(e);St(t)}}),[Tt]),Object(a.useEffect)((function(){if(!Mt){var e=new Fe;Gt(e)}}),[Mt]),Object(a.useEffect)((function(){if(!Rt){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const hasNumber = (input) => {\n          return /[0-9]/.test(input); \n        };\n\n        const dataSent = e.data;\n\n        const ageGroup = dataSent.ageGroup;\n        const raceArr = dataSent.raceArr;\n        const boroughArr = dataSent.boroughArr;\n        const offenseDescriptionArr = dataSent.offenseDescriptionArr;\n        const filteredAgeGroup = dataSent.filteredAgeGroup;\n        const filteredSexArr = dataSent.filteredSexArr;\n        const filteredRaceArr = dataSent.filteredRaceArr;\n        const filteredBoroughArr = dataSent.filteredBoroughArr;\n        const filteredOffenseDescriptionArr =\n          dataSent.filteredOffenseDescriptionArr;\n\n        const uniqueValuesReducerFunction = (\n          arrName,\n          categoryName,\n          arr\n        ) =>\n          arr\n            ? [...new Set(arr)]\n                .filter((x) => x !== categoryName)\n                .sort((a, b) => {\n                  if (\n                    arrName === "filteredAgeGroupData" ||\n                    arrName === "ageGroupData"\n                  ) {\n                    const first = hasNumber(a)\n                      ? Number(\n                          a.split(a[0] === "<" ? "<" : "-")[\n                            a[0] === "<" ? 1 : 0\n                          ]\n                        )\n                      : null;\n                    const second = hasNumber(b)\n                      ? Number(\n                          b.split(b[0] === "<" ? "<" : "-")[\n                            b[0] === "<" ? 1 : 0\n                          ]\n                        )\n                      : null;\n\n                    return first - second;\n                  } else {\n                    // Sort in increasing order\n                    return a - b;\n                  }\n                })\n            : [];\n\n        postMessage(\n          JSON.stringify({\n            ageGroupData: uniqueValuesReducerFunction(\n              "ageGroupData",\n              "AGE_GROUP",\n              ageGroup\n            ),\n            raceUniqueValues: uniqueValuesReducerFunction(\n              "raceUniqueValues",\n              "PERP_RACE",\n              raceArr\n            ),\n            boroughUniqueValues: uniqueValuesReducerFunction(\n              "boroughUniqueValues",\n              "ARREST_BORO",\n              boroughArr\n            ),\n            offenseDescriptionArr: uniqueValuesReducerFunction(\n              "offenseDescriptionArr",\n              "OFNS_DESC",\n              offenseDescriptionArr\n            ),\n            filteredAgeGroupData: uniqueValuesReducerFunction(\n              "filteredAgeGroupData",\n              "AGE_GROUP",\n              filteredAgeGroup\n            ),\n            filteredSexUniqueValues: uniqueValuesReducerFunction(\n              "filteredSexUniqueValues",\n              "PERP_SEX",\n              filteredSexArr\n            ),\n            filteredRaceUniqueValues: uniqueValuesReducerFunction(\n              "filteredRaceUniqueValues",\n              "PERP_RACE",\n              filteredRaceArr\n            ),\n            filteredBoroughUniqueValues: uniqueValuesReducerFunction(\n              "filteredBoroughUniqueValues",\n              "ARREST_BORO",\n              filteredBoroughArr\n            ),\n            filteredOffenseDescriptionUniqueValues: uniqueValuesReducerFunction(\n              "filteredOffenseDescriptionUniqueValues",\n              "OFNS_DESC",\n              filteredOffenseDescriptionArr\n            ),\n          })\n        );\n      };'],{type:"application/javascript"})),t=new Worker(e);jt(t)}}),[Rt]),Object(a.useEffect)((function(){if(!Et){var e=URL.createObjectURL(new Blob(["(",function(){var e="";e=new WebSocket("wss://nypd-arrest-map.herokuapp.com"),onmessage=function(t){var n=t.data;1===e.readyState&&e.send(n),e.onopen=function(){setInterval((function(){e.send(".")}),55e3),e.send(n)},e.onmessage=function(e){var t=e.data;t&&postMessage(JSON.stringify({year:n,data:t}))}}}.toString(),")()"],{type:"application/javascript"})),t=new Worker(e);yt(t)}}),[Et]),Object(a.useEffect)((function(){Et&&($t.includes(2020)?pt.length>0&&!d[0][pt[0]]&&(ur(pt[0],o.length),gt([])):0===pt.length&&(rt?ct&&(gt([2020]),ur(2020,o.length)):(gt([2020]),ur(2020,o.length))))}),[Et,ur,$t,pt,d,o.length,ct,rt]),Object(a.useEffect)((function(){p>9e4&&_&&O&&v&&A&&k&&_.length>0&&O.length>0&&v.length>0&&A.length>0&&k.length>0&&(Pt||It(!0))}),[p,Pt,_,O,v,A,k]),r.a.createElement("div",null,r.a.createElement("div",{className:"mobile_landscape_block",style:{display:rt?ct?"none":"flex":"none"}},r.a.createElement(Je.a,null),r.a.createElement("p",null,"NYPD Arrest Map is available only for desktop mode or mobile portrait mode.")),0!==Qt.current.length&&_&&0!==_.length&&O&&0!==O.length&&v&&0!==v.length&&A&&0!==A.length&&k&&0!==k.length?null:r.a.createElement(pe,{countUp:tn,loaderColor:q,mapError:H,applyingFiltersProgressRef:Jt}),X.active&&X.year?r.a.createElement(he,{modalActive:X,changeModalActive:ee,loadedYears:$t}):null,r.a.createElement(fe.a,{className:"nypd_arrest_map_container",style:{opacity:0!==Qt.current.length&&_&&0!==_.length&&O&&0!==O.length&&v&&0!==v.length&&A&&0!==A.length&&k&&0!==k.length?1:0}},r.a.createElement(S,{loadData:t,raceUniqueValues:Wa,boroughUniqueValues:Ja,offenseDescriptionUniqueValues:$a,ageGroupData:Ua,setFilters:sr,loadedYears:$t,changeLaddaLoading:mt,laddaLoading:st,handleDownloadYear:function(n){var a=[].concat(Object(c.a)($t),[n]);"trends"===ge&&Ve("overview"),e(Ie(a)),e(D([])),e(R([])),e(C([])),e(j([])),e(x([])),e(T([])),e(He()),sr(a,[],[],[],[],[],[],t,!0),ee({active:!0,year:n}),gt([n]),Ht(""),qt(!1)},menuClicked:Vt,changeMenuClicked:qt,collapseOpen:zt,changeCollapseOpen:Ht,layersRef:Qt,footerMenuActive:Xe,isMobileOrTablet:rt,isTablet:lt}),r.a.createElement(u.a,{initialViewState:{longitude:-73.935242,latitude:40.73061,zoom:window.innerWidth<1200?9:11,minZoom:9,pitch:0,bearing:0},ref:Kt,layers:Qt.current,pickingRadius:10,controller:!0,onLoad:function(){return L(!0)},onError:function(){return Q(!0)},onHover:function(e){var t=e.object,n=e.x,a=e.y;return cr(t,n,a)},useDevicePixels:!1},r.a.createElement(s.a,{mapStyle:"mapbox://styles/mapbox/dark-v9",preventStyleDiffing:!0,mapboxApiAccessToken:"pk.eyJ1IjoibGVpZ2hoYWxsaWRheSIsImEiOiJjanVma3E4aGMwZjk0NDVwZzFpcG84M3cwIn0.GrI8s893TPtJfjHzpMMP_A"})),G?r.a.createElement(r.a.Fragment,null,r.a.createElement(qe,{applyingFiltersProgressRef:Jt}),r.a.createElement(Z,{isSame:an,mapVisible:Pt,loadData:t,tooltipVisible:I,filteredArrestCategory:An,filteredAgeGroupData:Oa,filteredRaceUniqueValues:Da,filteredSexUniqueValues:xa,filteredBoroughUniqueValues:Fa,filteredOffenseDescriptionUniqueValues:wa,filteredUniqueCategory:Hn,filteredAgeGroup:jn,filteredRaceArr:Gn,filteredSexArr:Sn,filteredBoroughArr:In,filteredOffenseDescriptionArr:qn,loadedYears:$t,usePrevious:Zt,currentFilters:nt,filteredTimelineAgeGroupData:Zn,filteredTimelineBoroughData:ta,filteredTimelineCategoryData:la,filteredTimelineSexData:ua,filteredTimelineRaceData:da,graphOption:ge,changeGraphOption:Ve,layersRef:Qt,footerMenuActive:Xe,changeFooterMenuActive:$e,isMobileOrTablet:rt,isMediumLaptop:ot})):null))},Ze=n(192);n(331).config();var Xe=Object(Ze.a)(new function(){return new Worker(n.p+"static/js/store.worker.134e029a.worker.js")},{loadDataChunksReducer:{data:[{}]},loadDataReducer:{data:[]},filteredDataReducer:{data:[],changed:!1},filteredDataChunksReducer:{data:[]},newYearFinishedLoadingReducer:{finished:!1},ageFilterReducer:{age:[]},boroughFilterReducer:{borough:[]},categoryFilterReducer:{category:[]},offenseFilterReducer:{offense:[]},raceFilterReducer:{race:[]},sexFilterReducer:{sex:[]},yearFilterReducer:{year:[]},ageTimelineColumnsReducer:{columns:[]},boroughTimelineColumnsReducer:{columns:[]},categoryTimelineColumnsReducer:{columns:[]},raceTimelineColumnsReducer:{columns:[]},sexTimelineColumnsReducer:{columns:[]},ageGroupTimelineGraphDataReducer:{data:[]},boroughTimelineGraphDataReducer:{data:[]},categoryTimelineGraphDataReducer:{data:[]},genderTimelineGraphDataReducer:{data:[]},raceTimelineGraphDataReducer:{data:[]},totalCountReducer:{total:0},applyingFiltersReducer:{filters:!1},trendsAvailableReducer:{available:!1}});o.a.render(r.a.createElement(N.a,{store:Xe},r.a.createElement(Ke,null)),document.getElementById("root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.5f9dfe3b.chunk.js.map