(this["webpackJsonpnypd-arrest-map"]=this["webpackJsonpnypd-arrest-map"]||[]).push([[0],{154:function(e,t){},220:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},281:function(e,t,n){},343:function(e,t,n){},344:function(e,t){},352:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(2),i=n(59),c=n.n(i),o=(n(220),n(202)),s=n(15),l=n(367),u=n(197),d=n(370),f=(n(222),n(223),n(186)),b=n(122),p=n(42),j={2006:371932,2007:403229,2008:401526,2009:421314,2010:422320,2011:412856,2012:396278,2013:393807,2014:387725,2015:339468,2016:314862,2017:286223,2018:246772,2019:214616,2020:103376,lastUpdatedDate:"November 5, 2020"},g=n(86),m=n.n(g),h=n(77),O=n(87),x=n.n(O),y=(n(242),n(243),n(244),n(146)),_=n(187),v=n(121),N=(n(245),n(163),function(e){var t=e.footerMenuActive,n=e.isMobileOrTablet;return Object(r.jsx)(v.a,{trigger:Object(r.jsx)("div",{className:"info_circle_container",style:{pointerEvents:n&&t?"none":"all"},children:Object(r.jsx)(b.b,{color:"rgb(255, 255, 255)",style:{opacity:t?.2:1,transition:"opacity 1s ease"},className:"info_button"})}),modal:!0,children:function(e){return Object(r.jsxs)("div",{className:"modal",children:[Object(r.jsx)("button",{className:"close",onClick:e,children:"\xd7"}),Object(r.jsx)("div",{className:"header",children:"About NYPD Arrest Map"}),Object(r.jsxs)("div",{className:"content",children:["NYPD Arrest Map is a data visualization and analysis tool that utilizes the"," ",Object(r.jsx)("a",{href:"https://data.cityofnewyork.us/Public-Safety/NYPD-Arrest-Data-Year-to-Date-/uip8-fykc",target:"_blank",rel:"noopener noreferrer",children:"NYPD Arrest Data (Year to Date)"})," ","NYC Open Data dataset. This dataset is updated quarterly and reviewed by the Office of Management Analysis and Planning before being posted on the New York Police Department website. The data reflected here will be updated shortly after such changes.",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),"Occasionally, arrests in the NYPD datasets will be erroneously attributed to one borough, while having the longitude and latitude of another. These have been corrected in the NYPD Arrest Map in favor of the arrest's geocoordinates.",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),'As stated by the NYPD, "each record represents an arrest effected in NYC by the NYPD and includes information about the type of crime, the location and time of enforcement. In addition, information related to suspect demographics is also included. This data can be used by the public to explore the nature of police enforcement activity."',Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:"Have any questions? Comments? Contact me via e-mail or LinkedIn"}),Object(r.jsxs)("div",{className:"pop_up_icons_container",children:[Object(r.jsx)("a",{href:"https://github.com/amamenko/nypd-arrest-map-full-stack",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)(y.a,{color:"#000"})}),Object(r.jsx)("a",{href:"https://www.linkedin.com/in/avraham-mamenko-0599831b8/",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)(y.b,{color:"#000"})}),Object(r.jsx)("a",{href:"mailto:amamenko@hotmail.com?subject=Comment/Question About NYPD Arrest Map",children:Object(r.jsx)(_.a,{color:"#000"})})]})]})]})}})}),A=n(14),R=function(e){return{type:"CHANGE_CATEGORY_FILTER",category:e}},C=function(e){return{type:"CHANGE_OFFENSE_FILTER",offense:e}},E=function(e){return{type:"CHANGE_AGE_FILTER",age:e}},D=function(e){return{type:"CHANGE_RACE_FILTER",race:e}},T=function(e){return{type:"CHANGE_SEX_FILTER",sex:e}},S=function(e){return{type:"CHANGE_BOROUGH_FILTER",borough:e}},k=function(){return{type:"APPLYING_FILTERS"}},F=function(){return{type:"RESET_FILTERS"}},M=function(e){var t=e.loadData,n=e.raceUniqueValues,i=e.boroughUniqueValues,c=e.ageGroupData,o=e.offenseDescriptionUniqueValues,l=e.setFilters,u=e.changeLaddaLoading,d=e.laddaLoading,g=e.resetLaddaLoading,y=e.changeResetLaddaLoading,_=e.menuClicked,v=e.changeMenuClicked,M=e.collapseOpen,L=e.changeCollapseOpen,w=e.layersRef,P=e.isMobileOrTablet,G=e.footerMenuActive,I=e.isTablet,B=e.currentFilters,U=e.isSame,V=Object(A.b)(),q=Object(A.c)((function(e){return e.applyingFiltersReducer.filters})),Y=Object(A.c)((function(e){return e.filteredDataChunksReducer.data})),z=Object(A.c)((function(e){return e.totalCountReducer.total})),W=Object(A.c)((function(e){return e.categoryFilterReducer.category})),H=Object(A.c)((function(e){return e.ageFilterReducer.age})),Q=Object(A.c)((function(e){return e.boroughFilterReducer.borough})),J=Object(A.c)((function(e){return e.sexFilterReducer.sex})),K=Object(A.c)((function(e){return e.offenseFilterReducer.offense})),X=Object(A.c)((function(e){return e.raceFilterReducer.race})),Z=Object(A.c)((function(e){return e.resetFiltersReducer.reset})),$=Object(A.c)((function(e){return e.ageTimelineColumnsReducer.columns})),ee=Object(A.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),te=Object(A.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),ne=Object(A.c)((function(e){return e.raceTimelineColumnsReducer.columns})),re=Object(A.c)((function(e){return e.sexTimelineColumnsReducer.columns})),ae=Object(a.useRef)(null),ie=document.getElementsByClassName("bm-burger-button"),ce=document.getElementsByClassName("mapboxgl-ctrl-bottom-left"),oe=document.getElementsByClassName("footer_menu_trigger"),se=document.getElementsByClassName("overview_tooltip"),le=document.getElementsByClassName("map_details_tooltip_container"),ue=document.getElementsByClassName("overview_tooltip legend_tooltip"),de=document.getElementsByClassName("reset_filters_button"),fe=document.getElementsByClassName("apply_filters_button"),be=Object(a.useState)(!0),pe=Object(s.a)(be,2),je=pe[0],ge=pe[1],me=function(e){if(W.includes(e))V(R(W.filter((function(t){return t!==e}))));else{var t=W.slice();t.push(e),V(R(t))}},he=function(e){if(J.includes(e))V(T(J.filter((function(t){return t!==e}))));else{var t=J.slice();t.push(e),V(T(t))}};Object(a.useEffect)((function(){G?(ie[0].style.opacity=.2,ie[0].style.pointerEvents="none",ie[0].style.transition="opacity 0.5s ease",se[0]&&le[0]&&(se[0].style.setProperty("opacity",.4,"important"),se[0].style.setProperty("pointerEvents","none"),se[0].style.setProperty("transition","opacity 0.5s ease"),le[0].style.setProperty("opacity",.4,"important"),le[0].style.setProperty("pointerEvents","none"),le[0].style.setProperty("transition","opacity 0.5s ease")),ue[0]&&(ue[0].style.setProperty("opacity",.4,"important"),ue[0].style.setProperty("pointerEvents","none"),ue[0].style.setProperty("transition","opacity 0.5s ease"))):(ie[0].style.opacity=1,ie[0].style.pointerEvents="all",ie[0].style.transition="opacity 0.5s ease",se[0]&&le[0]&&(se[0].style.setProperty("opacity",1,"important"),se[0].style.setProperty("pointerEvents","all"),se[0].style.setProperty("transition","opacity 0.5s ease"),le[0].style.setProperty("opacity",1,"important"),le[0].style.setProperty("pointerEvents","all"),le[0].style.setProperty("transition","opacity 0.5s ease")),ue[0]&&(ue[0].style.setProperty("opacity",1,"important"),ue[0].style.setProperty("pointerEvents","all"),ue[0].style.setProperty("transition","opacity 0.5s ease")))}),[G,ie,P,le,se,ue]),Object(a.useEffect)((function(){if(P&&$&&$.length>0&&ee&&ee.length>0&&te&&te.length>0&&ne&&ne.length>0&&re&&re.length>0){var e=setTimeout((function(){je&&ge(!1)}),4e3);return function(){clearTimeout(e)}}}),[P,je,$,ee,te,ne,re]),Object(a.useEffect)((function(){je||(se[0]&&le[0]&&(se[0].style.setProperty("opacity",1,"important"),le[0].style.setProperty("opacity",1,"important")),ue[0]&&ue[0].style.setProperty("opacity",1,"important"))}),[je,se,le,ue]),Object(a.useEffect)((function(){P||(_?(se[0]&&le[0]&&(se[0].style.setProperty("opacity",.3,"important"),le[0].style.setProperty("opacity",.3,"important")),ue[0]&&ue[0].style.setProperty("opacity",.3,"important")):(se[0]&&le[0]&&(se[0].style.setProperty("opacity",1,"important"),le[0].style.setProperty("opacity",1,"important")),ue[0]&&ue[0].style.setProperty("opacity",1,"important")))}),[P,ue,_,le,se]),Object(a.useEffect)((function(){if(!_){var e=document.getElementsByClassName("bm-menu"),t=document.getElementsByClassName("nav_item_content_container");setTimeout((function(){e[0]&&(e[0].scrollTop=0);for(var n=0;n<t.length;n++)t[n].scrollTop=0}),800),""!==M&&L("")}}),[_,M,L]),Object(a.useEffect)((function(){0===B.category.length&&0===B.offense.length&&0===B.age.length&&0===B.race.length&&0===B.sex.length&&0===B.borough.length?de[0]&&(de[0].style.opacity=.4,de[0].style.pointerEvents="none"):de[0]&&(de[0].style.opacity=1,de[0].style.pointerEvents="auto")}),[B.age.length,B.borough.length,B.category.length,B.offense.length,B.race.length,B.sex.length,de]),Object(a.useEffect)((function(){U(B.category,W)&&U(B.offense,K)&&U(B.age,H)&&U(B.race,X)&&U(B.sex,J)&&U(B.borough,Q)?fe[0]&&(fe[0].style.opacity=.4,fe[0].style.pointerEvents="none"):fe[0]&&(fe[0].style.opacity=1,fe[0].style.pointerEvents="auto")}),[B.age,B.borough,B.category,B.offense,B.race,B.sex,H,Q,W,K,X,J,fe,U]);return Object(r.jsxs)("div",{className:"navigation_bar_container",children:[Object(r.jsx)(h.a,{content:Object(r.jsxs)("div",{className:"map_details_tooltip_container",children:[Object(r.jsxs)("div",{className:"overview_tooltip_content",placement:"bottom-start",style:{minWidth:ae.current&&ae.current.clientWidth,maxWidth:ae.current&&ae.current.clientWidth},children:[Object(r.jsxs)("p",{style:{color:"rgb(166, 166, 166)"},children:["Data Last Updated: ",Object(r.jsx)("br",{}),j.lastUpdatedDate]}),Object(r.jsxs)("p",{children:["Total Number of Arrests Shown: ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:Y.flat().length.toLocaleString()})," ","of ",Object(r.jsx)("strong",{children:z.toLocaleString()})]})]}),P?I?null:Object(r.jsxs)("div",{className:"map_legend_container",style:{minWidth:ae.current&&ae.current.clientWidth,maxWidth:ae.current&&ae.current.clientWidth},children:[Object(r.jsx)("p",{children:"Map Legend"}),Object(r.jsxs)("div",{className:"map_legend_items_container",children:[Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 0, 0)"}),Object(r.jsx)("p",{children:"Felony"})]}),Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 116, 0)"}),Object(r.jsx)("p",{children:"Misdemeanor"})]}),Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 193, 0)"}),Object(r.jsx)("p",{children:"Violation"})]})]})]}):null]}),visible:w.current.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0&&!!re&&re.length>0,allowHTML:!0,reference:ae.current,className:"overview_tooltip"}),Object(r.jsx)(h.a,{content:Object(r.jsxs)("div",{className:"map_legend_container",style:{minWidth:ae.current&&ae.current.clientWidth,maxWidth:ae.current&&ae.current.clientWidth},children:[Object(r.jsx)("p",{children:"Map Legend"}),Object(r.jsxs)("div",{className:"map_legend_items_container",children:[Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 0, 0)"}),Object(r.jsx)("p",{children:"Felony"})]}),Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 116, 0)"}),Object(r.jsx)("p",{children:"Misdemeanor"})]}),Object(r.jsxs)("div",{className:"map_legend_element",children:[Object(r.jsx)(p.c,{color:"rgb(255, 193, 0)"}),Object(r.jsx)("p",{children:"Violation"})]})]})]}),visible:P?!!I&&(w.current.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0&&!!re&&re.length>0):w.current.length>0&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0&&!!re&&re.length>0,allowHTML:!0,reference:P?I?ie[0]:oe[0]:ce[0],className:"overview_tooltip legend_tooltip",placement:"top-start"}),Object(r.jsx)("div",{className:"nypd_arrest_map_logo_container",ref:ae,children:Object(r.jsxs)("a",{href:"/",children:[Object(r.jsx)("p",{children:"NYPD"}),Object(r.jsx)("p",{children:"Arrest"}),Object(r.jsx)("p",{children:"Map"})]})}),Object(r.jsx)(h.a,{content:P?Object(r.jsxs)("p",{style:{textAlign:"center"},children:["Click here ",Object(r.jsx)("br",{}),"to set ",Object(r.jsx)("br",{}),"data filters"]}):"Click here to set data filters",duration:[null,500],arrow:!0,visible:je&&!!$&&$.length>0&&!!ee&&ee.length>0&&!!te&&te.length>0&&!!ne&&ne.length>0&&!!re&&re.length>0,reference:ie[0],className:"burger_tooltip",placement:"bottom-end",onClickOutside:function(){return ge(!1)}}),Object(r.jsx)(N,{footerMenuActive:G,isMobileOrTablet:P}),Object(r.jsxs)(f.slide,{right:!0,className:"navbar_nav_menu",customBurgerIcon:Object(r.jsx)(b.a,{color:"rgb(93, 188, 210)"}),onOpen:function(){_?v(!1):(v(!0),je&&ge(!1))},onClose:function(){return v(!1)},isOpen:_,children:[Object(r.jsx)(m.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Category"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return L("category")},onTriggerClosing:function(){return L("")},open:"category"===M,className:"nav_item",children:Object(r.jsxs)("div",{className:"nav_item_content_container",children:[Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:W.includes("F"),onChange:function(){return me("F")}}),"Felony"]})}),Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:W.includes("M"),onChange:function(){return me("M")}}),"Misdemeanor"]})}),Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:W.includes("V"),onChange:function(){return me("V")}}),"Violation"]})})]})}),Object(r.jsx)(m.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Offense"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return L("description")},onTriggerClosing:function(){return L("")},onClose:function(){var e=document.getElementsByClassName("nav_item_content_container");setTimeout((function(){for(var t=0;t<e.length;t++)e[t].scrollTop=0}),800)},open:"description"===M,className:"nav_item",children:Object(r.jsx)("div",{className:"nav_item_content_container",children:o&&0!==o.length?o.sort().map((function(e,t){return!e||e.includes("OTHER STATE LAWS")&&e.includes("(")?null:Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:K.includes(e),onChange:function(){return function(e){if(K.includes(e))V(C(K.filter((function(t){return t!==e}))));else{var t=K.slice();t.push(e),V(C(t))}}(e)}}),e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")]})},t)})):null})}),Object(r.jsx)(m.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Age Group"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return L("age")},onTriggerClosing:function(){return L("")},open:"age"===M,className:"nav_item",children:Object(r.jsx)("div",{className:"nav_item_content_container",children:c?c.sort((function(e,t){return e.localeCompare(t)})).map((function(e,t){return Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:H.includes(e),onChange:function(){return function(e){if(H.includes(e))V(E(H.filter((function(t){return t!==e}))));else{var t=H.slice();t.push(e),V(E(t))}}(e)}}),"65"===e?"65+":e]})},t)})):null})}),Object(r.jsx)(m.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Race"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return L("race")},onTriggerClosing:function(){return L("")},open:"race"===M,className:"nav_item",children:Object(r.jsx)("div",{className:"nav_item_content_container",children:n?n.sort().map((function(e,t){return e?Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:X.includes(e),onChange:function(){return function(e){if(X.includes(e))V(D(X.filter((function(t){return t!==e}))));else{var t=X.slice();t.push(e),V(D(t))}}(e)}}),e&&e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")]})},t):null})):null})}),Object(r.jsx)(m.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Sex"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return L("sex")},onTriggerClosing:function(){return L("")},open:"sex"===M,className:"nav_item",children:Object(r.jsxs)("div",{className:"nav_item_content_container",children:[Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:J.includes("F"),onChange:function(){return he("F")}}),"Female"]})}),Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:J.includes("M"),onChange:function(){return he("M")}}),"Male"]})})]})}),Object(r.jsx)(m.a,{trigger:Object(r.jsxs)("div",{className:"nav_item",children:[Object(r.jsx)("p",{className:"filter_identifier",children:"Filter By Borough"}),Object(r.jsx)(p.d,{fill:"rgb(0, 109, 129)"})]}),onTriggerOpening:function(){return L("borough")},onTriggerClosing:function(){return L("")},open:"borough"===M,className:"nav_item",children:Object(r.jsx)("div",{className:"nav_item_content_container",children:i?i.sort().map((function(e,t){return Object(r.jsx)("p",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{name:"my-checkbox",type:"checkbox",checked:Q.includes(e),onChange:function(){return function(e){if(Q.includes(e))V(S(Q.filter((function(t){return t!==e}))));else{var t=Q.slice();t.push(e),V(S(t))}}(e)}}),"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"]})},t)})):null})}),Object(r.jsx)("span",{className:"spacer"}),Object(r.jsxs)("div",{className:"filter_buttons_container",children:[Object(r.jsx)(x.a,{loading:d,className:"apply_filters_button",onClick:function(){q||V(k()),d||u(!0),l(W,K,H,X,J,Q,t)},"data-color":"blue","data-size":O.XL,"data-style":O.EXPAND_LEFT,"data-spinner-size":30,"data-spinner-color":"#fff","data-spinner-lines":12,children:d?"APPLYING FILTERS":"APPLY FILTERS"}),Object(r.jsx)(x.a,{loading:g,className:"reset_filters_button",onClick:function(){Z||V(F()),g||y(!0),V(R([])),V(C([])),V(E([])),V(D([])),V(T([])),V(S([])),l([],[],[],[],[],[],t)},"data-color":"red","data-size":O.XL,"data-style":O.EXPAND_LEFT,"data-spinner-size":30,"data-spinner-color":"#fff","data-spinner-lines":12,children:g?"RESETTING":"RESET FILTERS"})]})]})]})},L=n(91),w=n(151),P=n(150),G=n(149),I=n.n(G),B=(n(280),n(281),n(282),n(35)),U=function(e){var t=e.filteredArrestCategory,n=e.graphOption,a=e.graphsDrawn,i=e.changeGraphsDrawn,c=[{eventName:"ready",callback:function(){a||setTimeout((function(){i(!0)}),300)}}];return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===n?"block":"none",opacity:a?1:0},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Breakdown by Category"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:Object(r.jsx)(B.a,{chartType:"PieChart",chartEvents:c,data:t?[["Category","Number of Arrests"],["Felony",t.filter((function(e){return"F"===e})).length],["Misdemeanor",t.filter((function(e){return"M"===e})).length],["Violation",t.filter((function(e){return"F"!==e&&"M"!==e})).length]]:[],options:{backgroundColor:"transparent"}})})]})},V=function(e){var t=e.filteredAgeGroupData,n=e.filteredAgeGroup,a=e.graphOption;return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Breakdown by Age Group"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:Object(r.jsx)(B.a,{chartType:"PieChart",data:[["Age Group","Number of Arrests"]].concat(t.sort((function(e,t){return e.localeCompare(t)})).map((function(e){return["65"===e?"65+":e,n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})})]})},q=n(38),Y=n.n(q),z=function(e){var t=e.filteredRaceUniqueValues,n=e.filteredRaceArr,a=e.graphOption,i=Object(A.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Breakdown by Race"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:i?Object(r.jsx)(Y.a,{size:100,color:"rgb(93, 188, 210)"}):Object(r.jsx)(B.a,{chartType:"PieChart",loader:Object(r.jsx)(Y.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Race","Number of Arrests"]].concat(t.map((function(e){return[e?e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/"):null,n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})})]})},W=function(e){var t=e.filteredSexUniqueValues,n=e.filteredSexArr,a=e.graphOption,i=Object(A.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Breakdown by Sex"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:i?Object(r.jsx)(Y.a,{size:100,color:"rgb(93, 188, 210)"}):Object(r.jsx)(B.a,{chartType:"PieChart",loader:Object(r.jsx)(Y.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Sex","Number of Arrests"]].concat(t.map((function(e){return["M"===e?"Male":"Female",n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})})]})},H=function(e){var t=e.filteredBoroughUniqueValues,n=e.filteredBoroughArr,a=e.graphOption;return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===a?"block":"none"},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Breakdown by Borough"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:Object(r.jsx)(B.a,{chartType:"PieChart",data:[["Borough","Number of Arrests"]].concat(t.map((function(e){return["B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown",n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})})]})},Q=function(e){var t=e.filteredOffenseDescriptionArr,n=e.filteredOffenseDescriptionUniqueValues,i=e.graphOption,c=e.isSame,o=e.usePrevious,l=e.isMobileOrTablet,u=e.isMediumLaptop,d=Object(a.useState)([]),f=Object(s.a)(d,2),b=f[0],p=f[1],j=o(t),g=o(n),m=Object(A.c)((function(e){return e.applyingFiltersReducer.filters}));return Object(a.useEffect)((function(){if(t&&t.length>0&&n.length>0&&(t!==j||n!==g)){var e=n.map((function(e){return[e,t.filter((function(t){return t===e})).length]})).sort((function(e,t){return e[1]>t[1]?1:-1}));c(e,b)||p(e)}}),[c,t,n,b,j,g]),Object(r.jsx)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===i?"block":"none"},children:b.length>0?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Top 5 Offenses"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:m?Object(r.jsx)(Y.a,{size:100,color:"rgb(93, 188, 210)"}):Object(r.jsx)(B.a,{chartType:"BarChart",loader:Object(r.jsx)(Y.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Offense Description","Number of Arrests"]].concat(b.length>0?b.slice(b.length-5,b.length).sort((function(e,t){return e[1]>t[1]?-1:1})):["UNKNOWN",1]),options:{backgroundColor:"transparent",legend:{position:"none"},width:l?300:u?400:600,bar:l?null:{groupWidth:"95%"},chartArea:l?null:{width:"50%",height:"50%"}}})})]}):null})},J=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=e.isTinyPhone,i=Object(A.c)((function(e){return e.ageTimelineColumnsReducer.columns}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Age Group Trends"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:Object(r.jsx)(B.a,{legendToggle:!0,chartType:"LineChart",loader:Object(r.jsx)(Y.a,{size:100,color:"rgb(93, 188, 210)"}),data:i,options:{backgroundColor:"transparent",width:t?a?275:300:n?350:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})})]})},K=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=e.isTinyPhone,i=Object(A.c)((function(e){return e.boroughTimelineColumnsReducer.columns}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Borough Trends"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:Object(r.jsx)(B.a,{legendToggle:!0,chartType:"LineChart",loader:Object(r.jsx)(Y.a,{size:100,color:"rgb(93, 188, 210)"}),data:i,options:{legendToggle:!0,backgroundColor:"transparent",width:t?a?275:300:n?350:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})})]})},X=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=e.isTinyPhone,i=Object(A.c)((function(e){return e.categoryTimelineColumnsReducer.columns}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Category Trends"}),Object(r.jsx)("div",{className:"bottom_info_pie_container category_timeline_container",children:Object(r.jsx)(B.a,{legendToggle:!0,chartType:"LineChart",loader:Object(r.jsx)(Y.a,{size:100,color:"rgb(93, 188, 210)"}),data:i,options:{legendToggle:!0,backgroundColor:"transparent",width:t?a?275:300:n?350:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})})]})},Z=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=e.isTinyPhone,i=Object(A.c)((function(e){return e.sexTimelineColumnsReducer.columns}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Gender Trends"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:Object(r.jsx)(B.a,{legendToggle:!0,chartType:"LineChart",loader:Object(r.jsx)(Y.a,{size:100,color:"rgb(93, 188, 210)"}),data:i,options:{legendToggle:!0,backgroundColor:"transparent",width:t?a?275:300:n?350:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})})]})},$=function(e){var t=e.isMobileOrTablet,n=e.isMediumLaptop,a=e.isTinyPhone,i=Object(A.c)((function(e){return e.raceTimelineColumnsReducer.columns}));return Object(r.jsxs)("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},children:[Object(r.jsx)("p",{className:"bottom_info_section_title",children:"Race Trends"}),Object(r.jsx)("div",{className:"bottom_info_pie_container",children:Object(r.jsx)(B.a,{legendToggle:!0,chartType:"LineChart",loader:Object(r.jsx)(Y.a,{size:100,color:"rgb(93, 188, 210)"}),data:i,options:{legendToggle:!0,backgroundColor:"transparent",width:t?a?275:300:n?350:500,chartArea:{width:"50%",height:"50%"},hAxis:{title:"Dates"},vAxis:{title:"# of Arrests"},explorer:{axis:"horizontal",keepInBounds:!0,maxZoomIn:.2}}})})]})},ee=n(135),te=n(136),ne=n.n(te),re=n(123),ae=n.n(re),ie=n(52);n(116);function ce(){var e=Object(L.a)(["\n    display: block;\n    margin: 0 auto;\n  "]);return ce=function(){return e},e}var oe=function(e){var t=e.tooltipVisible,n=e.filteredAgeGroup,i=e.filteredRaceArr,c=e.filteredSexArr,o=e.filteredBoroughArr,l=e.filteredOffenseDescriptionArr,u=e.filteredArrestCategory,d=e.filteredUniqueCategory,f=e.filteredAgeGroupData,b=e.filteredRaceUniqueValues,j=e.filteredSexUniqueValues,g=e.filteredBoroughUniqueValues,m=e.filteredOffenseDescriptionUniqueValues,O=e.useOnClickOutside,x=e.currentFilters,y=e.isSame,_=e.usePrevious,v=e.graphOption,N=e.changeGraphOption,R=e.layersRef,C=e.isMobileOrTablet,E=e.isMediumLaptop,D=e.footerMenuActive,T=e.changeFooterMenuActive,S=e.isTinyPhone,k=e.resetFilters,F=e.filteredTimelineAgeGroupData,M=e.filteredTimelineBoroughData,L=e.filteredTimelineCategoryData,G=e.filteredTimelineSexData,B=e.filteredTimelineRaceData,q=Object(A.c)((function(e){return e.applyingFiltersReducer.filters})),Y=Object(A.c)((function(e){return e.trendsAvailableReducer.available})),te=Object(A.c)((function(e){return e.ageTimelineColumnsReducer.columns})),re=Object(A.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),oe=Object(A.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),se=Object(A.c)((function(e){return e.raceTimelineColumnsReducer.columns})),le=Object(A.c)((function(e){return e.sexTimelineColumnsReducer.columns})),ue=Object(a.useState)(!1),de=Object(s.a)(ue,2),fe=de[0],be=de[1],pe=Object(a.useState)(!1),je=Object(s.a)(pe,2),ge=je[0],me=je[1],he=Object(a.useState)(!1),Oe=Object(s.a)(he,2),xe=Oe[0],ye=Oe[1],_e=Object(a.useState)(!1),ve=Object(s.a)(_e,2),Ne=ve[0],Ae=ve[1],Re=Object(a.useState)(!1),Ce=Object(s.a)(Re,2),Ee=Ce[0],De=Ce[1],Te=Object(a.useState)(!1),Se=Object(s.a)(Te,2),ke=Se[0],Fe=Se[1],Me=Object(a.useRef)(null),Le=Object(a.useRef)(null),we=Object(a.useRef)(null),Pe=document.getElementsByClassName("carousel_right_arrow"),Ge=document.getElementsByClassName("alice-carousel"),Ie=document.getElementsByClassName("category_timeline_container"),Be=document.getElementsByClassName("google-visualization-tooltip"),Ue=document.getElementById("deckgl-wrapper"),Ve=Object(ie.css)(ce());O(we,(function(){C||(T(!1),N("overview"))})),Object(a.useEffect)((function(){C?(Ue.style.filter="none",Ue.style["-webkit-filter"]="none",Ue.style.pointerEvents="auto"):Ue&&(D?(Ue.style.filter="blur(1px) brightness(0.2)",Ue.style["-webkit-filter"]="blur(1px) brightness(0.2)",Ue.style.pointerEvents="none"):(Ue.style.filter="none",Ue.style["-webkit-filter"]="none",Ue.style.pointerEvents="auto"))}),[Ue,D,C]),Object(a.useEffect)((function(){if("trends"===v&&!q){var e=setInterval((function(){var e=Be[0],t=document.getElementsByTagName("circle");if(e){var n=document.getElementsByClassName("alice-carousel__stage-item __active");if(n[1]){for(var r=n[1].getElementsByTagName("path"),a=n[1].getElementsByTagName("text"),i=(r.length-2)/2,c=0;c<i;c++)if("none"===r.item(c).getAttribute("stroke")&&a.item(c).textContent.slice(0,4)===e.lastChild.firstChild.textContent.split(":")[0].slice(0,4)){e.style.display="none";for(var o=0;o<t.length;o++)t[o].style.display="none"}}else for(var s=0;s<t.length;s++)t[s].style.display="block"}}),10);return function(){clearInterval(e)}}}),[Be,v,q]),Object(a.useEffect)((function(){"trends"===v&&(Ne||(setTimeout((function(){ye(!0)}),1800),setTimeout((function(){ye(!1)}),6800),Ae(!0)))}),[v,Ne]),Object(a.useEffect)((function(){var e=document.getElementsByClassName("graph_options_container")[0].lastChild.lastChild;e&&(e.style.opacity=Y?1:.7)}),[Y]),Object(a.useEffect)((function(){if(!q&&D){var e=setInterval((function(){"overview"===v?Ge[0]&&(Ge[0].className.includes("overview_carousel")||(Ge[0].className+=" overview_carousel",Fe(!1),clearInterval(e))):Ge[0]&&(Ge[0].className.includes("trends_carousel")||(Ge[0].className+=" trends_carousel",Fe(!1),clearInterval(e)))}),10);return function(){clearInterval(e)}}}),[D,Ge,q,v,ke]);var qe=function(){D?(T(!1),N("overview")):(T(!0),N("overview"),fe||(setTimeout((function(){me(!0)}),1800),setTimeout((function(){me(!1)}),6800),be(!0)))};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"desktop_return_to_map_overlay",style:{display:C?"none":D?"flex":"none"},children:[Object(r.jsx)(P.a,{})," ",Object(r.jsx)("p",{children:"Click to return to arrest map"})]}),Object(r.jsxs)("div",{className:"bottom_info_panel_container",ref:we,style:{zIndex:C?t?-1:10:t?-1:0,transform:C?D?"translate3d(0, 0, 0)":"translate3d(0, 100%, 0)":"none"},children:[Object(r.jsx)("div",{className:"shadow_overlay",onClick:function(){T(!1),N("overview")},style:{opacity:D?1:0,display:D?"block":"none"},children:" "}),Object(r.jsxs)("div",{className:"desktop_bottom_footer_placeholder",onClick:qe,style:{display:C||D?"none":"flex"},children:[Object(r.jsx)(w.a,{})," Click to view graphs and trends"]}),Object(r.jsx)("div",{className:"footer_menu_trigger",onClick:qe,children:D?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(P.a,{})," BACK TO ARREST MAP"]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(w.a,{})," VIEW GRAPHS AND TRENDS"]})}),Object(r.jsxs)("div",{className:"bottom_info_main_info_box",style:{zIndex:D?99999999:99999,filter:C||D?"none":"blur(3px)",WebkitFilter:C||D?"none":"blur(3px)"},children:[Object(r.jsxs)("div",{className:"filters_applied",children:[Object(r.jsx)("h2",{children:"Filters Applied"}),0===x.category.length&&0===x.offense.length&&0===x.age.length&&0===x.race.length&&0===x.sex.length&&0===x.borough.length?Object(r.jsx)("p",{className:"no_filters_applied_statement",children:"No filters currently applied"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===x.category.length?null:"Categor"+(x.category.length>1?"ies: ":"y: ")}),0===x.category.length?null:x.category.map((function(e){return"F"===e?"Felony":"M"===e?"Misdemeanor":"Violation"})).join(", ")]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===x.offense.length?null:"Offense"+(1===x.offense.length?": ":"s: ")}),0===x.offense.length?null:x.offense.map((function(e){return e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")})).join(", ")]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===x.age.length?null:"Age"+(1===x.age.length?": ":"s: ")}),0===x.age.length?null:x.age.map((function(e){return"65"===e?"65+":e})).join(", ")]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===x.race.length?null:"Race"+(1===x.race.length?": ":"s: ")}),0===x.race.length?null:x.race.join(", ")]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===x.sex.length?null:"Sex: "}),0===x.sex.length?null:x.sex.map((function(e){return"M"===e?"Male":"Female"})).join(", ")]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:0===x.borough.length?null:"Borough"+(1===x.borough.length?": ":"s: ")}),0===x.borough.length?null:x.borough.map((function(e){return"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"})).join(", ")]})]})]}),Object(r.jsxs)("div",{className:"graph_options_container",children:[Object(r.jsx)("p",{children:"Graph Options"}),Object(r.jsxs)(ee.RadioGroup,{onChange:function(e){if(v===e)return null;N(e),Fe(!0)},horizontal:!0,value:v,children:[Object(r.jsx)(ee.RadioButton,{rootColor:"rgb(140, 140, 140)",pointColor:"rgb(0, 0, 128)",value:"overview",children:"Overview"}),Object(r.jsx)(ee.RadioButton,{rootColor:"rgb(140, 140, 140)",pointColor:"rgb(0, 0, 128)",value:"trends",disabled:!Y,disabledColor:"rgb(211, 211, 211)",children:"Trends"})]})]})]}),Object(r.jsxs)("div",{className:"carousel_container",onTouchStart:function(){"trends"===v&&(xe&&ye(!1),ge&&me(!1))},style:{display:D?"block":"flex",paddingLeft:C||D?"0":E?"27%":"15%"},children:[Object(r.jsx)("div",{className:"footer_carousel_loading_container",style:{zIndex:D?Ee?ke?999999999999999:0:999999999999999:0,opacity:D?Ee?ke?1:0:1:0},children:Object(r.jsx)(ae.a,{css:Ve,size:80,color:"rgb(0, 109, 129)",style:{transition:"all 0.5s ease"},loading:!0})}),Object(r.jsx)(h.a,{content:"Click the left and right arrows ".concat(C?"or swipe":"or drag"," to view more graphs"),visible:Ee&&!ke&&D&&ge&&R.current.length>0&&!!te&&te.length>0&&!!re&&re.length>0&&!!oe&&oe.length>0&&!!se&&se.length>0&&!!le&&le.length>0,reference:Pe[0],className:"burger_tooltip",placement:"left",onClickOutside:function(){return me(!1)}}),D?Object(r.jsx)(p.a,{color:"rgb(0, 0, 0)",className:"carousel_left_arrow",onClick:function(){"overview"===v?Me&&Me.slidePrev():Le&&Le.slidePrev(),ge&&me(!1)}}):null,!D||q||k||"overview"!==v?null:Object(r.jsx)(I.a,{ref:function(e){return Me=e},autoPlay:!1,fadeOutAnimation:!0,disableDotsControls:!0,disableButtonsControls:!0,mouseTracking:!0,playButtonEnabled:!1,responsive:{0:{items:1},760:{items:2},1224:{items:3},1800:{items:4}},infinite:!0,items:[Object(r.jsx)(U,{filteredArrestCategory:u,graphOption:v,graphsDrawn:Ee,changeGraphsDrawn:De},"overview"),Object(r.jsx)(V,{filteredAgeGroup:n,filteredAgeGroupData:f,graphOption:v},"overview"),Object(r.jsx)(z,{filteredRaceUniqueValues:b,filteredRaceArr:i,graphOption:v},"overview"),Object(r.jsx)(W,{filteredSexUniqueValues:j,filteredSexArr:c,graphOption:v},"overview"),Object(r.jsx)(H,{filteredBoroughUniqueValues:g,filteredBoroughArr:o,graphOption:v},"overview"),Object(r.jsx)(Q,{filteredOffenseDescriptionArr:l,filteredOffenseDescriptionUniqueValues:m,graphOption:v,isSame:y,usePrevious:_,isMobileOrTablet:C,isMediumLaptop:E},"overview")]}),Object(r.jsx)(ne.a,{circle:!0,height:150,width:150,style:{display:C||D?"none":"flex"}}),Object(r.jsx)(ne.a,{circle:!0,height:150,width:150,style:{display:C||D?"none":"flex"}}),Object(r.jsx)(ne.a,{circle:!0,height:150,width:150,style:{display:C||D?"none":"flex"}}),Object(r.jsx)(h.a,{content:C?null:"Scroll to zoom in and out of trend graphs",visible:!C&&("trends"===v&&xe&&Ee&&!ke),reference:Ie.length>2?Ie[1]:Ie[0],className:"burger_tooltip trend_tooltip",placement:"top",onClickOutside:function(){return ye(!1)}}),Object(r.jsx)(h.a,{content:"Toggle data lines by selecting legend items",visible:"trends"===v&&xe&&Ee&&!ke,reference:Ie.length>2?Ie[1]:Ie[0],className:"burger_tooltip trend_tooltip",placement:C?"left":"right",offset:C?[-30,-180]:[0,50],onClickOutside:function(){return ye(!1)}}),q||k||!D||"overview"===v?null:Object(r.jsx)(I.a,{ref:function(e){return Le=e},autoPlay:!1,disableDotsControls:!0,disableButtonsControls:!0,mouseTracking:!1,playButtonEnabled:!1,touchMoveDefaultEvents:!1,infinite:!0,responsive:{0:{items:1},760:{items:2},1224:{items:3},2e3:{items:4}},items:[Object(r.jsx)(X,{filteredTimelineCategoryData:L,filteredArrestCategory:u,filteredUniqueCategory:d,isMobileOrTablet:C,isMediumLaptop:E,isTinyPhone:S},"trends"),Object(r.jsx)(J,{filteredAgeGroupData:f,filteredTimelineAgeGroupData:F,isMobileOrTablet:C,isMediumLaptop:E,isTinyPhone:S},"trends"),Object(r.jsx)(K,{filteredBoroughUniqueValues:g,filteredTimelineBoroughData:M,isMobileOrTablet:C,isMediumLaptop:E,isTinyPhone:S},"trends"),Object(r.jsx)($,{filteredRaceUniqueValues:b,filteredTimelineRaceData:B,isMobileOrTablet:C,isMediumLaptop:E,isTinyPhone:S},"trends"),Object(r.jsx)(Z,{filteredSexUniqueValues:j,filteredTimelineSexData:G,isMobileOrTablet:C,isMediumLaptop:E,isTinyPhone:S},"trends")]}),D?Object(r.jsx)(p.b,{color:"rgb(0, 0, 0)",className:"carousel_right_arrow",onClick:function(){"overview"===v?Me&&Me.slideNext():Le&&Le.slideNext(),ge&&me(!1)}}):null]})]})]})},se=n(109),le=n.n(se),ue=n(190),de=n.n(ue),fe=n(191),be=n(96),pe=n(125),je=n(192),ge=n.n(je),me=n(193),he=n.n(me),Oe=n(124);function xe(){var e=Object(L.a)(["\n    display: block;\n    margin: 0 auto;\n  "]);return xe=function(){return e},e}var ye=function(e){var t=e.countUp,n=e.loaderColor,a=e.mapError,i=e.applyingFiltersProgressRef,c=Object(ie.css)(xe()),o=Object(A.c)((function(e){return e.filteredDataChunksReducer.data})),s=Object(A.c)((function(e){return e.totalCountReducer.total}));return Object(r.jsxs)(Oe.a,{className:"loading_container",children:[0===s?Object(r.jsx)(ge.a,{css:c,size:50,color:n,style:{transition:"all 0.5s ease"},loading:""===o||"object"===typeof o&&o.flat().length<9e4}):t>95?Object(r.jsx)(he.a,{css:c,size:200,color:"rgb(93, 188, 210)",style:{transition:"all 0.5s ease"},loading:t>95}):Object(r.jsxs)(be.a,{value:t,styles:Object(be.b)({strokeLinecap:"butt",trailColor:"#eee"}),children:[Object(r.jsx)(pe.a,{color:"#fff",size:"4rem"}),Object(r.jsx)("div",{style:{fontSize:30,marginTop:20,color:"#fff"},children:Object(r.jsxs)("strong",{children:[t,"%"]})})]}),Object(r.jsx)("p",{children:a?"Error Initializing NYPD Arrest Map":0===s?"Initializing NYPD Arrest Map":t>95?"Analyzing Arrest Data":"Loading Most Recent Arrest Data"}),0!==s&&t>95?Object(r.jsxs)("span",{children:["(",i.current,"% Done)"]}):null]})},_e=n(126),ve=n.n(_e),Ne=function(e){var t=e.modalActive,n=e.changeModalActive,i=Object(A.c)((function(e){return e.loadDataChunksReducer.data})),c=Object(A.c)((function(e){return e.filteredDataChunksReducer.data})),o=Object(a.useState)(0),l=Object(s.a)(o,2),u=l[0],d=l[1];return Object(a.useEffect)((function(){if(i[0][t.year.toString()]){var e=100*Number(i[0][t.year.toString()].map((function(e){return e.length})).reduce((function(e,t){return e+t}),0)/j[t.year.toString()]).toFixed(1);100===u?n({active:!1,year:null}):e&&e!==u&&d(e)}}),[i,t.year,n,u,c.length]),Object(r.jsxs)(ve.a,{isOpen:t.active,style:{content:{position:"fixed",zIndex:1e4,opacity:.99,height:"100%",backdropFilter:"blur(5px)",WebkitBackdropFilter:"blur(5px)",paddingBottom:"10%",borderRadius:"none",width:"100vw",top:"0",left:"0",right:"0",bottom:"0",border:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)"}},children:[Object(r.jsxs)(be.a,{value:u,styles:Object(be.b)({strokeLinecap:"butt",trailColor:"#eee"}),children:[Object(r.jsx)(pe.a,{color:"#fff",size:"4rem"}),Object(r.jsx)("div",{style:{fontSize:30,marginTop:20,color:"#fff"},children:Object(r.jsxs)("strong",{children:[u,"%"]})})]}),Object(r.jsxs)("p",{children:["Loading ",t.year," Arrest Data"]})]})},Ae=function(e,t){return{type:"FILTERED_DATA_CHUNKS_ADD_TO_YEAR",data:e,dataIndex:t}},Re=function(e){return{type:"FILTERED_DATA_CHUNKS_ADD_YEAR",data:e}},Ce=function(e){return{type:"ASSIGN_FILTERED_DATA_CHUNKS",data:e}},Ee=function(e){return{type:"INCREMENT_TOTAL_COUNT",dataLength:e}},De=function(e){return{type:"ASSIGN_LOAD_DATA",data:e}},Te=function(){return{type:"FILTERED_DATA_CHANGED"}},Se=function(){return{type:"FILTERED_DATA_CHANGED_RESET"}},ke=function(e){return{type:"TIMELINE_AGE_GROUP_GRAPH_DATA",data:e}},Fe=function(e){return{type:"TIMELINE_BOROUGH_GRAPH_DATA",data:e}},Me=function(e){return{type:"TIMELINE_CATEGORY_GRAPH_DATA",data:e}},Le=function(e){return{type:"TIMELINE_GENDER_GRAPH_DATA",data:e}},we=function(e){return{type:"TIMELINE_RACE_GRAPH_DATA",data:e}},Pe=function(){return new Worker(n.p+"static/js/setFilterAndTimelineGraphWorkers.ad7e120d.worker.js")},Ge=function(e){return{type:"AGE_TIMELINE_COLUMNS",columns:e}},Ie=function(e){return{type:"BOROUGH_TIMELINE_COLUMNS",columns:e}},Be=function(e){return{type:"CATEGORY_TIMELINE_COLUMNS",columns:e}},Ue=function(e){return{type:"SEX_TIMELINE_COLUMNS",columns:e}},Ve=function(e){return{type:"RACE_TIMELINE_COLUMNS",columns:e}},qe=function(){return{type:"APPLYING_FILTERS_RESET"}};n(343);function Ye(){var e=Object(L.a)(["\n    display: block;\n    margin: 0 auto;\n  "]);return Ye=function(){return e},e}var ze=function(e){var t=e.applyingFiltersProgressRef,n=Object(a.useRef)(null),i=Object(ie.css)(Ye()),c=Object(A.c)((function(e){return e.applyingFiltersReducer.filters})),o=Object(A.c)((function(e){return e.resetFiltersReducer.reset}));return Object(a.useEffect)((function(){n&&n.current&&(c||o?n.current.open():n.current.close())}),[c,o]),Object(r.jsx)(v.a,{className:"applying_filters",ref:n,modal:!0,closeOnDocumentClick:!1,closeOnEscape:!1,children:Object(r.jsxs)("div",{className:"applying_filters_modal",children:[Object(r.jsx)(ae.a,{css:i,size:80,color:"rgb(0, 109, 129)",style:{transition:"all 0.5s ease"},loading:!0}),Object(r.jsxs)("p",{children:[o?"Resetting":"Applying"," Filters (",t.current,"% Done)"]})]})})},We=function(){return{type:"NEW_YEAR_FINISHED_LOADING_RESET"}},He=function(){return{type:"NEW_YEAR_FINISHED_LOADING"}},Qe=function(){return{type:"TRENDS_AVAILABLE"}},Je=function(){return{type:"TRENDS_NOT_AVAILABLE"}},Ke=n(98),Xe=n(196),Ze=function(){return{type:"RESET_FILTERS_RESET"}};le.a.extend(de.a);var $e=function(){var e=Object(A.b)(),t=Object(A.c)((function(e){return e.loadDataReducer.data})),n=Object(A.c)((function(e){return e.filteredDataReducer.changed})),i=Object(A.c)((function(e){return e.filteredDataChunksReducer.data})),c=Object(A.c)((function(e){return e.newYearFinishedLoadingReducer.finished})),f=Object(A.c)((function(e){return e.applyingFiltersReducer.filters})),b=Object(A.c)((function(e){return e.resetFiltersReducer.reset})),p=Object(A.c)((function(e){return e.totalCountReducer.total})),g=Object(A.c)((function(e){return e.ageGroupTimelineGraphDataReducer.data})),m=Object(A.c)((function(e){return e.boroughTimelineGraphDataReducer.data})),h=Object(A.c)((function(e){return e.categoryTimelineGraphDataReducer.data})),O=Object(A.c)((function(e){return e.genderTimelineGraphDataReducer.data})),x=Object(A.c)((function(e){return e.raceTimelineGraphDataReducer.data})),y=Object(A.c)((function(e){return e.ageTimelineColumnsReducer.columns})),_=Object(A.c)((function(e){return e.boroughTimelineColumnsReducer.columns})),v=Object(A.c)((function(e){return e.categoryTimelineColumnsReducer.columns})),N=Object(A.c)((function(e){return e.raceTimelineColumnsReducer.columns})),R=Object(A.c)((function(e){return e.sexTimelineColumnsReducer.columns})),C=Object(a.useState)(!1),E=Object(s.a)(C,2),D=E[0],T=E[1],S=Object(a.useState)(!1),k=Object(s.a)(S,2),F=k[0],L=k[1],w=Object(a.useState)("rgb(93, 188, 210)"),P=Object(s.a)(w,2),G=P[0],I=P[1],B=Object(a.useState)(!1),U=Object(s.a)(B,2),V=U[0],q=U[1],Y=Object(a.useState)({active:!1,year:null}),z=Object(s.a)(Y,2),W=z[0],H=z[1],Q=Object(a.useState)(!1),J=Object(s.a)(Q,2),K=J[0],X=J[1],Z=Object(a.useState)(!1),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)("overview"),re=Object(s.a)(ne,2),ae=re[0],ie=re[1],ce=Object(a.useState)(!1),se=Object(s.a)(ce,2),ue=se[0],de=se[1],be=Object(a.useState)({category:[],offense:[],age:[],race:[],sex:[],borough:[]}),pe=Object(s.a)(be,2),je=pe[0],ge=pe[1],me=Object(Ke.useMediaQuery)({maxWidth:375}),he=Object(Ke.useMediaQuery)({maxWidth:1224}),xe=Object(Ke.useMediaQuery)({minWidth:768}),_e=Object(Ke.useMediaQuery)({maxWidth:1440}),Ye=Object(Ke.useMediaQuery)({orientation:"portrait"}),$e=Object(a.useState)(!1),et=Object(s.a)($e,2),tt=et[0],nt=et[1],rt=Object(a.useState)(!1),at=Object(s.a)(rt,2),it=at[0],ct=at[1],ot=Object(a.useState)([]),st=Object(s.a)(ot,2),lt=st[0],ut=st[1],dt=Object(a.useState)(""),ft=Object(s.a)(dt,2),bt=ft[0],pt=ft[1],jt=Object(a.useState)(""),gt=Object(s.a)(jt,2),mt=gt[0],ht=gt[1],Ot=Object(a.useState)(""),xt=Object(s.a)(Ot,2),yt=xt[0],_t=xt[1],vt=Object(a.useState)(""),Nt=Object(s.a)(vt,2),At=Nt[0],Rt=Nt[1],Ct=Object(a.useState)(""),Et=Object(s.a)(Ct,2),Dt=Et[0],Tt=Et[1],St=Object(a.useState)(!1),kt=Object(s.a)(St,2),Ft=kt[0],Mt=kt[1],Lt=Object(a.useState)(!1),wt=Object(s.a)(Lt,2),Pt=wt[0],Gt=wt[1],It=Object(a.useState)(""),Bt=Object(s.a)(It,2),Ut=Bt[0],Vt=Bt[1],qt=Object(a.useRef)([]),Yt=Object(a.useRef)(0),zt=Object(a.useRef)(null),Wt=le()(j.lastUpdatedDate,"MMMM D, YYYY").format("YYYY");Object(a.useEffect)((function(){ve.a.setAppElement("body")}),[]);var Ht=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current},Qt=Ht(je),Jt=Object(fe.useCountUp)({start:0,end:t.length>0?100*Number((t.length/j[Wt]).toFixed(1)):0,delay:0,duration:1}),Kt=Jt.countUp,Xt=Jt.update;Object(a.useEffect)((function(){if(t.length>0){var e=100*Number((t.length/j[Wt]).toFixed(1));Xt(e>=60?100:e)}}),[Xt,Kt,t,Wt]);var Zt=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},$t=Object(a.useState)([]),en=Object(s.a)($t,2),tn=en[0],nn=en[1],rn=Object(a.useState)([]),an=Object(s.a)(rn,2),cn=an[0],on=an[1],sn=Object(a.useState)([]),ln=Object(s.a)(sn,2),un=ln[0],dn=ln[1],fn=Object(a.useState)([]),bn=Object(s.a)(fn,2),pn=bn[0],jn=bn[1],gn=Object(a.useState)([]),mn=Object(s.a)(gn,2),hn=mn[0],On=mn[1],xn=Object(a.useState)([]),yn=Object(s.a)(xn,2),_n=yn[0],vn=yn[1],Nn=Object(a.useState)([]),An=Object(s.a)(Nn,2),Rn=An[0],Cn=An[1],En=Object(a.useState)([]),Dn=Object(s.a)(En,2),Tn=Dn[0],Sn=Dn[1],kn=Object(a.useState)([]),Fn=Object(s.a)(kn,2),Mn=Fn[0],Ln=Fn[1],wn=Object(a.useState)([]),Pn=Object(s.a)(wn,2),Gn=Pn[0],In=Pn[1],Bn=Object(a.useState)([]),Un=Object(s.a)(Bn,2),Vn=Un[0],qn=Un[1],Yn=Object(a.useState)([]),zn=Object(s.a)(Yn,2),Wn=zn[0],Hn=zn[1],Qn=Object(a.useState)([]),Jn=Object(s.a)(Qn,2),Kn=Jn[0],Xn=Jn[1],Zn=Object(a.useState)([]),$n=Object(s.a)(Zn,2),er=$n[0],tr=$n[1],nr=Object(a.useState)([]),rr=Object(s.a)(nr,2),ar=rr[0],ir=rr[1],cr=Object(a.useState)([]),or=Object(s.a)(cr,2),sr=or[0],lr=or[1],ur=Object(a.useCallback)((function(t,n,r,a,i){Dt&&(Dt.postMessage({ageObj:t,raceObj:n,categoryObj:r,sexObj:a,boroughObj:i}),Dt.onmessage=function(t){Yt.current+=25;var n=t.data.ageGroupTimelineGraphData,r=t.data.raceTimelineGraphData,a=t.data.categoryTimelineGraphData,i=t.data.genderTimelineGraphData,c=t.data.boroughTimelineGraphData;e(ke(n)),e(Fe(c)),e(Me(a)),e(Le(i)),e(we(r))})}),[Dt,e]),dr=Object(a.useCallback)((function(e,t,n,r,a,i,c,o,s){yt&&(yt.postMessage({ageGroup:e,raceArr:t,boroughArr:n,offenseDescriptionArr:r,filteredAgeGroup:a,filteredSexArr:i,filteredRaceArr:c,filteredBoroughArr:o,filteredOffenseDescriptionArr:s}),yt.onmessage=function(e){Yt.current+=25;var t=JSON.parse(e.data),n=t.ageGroupData,r=t.raceUniqueValues,a=t.boroughUniqueValues,i=t.offenseDescriptionArr,c=t.filteredAgeGroupData,o=t.filteredSexUniqueValues,s=t.filteredRaceUniqueValues,l=t.filteredBoroughUniqueValues,u=t.filteredOffenseDescriptionUniqueValues;mr(c),yr(s),Ar(o),Dr(l),Fr(u),Pr(n),Ur(r),zr(a),Jr(i),te(!0)})}),[yt]),fr=Object(a.useCallback)((function(e,t,n){mt&&(mt.postMessage({loadData:e,filteredDataChunks:t,currentFilters:n}),mt.onmessage=function(e){Yt.current+=25;var t=JSON.parse(e.data),n=t.ageGroup,r=t.raceArr,a=t.boroughArr,i=t.offenseDescriptionArr,c=t.filteredArrestCategory,o=t.filteredAgeGroup,s=t.filteredSexArr,l=t.filteredRaceArr,u=t.filteredBoroughArr,d=t.filteredOffenseDescriptionArr,f=t.filteredUniqueCategory;dr(n,r,a,i,o,s,l,u,d),nn(n),on(r),dn(a),jn(i),On(c),vn(o),Cn(s),Sn(l),Ln(u),In(d),qn(f)})}),[mt,dr]),br=Object(a.useCallback)((function(e){At&&(At.postMessage({chunk:e}),At.onmessage=function(e){Yt.current+=25;var t=JSON.parse(e.data),n=t.age_group,r=t.borough,a=t.category,i=t.sex,c=t.race;Hn(n),Xn(r),tr(a),ir(i),lr(c)})}),[At]),pr=Object(a.useState)([]),jr=Object(s.a)(pr,2),gr=jr[0],mr=jr[1],hr=Object(a.useState)([]),Or=Object(s.a)(hr,2),xr=Or[0],yr=Or[1],_r=Object(a.useState)([]),vr=Object(s.a)(_r,2),Nr=vr[0],Ar=vr[1],Rr=Object(a.useState)([]),Cr=Object(s.a)(Rr,2),Er=Cr[0],Dr=Cr[1],Tr=Object(a.useState)([]),Sr=Object(s.a)(Tr,2),kr=Sr[0],Fr=Sr[1],Mr=Object(a.useState)([]),Lr=Object(s.a)(Mr,2),wr=Lr[0],Pr=Lr[1],Gr=Object(a.useState)([]),Ir=Object(s.a)(Gr,2),Br=Ir[0],Ur=Ir[1],Vr=Object(a.useState)([]),qr=Object(s.a)(Vr,2),Yr=qr[0],zr=qr[1],Wr=Object(a.useState)([]),Hr=Object(s.a)(Wr,2),Qr=Hr[0],Jr=Hr[1];Object(a.useEffect)((function(){ee&&(te(!1),ur({unique:gr,data:Wn},{unique:xr,data:sr},{unique:Vn,data:er},{unique:Nr,data:ar},{unique:Er,data:Kn}))}),[h.length,gr,Er,xr,Nr,Wn,Kn,er,sr,ar,Vn,ur,ee]);var Kr=Object(a.useCallback)((function(){0!==Yt.current&&(Yt.current=0);var e=i.map((function(e){return Number(le()(e[5].ARREST_DATE,"MM/DD/YYYY").format("YYYY"))}));qt.current=i.map((function(t,n){var r=le()(t[5].ARREST_DATE,"MM/DD/YYYY").format("YYYY");return new d.a({id:"chunk-".concat(n),data:t,visible:e.flat().includes(Number(r)),filled:!0,radiusMinPixels:2,getPosition:function(e){return[Number(e.Longitude),Number(e.Latitude)]},getFillColor:function(e){return"F"===e.LAW_CAT_CD?[255,0,0]:"M"===e.LAW_CAT_CD?[255,116,0]:[255,193,0]},pickable:!0,useDevicePixels:!1})}))}),[i]);Object(a.useEffect)((function(){var n=j[Wt];c&&(e(We()),p===n&&t.length===n&&(e(Ce([t])),e(Te())))}),[c,t,e,p,Wt]),Object(a.useEffect)((function(){n||K&&X(!1)}),[n,K]),Object(a.useEffect)((function(){p>0&&p===j[Wt]&&n&&(K||(Kr(),fr(t,i,je),br(i),e(Se())),X(!0))}),[Wt,t,K,je,n,Kr,tn,un,_n,Mn,Gn,Tn,Rn,pn,fr,cn,e,i,br,Vn,er,p]);var Xr=Ht(g),Zr=Ht(m),$r=Ht(h),ea=Ht(O),ta=Ht(x);Object(a.useEffect)((function(){if(g!==Xr&&g.length>0&&gr.length===g[0].length-1&&e(Ge([[{type:"date",label:"Date"}].concat(gr.sort((function(e,t){return e.localeCompare(t)})).map((function(e){return"65"===e?"65+":e})))].concat(g))),m!==Zr&&m.length>0&&Er.length===m[0].length-1&&e(Ie([[{type:"date",label:"Date"}].concat(Er.map((function(e){return"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"})))].concat(m))),h!==$r&&h.length>0&&Vn.length>0){var t=Object(o.a)(new Set(Vn.map((function(e){return"F"===e?"Felony":"M"===e?"Misdemeanor":"Violation"}))));t.length===h[0].length-1&&e(Be([[{type:"date",label:"Date"}].concat(t)].concat(h)))}if(O!==ea&&O.length>0){var n=Nr.map((function(e){return"F"===e?"Female":"Male"}));n.length===O[0].length-1&&e(Ue([[{type:"date",label:"Date"}].concat(n)].concat(O)))}if(x!==ta&&x.length>0){var r=xr.map((function(e){return e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")}));r.length===x[0].length-1&&e(Ve([[{type:"date",label:"Date"}].concat(r)].concat(x))),e(Qe()),f&&e(qe()),b&&e(Ze())}}),[g,m,h,e,gr,O,Xr,Zr,$r,ea,ta,x,Er,Vn,xr,Nr,f,b]),Object(a.useEffect)((function(){if(V)I("rgb(255, 0, 0)");else for(var e=function(){var e=setInterval((function(){I("rgb(93, 188, 210)"===G?"rgb(255, 255, 255)":"rgb(255, 255, 255)"===G?"#f9c124":"rgb(93, 188, 210)")}),500);return{v:function(){clearInterval(e)}}};0===p;){var t=e();if("object"===typeof t)return t.v}}),[p,G,V]);var na=Object(a.useCallback)((function(e,t,n){var r=document.getElementsByClassName("deck-tooltip")[0];if(e){F||(L(!0),document.addEventListener("touchstart",(function(){return r.style.opacity=0})));var a=e.ARREST_DATE,i=e.LAW_CAT_CD,c=e.OFNS_DESC,o=e.PD_DESC,s=e.AGE_GROUP,l=e.PERP_SEX,u=e.PERP_RACE;r.innerHTML="\n<p><strong>Date of Arrest:</strong> ".concat(a,"</p>\n<p><strong>Category:</strong> ").concat("F"===i?"Felony":"M"===i?"Misdemeanor":"Violation","</p>\n<p><strong>Offense:</strong> ").concat(c,"</p>\n<p><strong>Offense Description:</strong> ").concat(o,"</p>\n<p><strong>Perpetrator's Age Group:</strong> ").concat(s,"</p>\n<p><strong>Perpetrator's Sex:</strong> ").concat("M"===l?"Male":"Female","</p>\n<p><strong>Perpetrator's Race:</strong> ").concat(u.toLowerCase().split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "),"</p>\n"),r.style.display="inline-block",r.style.background="#000",r.style.color="rgb(235, 235, 235)",r.style.fontSize="1rem",r.style.overflowWrap="break-word",r.style.lineHeight="1rem",r.style.maxWidth="10rem",r.style.opacity=.9,r.style.left=t+"px",r.style.top=n+"px"}else F&&L(!1),r.style.opacity=0}),[F]),ra=Object(a.useCallback)((function(t,n,r,a){r?(e(Re(t.data)),e(De(t.data))):(a&&e(He()),e(Ae(t.data,n)),e(De(t.data)))}),[e]),aa=Object(a.useCallback)((function(t,n){bt&&(bt.postMessage(t),bt.onmessage=function(t){var r=JSON.parse(t.data),a=JSON.parse(r.data),i=a.chunkArr,c=a.firstMessage,o=a.lastMessage;e(Ee(i.length)),ra({year:r.year,data:i},n,c,o)})}),[ra,bt,e]);return Object(a.useEffect)((function(){je&&Qt&&(Zt(Object.values(je),Object.values(Qt))||Kr())}),[je,Qt,Kr,e,i]),Object(a.useEffect)((function(){if(!mt){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const dataSent = e.data;\n\n        const loadData = dataSent.loadData;\n        const filteredDataChunks = dataSent.filteredDataChunks;\n        const currentFilters = dataSent.currentFilters;\n\n        const filterArrIncluded = (\n          x,\n          filterExactName,\n          filterGeneralName\n        ) => {\n          if (x !== filterExactName) {\n            if (currentFilters[filterGeneralName]) {\n              if (currentFilters[filterGeneralName].length > 0) {\n                return currentFilters[filterGeneralName].includes(x);\n              } else {\n                return true;\n              }\n            } else {\n              return true;\n            }\n          } else {\n            return false;\n          }\n        };\n\n        const dataReducerFunction = (\n          chunk,\n          filterExactName,\n          filterGeneralName\n        ) => {\n          return chunk.reduce((acc, curr) => {\n            const exactName = curr[filterExactName];\n\n            if (filterArrIncluded(exactName, filterGeneralName)) {\n              acc.push(exactName);\n            }\n\n            return acc;\n          }, []);\n        };\n\n        const boroughLoadDataReducerFunction = (\n          chunk,\n          filterExactName\n        ) => {\n          return chunk.reduce((acc, curr) => {\n            const currentName = (x) => {\n              if (\n                x[filterExactName] === "K" &&\n                Number(x.Latitude) > 40.73912\n              ) {\n                return "B";\n              } else if (\n                x[filterExactName] === "M" &&\n                Number(x.Longitude) > -73.920961 &&\n                Number(x.Latitude) < 40.800709\n              ) {\n                return "Q";\n              } else if (\n                x[filterExactName] === "B" &&\n                Number(x.Latitude) < 40.697465\n              ) {\n                return "K";\n              } else if (\n                x[filterExactName] === "Q" &&\n                Number(x.Longitude) < -73.962745\n              ) {\n                return "M";\n              } else if (\n                x[filterExactName] === "Q" &&\n                Number(x.Longitude) < -73.878559 &&\n                Number(x.Latitude) > 40.787907\n              ) {\n                return "B";\n              } else {\n                return x[filterExactName];\n              }\n            };\n\n            const currentPushItem = currentName(curr);\n\n            if (filterArrIncluded(currentPushItem)) {\n              acc.push(currentPushItem);\n            }\n\n            return acc;\n          }, []);\n        };\n\n        const filteredDataChunksReducerFunction = (\n          filterExactName,\n          filterGeneralName\n        ) => {\n          const yearsArr = filteredDataChunks.map((x) => {\n            const date = x[5][filterExactName];\n\n            return Number(date.substring(date.length - 4, date.length));\n          });\n\n          const dateFilterArrIncluded = (item, index, generalName) => {\n            if (item !== filterExactName) {\n              if (currentFilters[generalName]) {\n                if (currentFilters[generalName].length > 0) {\n                  if (\n                    currentFilters[generalName].includes(\n                      yearsArr[index]\n                    )\n                  ) {\n                    return true;\n                  } else {\n                    return false;\n                  }\n                } else {\n                  return true;\n                }\n              } else {\n                return false;\n              }\n            } else {\n              return false;\n            }\n          };\n\n          return filteredDataChunks\n            .map((x, i) => [\n              ...new Set(\n                x.reduce((acc, curr) => {\n                  const exactName = curr[filterExactName];\n\n                  if (filterGeneralName === "category") {\n                    if (\n                      filterArrIncluded(\n                        exactName,\n                        filterExactName,\n                        filterGeneralName\n                      )\n                    ) {\n                      acc.push(exactName);\n                    }\n                  } else {\n                    if (\n                      dateFilterArrIncluded(\n                        exactName,\n                        i,\n                        filterGeneralName\n                      )\n                    ) {\n                      acc.push(exactName);\n                    }\n                  }\n\n                  return acc;\n                }, [])\n              ),\n            ])\n            .flat();\n        };\n\n        postMessage(\n          JSON.stringify({\n            ageGroup: dataReducerFunction(loadData, "AGE_GROUP"),\n            raceArr: dataReducerFunction(loadData, "PERP_RACE"),\n            boroughArr: boroughLoadDataReducerFunction(\n              loadData,\n              "ARREST_BORO"\n            ),\n            offenseDescriptionArr: dataReducerFunction(\n              loadData,\n              "OFNS_DESC"\n            ),\n            filteredArrestCategory: dataReducerFunction(\n              filteredDataChunks[0],\n              "LAW_CAT_CD",\n              "category"\n            ),\n            filteredAgeGroup: dataReducerFunction(\n              filteredDataChunks[0],\n              "AGE_GROUP",\n              "age"\n            ),\n            filteredSexArr: dataReducerFunction(\n              filteredDataChunks[0],\n              "PERP_SEX",\n              "sex"\n            ),\n            filteredRaceArr: dataReducerFunction(\n              filteredDataChunks[0],\n              "PERP_RACE",\n              "race"\n            ),\n            filteredBoroughArr: boroughLoadDataReducerFunction(\n              filteredDataChunks[0],\n              "ARREST_BORO",\n              "borough"\n            ),\n            filteredOffenseDescriptionArr: dataReducerFunction(\n              filteredDataChunks[0],\n              "OFNS_DESC",\n              "offense"\n            ),\n            filteredUniqueCategory: filteredDataChunksReducerFunction(\n              "LAW_CAT_CD",\n              "category"\n            ),\n          })\n        );\n      };'],{type:"application/javascript"})),t=new Worker(e);ht(t)}}),[mt]),Object(a.useEffect)((function(){if(!At){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const dataSent = e.data;\n\n        const chunk = dataSent.chunk;\n\n        const filteredDataChunksReducerFunction = (\n          filterGeneralName,\n          filterExactName\n        ) => {\n          return chunk.map((item) =>\n            item.reduce((acc, curr) => {\n              const formatName = (x) => {\n                return {\n                  date: x["ARREST_DATE"],\n                  [filterGeneralName]:\n                    filterGeneralName === "category"\n                      ? x[filterExactName] === "F"\n                        ? "Felony"\n                        : x[filterExactName] === "M"\n                        ? "Misdemeanor"\n                        : "Violation"\n                      : filterGeneralName === "sex"\n                      ? x[filterExactName] === "F"\n                        ? "Female"\n                        : "Male"\n                      : x[filterExactName],\n                };\n              };\n\n              const notNameMatchFilter = (x) =>\n                x.date !== "ARREST_DATE" &&\n                x[filterGeneralName] !== filterExactName;\n\n              const newPushItem = formatName(curr);\n\n              if (notNameMatchFilter(newPushItem)) {\n                acc.push(newPushItem);\n              }\n\n              return acc;\n            }, [])\n          );\n        };\n\n        postMessage(\n          JSON.stringify({\n            age_group: filteredDataChunksReducerFunction(\n              "age_group",\n              "AGE_GROUP"\n            ),\n            borough: filteredDataChunksReducerFunction(\n              "borough",\n              "ARREST_BORO"\n            ),\n            category: filteredDataChunksReducerFunction(\n              "category",\n              "LAW_CAT_CD"\n            ),\n            sex: filteredDataChunksReducerFunction("sex", "PERP_SEX"),\n            race: filteredDataChunksReducerFunction(\n              "race",\n              "PERP_RACE"\n            ),\n          })\n        );\n      }'],{type:"application/javascript"})),t=new Worker(e);Rt(t)}}),[At]),Object(a.useEffect)((function(){if(!Dt){var e=new Pe;Tt(e)}}),[Dt]),Object(a.useEffect)((function(){if(!yt){var e=URL.createObjectURL(new Blob(['self.onmessage = (e) => {\n        const hasNumber = (input) => {\n          return /[0-9]/.test(input); \n        };\n\n        const dataSent = e.data;\n\n        const ageGroup = dataSent.ageGroup;\n        const raceArr = dataSent.raceArr;\n        const boroughArr = dataSent.boroughArr;\n        const offenseDescriptionArr = dataSent.offenseDescriptionArr;\n        const filteredAgeGroup = dataSent.filteredAgeGroup;\n        const filteredSexArr = dataSent.filteredSexArr;\n        const filteredRaceArr = dataSent.filteredRaceArr;\n        const filteredBoroughArr = dataSent.filteredBoroughArr;\n        const filteredOffenseDescriptionArr =\n          dataSent.filteredOffenseDescriptionArr;\n\n        const uniqueValuesReducerFunction = (\n          arrName,\n          categoryName,\n          arr\n        ) =>\n          arr\n            ? [...new Set(arr)]\n                .filter((x) => x !== categoryName)\n                .sort((a, b) => {\n                  if (\n                    arrName === "filteredAgeGroupData" ||\n                    arrName === "ageGroupData"\n                  ) {\n                    const first = hasNumber(a)\n                      ? Number(\n                          a.split(a[0] === "<" ? "<" : "-")[\n                            a[0] === "<" ? 1 : 0\n                          ]\n                        )\n                      : null;\n                    const second = hasNumber(b)\n                      ? Number(\n                          b.split(b[0] === "<" ? "<" : "-")[\n                            b[0] === "<" ? 1 : 0\n                          ]\n                        )\n                      : null;\n\n                    return first - second;\n                  } else {\n                    // Sort in increasing order\n                    return a - b;\n                  }\n                })\n            : [];\n\n        postMessage(\n          JSON.stringify({\n            ageGroupData: uniqueValuesReducerFunction(\n              "ageGroupData",\n              "AGE_GROUP",\n              ageGroup\n            ),\n            raceUniqueValues: uniqueValuesReducerFunction(\n              "raceUniqueValues",\n              "PERP_RACE",\n              raceArr\n            ),\n            boroughUniqueValues: uniqueValuesReducerFunction(\n              "boroughUniqueValues",\n              "ARREST_BORO",\n              boroughArr\n            ),\n            offenseDescriptionArr: uniqueValuesReducerFunction(\n              "offenseDescriptionArr",\n              "OFNS_DESC",\n              offenseDescriptionArr\n            ),\n            filteredAgeGroupData: uniqueValuesReducerFunction(\n              "filteredAgeGroupData",\n              "AGE_GROUP",\n              filteredAgeGroup\n            ),\n            filteredSexUniqueValues: uniqueValuesReducerFunction(\n              "filteredSexUniqueValues",\n              "PERP_SEX",\n              filteredSexArr\n            ),\n            filteredRaceUniqueValues: uniqueValuesReducerFunction(\n              "filteredRaceUniqueValues",\n              "PERP_RACE",\n              filteredRaceArr\n            ),\n            filteredBoroughUniqueValues: uniqueValuesReducerFunction(\n              "filteredBoroughUniqueValues",\n              "ARREST_BORO",\n              filteredBoroughArr\n            ),\n            filteredOffenseDescriptionUniqueValues: uniqueValuesReducerFunction(\n              "filteredOffenseDescriptionUniqueValues",\n              "OFNS_DESC",\n              filteredOffenseDescriptionArr\n            ),\n          })\n        );\n      };'],{type:"application/javascript"})),t=new Worker(e);_t(t)}}),[yt]),Object(a.useEffect)((function(){if(!bt){var e=URL.createObjectURL(new Blob(["(",function(){var e="";e=new WebSocket("wss://nypd-arrest-map.herokuapp.com"),onmessage=function(t){var n=t.data;1===e.readyState&&e.send(n),e.onopen=function(){setInterval((function(){e.send(".")}),55e3),e.send(n)},e.onmessage=function(e){var t=e.data;t&&postMessage(JSON.stringify({year:n,data:t}))}}}.toString(),")()"],{type:"application/javascript"})),t=new Worker(e);pt(t)}}),[bt]),Object(a.useEffect)((function(){bt&&(0===t.length?0===lt.length&&(he?Ye&&(ut([Number(Wt)]),aa(Number(Wt),i.length)):(ut([Number(Wt)]),aa(Number(Wt),i.length))):lt.length>0&&0===t.length&&(aa(lt[0],i.length),ut([])))}),[Wt,bt,aa,lt,i.length,Ye,he,t.length,p]),Object(a.useEffect)((function(){p>9e4&&y&&_&&v&&N&&R&&y.length>0&&_.length>0&&v.length>0&&N.length>0&&R.length>0&&(Ft||Mt(!0))}),[p,Ft,y,_,v,N,R]),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"mobile_landscape_block",style:{display:he?Ye?"none":"flex":"none"},children:[Object(r.jsx)(Xe.a,{}),Object(r.jsx)("p",{children:"NYPD Arrest Map is available only for desktop mode or mobile portrait mode."})]}),0!==qt.current.length&&y&&0!==y.length&&_&&0!==_.length&&v&&0!==v.length&&N&&0!==N.length&&R&&0!==R.length?null:Object(r.jsx)(ye,{countUp:Kt,loaderColor:G,mapError:V,applyingFiltersProgressRef:Yt}),W.active&&W.year?Object(r.jsx)(Ne,{modalActive:W,changeModalActive:H}):null,Object(r.jsxs)(Oe.a,{className:"nypd_arrest_map_container",style:{opacity:0!==qt.current.length&&y&&0!==y.length&&_&&0!==_.length&&v&&0!==v.length&&N&&0!==N.length&&R&&0!==R.length?1:0},children:[Object(r.jsx)(M,{loadData:t,raceUniqueValues:Br,boroughUniqueValues:Yr,offenseDescriptionUniqueValues:Qr,ageGroupData:wr,setFilters:function(t,n,r,a,i,c,o){Dt&&(0!==Yt.current&&(Yt.current=0),"trends"===ae&&ie("overview"),Vt(""),Gt(!1),e(Je()),Dt.postMessage({category:t,offense:n,age:r,race:a,sex:i,borough:c,suppliedData:o}),Dt.onmessage=function(o){var s=o.data.assignFilteredData;s&&(e(Ce(s)),ge({category:t,offense:n,age:r,race:a,sex:i,borough:c}),e(Te()))},setTimeout((function(){return nt(!1)}),1e3),setTimeout((function(){return ct(!1)}),1e3))},changeLaddaLoading:nt,laddaLoading:tt,resetLaddaLoading:it,changeResetLaddaLoading:ct,menuClicked:Pt,changeMenuClicked:Gt,collapseOpen:Ut,changeCollapseOpen:Vt,layersRef:qt,footerMenuActive:ue,isMobileOrTablet:he,isTablet:xe,currentFilters:je,isSame:Zt}),Object(r.jsx)(l.a,{initialViewState:{longitude:-73.935242,latitude:40.73061,zoom:window.innerWidth<1200?9:11,minZoom:9,pitch:0,bearing:0},ref:zt,layers:qt.current,pickingRadius:20,controller:!0,onLoad:function(){return T(!0)},onError:function(){return q(!0)},onHover:function(e){var t=e.object,n=e.x,r=e.y;return ue?null:na(t,n,r)},useDevicePixels:!1,children:Object(r.jsx)(u.a,{mapStyle:"mapbox://styles/mapbox/dark-v9",preventStyleDiffing:!0,mapboxApiAccessToken:"pk.eyJ1IjoibGVpZ2hoYWxsaWRheSIsImEiOiJjanVma3E4aGMwZjk0NDVwZzFpcG84M3cwIn0.GrI8s893TPtJfjHzpMMP_A"})}),D?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ze,{applyingFiltersProgressRef:Yt}),Object(r.jsx)(oe,{isSame:Zt,mapVisible:Ft,loadData:t,tooltipVisible:F,resetFilters:b,filteredArrestCategory:hn,filteredAgeGroupData:gr,filteredRaceUniqueValues:xr,filteredSexUniqueValues:Nr,filteredBoroughUniqueValues:Er,filteredOffenseDescriptionUniqueValues:kr,filteredUniqueCategory:Vn,filteredAgeGroup:_n,filteredRaceArr:Tn,filteredSexArr:Rn,filteredBoroughArr:Mn,filteredOffenseDescriptionArr:Gn,usePrevious:Ht,currentFilters:je,filteredTimelineAgeGroupData:Wn,filteredTimelineBoroughData:Kn,filteredTimelineCategoryData:er,filteredTimelineSexData:ar,filteredTimelineRaceData:sr,graphOption:ae,changeGraphOption:ie,layersRef:qt,footerMenuActive:ue,changeFooterMenuActive:de,isMobileOrTablet:he,isMediumLaptop:_e,isTinyPhone:me,useOnClickOutside:function(e,t){Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}))}})]}):null]})]})},et=n(201);n(349).config();var tt=Object(et.a)(new function(){return new Worker(n.p+"static/js/store.worker.30a9de6f.worker.js")},{loadDataReducer:{data:[]},filteredDataReducer:{changed:!1},filteredDataChunksReducer:{data:[]},newYearFinishedLoadingReducer:{finished:!1},ageFilterReducer:{age:[]},boroughFilterReducer:{borough:[]},categoryFilterReducer:{category:[]},offenseFilterReducer:{offense:[]},raceFilterReducer:{race:[]},sexFilterReducer:{sex:[]},ageTimelineColumnsReducer:{columns:[]},boroughTimelineColumnsReducer:{columns:[]},categoryTimelineColumnsReducer:{columns:[]},raceTimelineColumnsReducer:{columns:[]},sexTimelineColumnsReducer:{columns:[]},ageGroupTimelineGraphDataReducer:{data:[]},boroughTimelineGraphDataReducer:{data:[]},categoryTimelineGraphDataReducer:{data:[]},genderTimelineGraphDataReducer:{data:[]},raceTimelineGraphDataReducer:{data:[]},totalCountReducer:{total:0},applyingFiltersReducer:{filters:!1},resetFiltersReducer:{reset:!1},trendsAvailableReducer:{available:!1}});c.a.render(Object(r.jsx)(A.a,{store:tt,children:Object(r.jsx)($e,{})}),document.getElementById("root"))}},[[352,1,2]]]);
//# sourceMappingURL=main.efb45bb7.chunk.js.map