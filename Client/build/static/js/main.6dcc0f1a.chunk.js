/*! For license information please see main.6dcc0f1a.chunk.js.LICENSE.txt */
(this["webpackJsonpnypd-arrest-map"]=this["webpackJsonpnypd-arrest-map"]||[]).push([[0],{126:function(e,t){},158:function(e,t,n){!function(t){var n=0,r=!1,a=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return a=!0}});window.addEventListener("test",null,o)}catch(m){}var l=function(e){var t=e.target,r=window.innerWidth/window.document.documentElement.clientWidth;if(!(e.touches.length>1||1!==r)){for(;t!==document.body&&t!==document;){var a=window.getComputedStyle(t);if(!a)break;if("INPUT"===t.nodeName&&"range"===t.getAttribute("type"))return;var o=a.getPropertyValue("-webkit-overflow-scrolling"),l=a.getPropertyValue("overflow-y"),i=parseInt(a.getPropertyValue("height"),10),c="touch"===o&&("auto"===l||"scroll"===l),u=t.scrollHeight>t.offsetHeight;if(c&&u){var s=e.touches?e.touches[0].screenY:e.screenY,f=n<=s&&0===t.scrollTop,m=n>=s&&t.scrollHeight-t.scrollTop===i;return void((f||m)&&e.preventDefault())}t=t.parentNode}e.preventDefault()}},i=function(e){n=e.touches?e.touches[0].screenY:e.screenY},c=function(){window.addEventListener("touchstart",i,!!a&&{passive:!1}),window.addEventListener("touchmove",l,!!a&&{passive:!1}),r=!0},u=document.createElement("div");document.documentElement.appendChild(u),u.style.WebkitOverflowScrolling="touch";var s="getComputedStyle"in window&&"touch"===window.getComputedStyle(u)["-webkit-overflow-scrolling"];document.documentElement.removeChild(u),s&&c();var f={enable:c,disable:function(){window.removeEventListener("touchstart",i,!1),window.removeEventListener("touchmove",l,!1),r=!1},isEnabled:function(){return r}};e.exports&&(e.exports=f),"function"===typeof t.define?(0,t.define)("iNoBounce",[],(function(){return f})):t.iNoBounce=f}(this)},180:function(e,t,n){e.exports=n(301)},185:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},239:function(e,t,n){},293:function(e,t){},301:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(42),l=n.n(o),i=(n(185),n(13)),c=n(1),u=n(154),s=n(8),f=n(317),m=n(166),d=n(320),p=(n(187),n(188),n(156)),g=n(102),b=n(40),E=n(67),h=n.n(E),_=n(115),y=n(112),v=n.n(y),O=(n(207),n(208),n(209),n(122)),D=n(157),A=(n(210),n(211),function(){return a.a.createElement(D.a,{trigger:a.a.createElement("div",{className:"info_circle_container"},a.a.createElement(g.b,{color:"rgb(255, 255, 255)",className:"info_button"})),modal:!0},(function(e){return a.a.createElement("div",{className:"modal"},a.a.createElement("button",{className:"close",onClick:e},"\xd7"),a.a.createElement("div",{className:"header"},"About NYPD Arrest Map"),a.a.createElement("div",{className:"content"},"NYPD Arrest Map is a data visualization and analysis tool that utilizes the"," ",a.a.createElement("a",{href:"https://data.cityofnewyork.us/Public-Safety/NYPD-Arrest-Data-Year-to-Date-/uip8-fykc",target:"_blank",rel:"noopener noreferrer"},"NYPD Arrest Data (Year to Date)")," ","and"," ",a.a.createElement("a",{href:"https://data.cityofnewyork.us/Public-Safety/NYPD-Arrests-Data-Historic-/8h9b-rp9u",target:"_blank",rel:"noopener noreferrer"},"NYPD Arrests Data (Historic)")," ","NYC Open Data datasets. These datasets are updated quarterly and reviewed by the Office of Management Analysis and Planning before being posted on the New York Police Department website. The data reflected here will be updated shortly after such changes.",a.a.createElement("br",null),a.a.createElement("br",null),"Occasionally, arrests in the NYPD datasets will be erroneously attributed to one borough, while having the longitude and latitude of another. These have been corrected in the NYPD Arrest Map in favor of the arrest's geocoordinates.",a.a.createElement("br",null),a.a.createElement("br",null),'As stated by the NYPD, "each record represents an arrest effected in NYC by the NYPD and includes information about the type of crime, the location and time of enforcement. In addition, information related to suspect demographics is also included. This data can be used by the public to explore the nature of police enforcement activity."',a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("p",null,"Have any questions? Comments? Contact me via GitHub or LinkedIn"),a.a.createElement("div",{className:"pop_up_icons_container"},a.a.createElement("a",{href:"https://github.com/amamenko/nypd-arrest-map-full-stack",target:"_blank",rel:"noopener noreferrer"},a.a.createElement(O.a,{color:"#000"})),a.a.createElement("a",{href:"https://www.linkedin.com/in/avraham-mamenko-0599831b8/",target:"_blank",rel:"noopener noreferrer"},a.a.createElement(O.b,{color:"#000"})))))}))}),N=function(e){var t=e.loadData,n=e.raceUniqueValues,o=e.boroughUniqueValues,l=e.ageGroupData,c=e.offenseDescriptionUniqueValues,u=e.setFilters,f=e.initialScreenWidth,m=e.currentScreenWidth,d=e.pointClicked,E=e.changeLaddaLoading,O=e.laddaLoading,D=e.loadedYears,N=e.filteredData,R=e.handleDownloadYear,S=e.yearFilter,C=e.changeYearFilter,T=e.categoryFilter,k=e.changeCategoryFilter,w=e.offenseFilter,j=e.changeOffenseFilter,x=e.ageFilter,B=e.changeAgeFilter,Y=e.raceFilter,L=e.changeRaceFilter,P=e.sexFilter,F=e.changeSexFilter,M=e.boroughFilter,U=e.changeBoroughFilter,q=Object(r.useRef)(null),V=document.getElementsByClassName("bm-burger-button"),G=document.getElementsByClassName("mapboxgl-ctrl-bottom-left"),W=Object(r.useState)(!0),z=Object(s.a)(W,2),I=z[0],Q=z[1],H=Object(r.useState)(!1),K=Object(s.a)(H,2),J=K[0],X=K[1],Z=Object(r.useState)(""),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ne=function(e){T.includes(e)?k(T.filter((function(t){return t!==e}))):k([].concat(Object(i.a)(T),[e]))},re=function(e){P.includes(e)?F(P.filter((function(t){return t!==e}))):F([].concat(Object(i.a)(P),[e]))};return Object(r.useEffect)((function(){var e=document.getElementById("tippy-4");m?m<768&&e&&(e.style.cssText=d?"z-index: -1 !important;":"z-index: 0 !important;"):f<768&&e&&(e.style.cssText=d?"z-index: -1 !important;":"z-index: 0 !important;")}),[d,m,f]),a.a.createElement("div",{className:"navigation_bar_container"},a.a.createElement(_.a,{content:a.a.createElement("div",{className:"overview_tooltip_content",style:{minWidth:q.current&&q.current.clientWidth,maxWidth:q.current&&q.current.clientWidth}},a.a.createElement("p",{style:{color:"rgb(166, 166, 166)"}},"Data Last Updated: July 22, 2020"),a.a.createElement("p",null,"Showing Arrest Data for"," ",a.a.createElement("strong",null,D.sort().join(", "))),a.a.createElement("p",null,"Total Number of Arrests Shown: ",a.a.createElement("br",null),a.a.createElement("strong",null,N.flat().length.toLocaleString())," of ",a.a.createElement("strong",null,t.length.toLocaleString()))),visible:"object"===typeof t&&t.flat().length>7e4,allowHTML:!0,reference:m?m>=767?q.current:G[0]:f>=767?q.current:G[0],className:"overview_tooltip",placement:"bottom-start"}),a.a.createElement(_.a,{content:a.a.createElement("div",{className:"map_legend_container",style:{minWidth:q.current&&q.current.clientWidth,maxWidth:q.current&&q.current.clientWidth}},a.a.createElement("p",null,"Map Legend"),a.a.createElement("div",{className:"map_legend_items_container"},a.a.createElement("div",{className:"map_legend_element"},a.a.createElement(b.c,{color:"rgb(255, 0, 0)"}),a.a.createElement("p",null,"Felony")),a.a.createElement("div",{className:"map_legend_element"},a.a.createElement(b.c,{color:"rgb(255, 116, 0)"}),a.a.createElement("p",null,"Misdemeanor")),a.a.createElement("div",{className:"map_legend_element"},a.a.createElement(b.c,{color:"rgb(255, 193, 0)"}),a.a.createElement("p",null,"Violation")))),visible:"object"===typeof t&&t.flat().length>7e4,allowHTML:!0,reference:G[0],className:"overview_tooltip legend_tooltip",placement:"top-start"}),a.a.createElement("div",{className:"nypd_arrest_map_logo_container",ref:q},a.a.createElement("a",{href:"/"},a.a.createElement("p",null,"NYPD"),a.a.createElement("p",null,"Arrest"),a.a.createElement("p",null,"Map"))),a.a.createElement(_.a,{content:"Click here to set data filters",visible:I&&"object"===typeof t&&t.flat().length>7e4,reference:V[0],className:"burger_tooltip",placement:"bottom-end",onClickOutside:function(){return Q(!1)}}),a.a.createElement(A,null),a.a.createElement(p.slide,{right:!0,className:"navbar_nav_menu",customBurgerIcon:a.a.createElement(g.a,{color:"rgb(93, 188, 210)"}),onOpen:function(){J?X(!1):(X(!0),Q(!1))},onClose:function(){return X(!1)},isOpen:J},a.a.createElement(h.a,{trigger:a.a.createElement("div",{className:"nav_item"},a.a.createElement("p",{className:"filter_identifier"},"Filter By Year"),a.a.createElement(b.e,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return te("year")},onTriggerClosing:function(){return te("")},open:"year"===ee,className:"nav_item"},a.a.createElement("div",{className:"nav_item_content_container"},function(){for(var e=[],t=2006;t<Number((new Date).getFullYear()+1);t++)e.push(t);return e}().map((function(e,t){return a.a.createElement("p",{key:t,style:{color:D.includes(e)?"#000":"rgb(166, 166, 166)"},className:D.includes(e)?null:"unfetched_year_button",onClick:function(){D.includes(e)?function(e){S.includes(e)?C(S.filter((function(t){return t!==e}))):C([].concat(Object(i.a)(S),[e]))}(e):(R(e),C([].concat(Object(i.a)(S),[e])))}},a.a.createElement("label",null,D.includes(e)?a.a.createElement("input",{name:"my-checkbox",type:"checkbox",defaultChecked:D.includes(e)}):a.a.createElement(b.d,{className:"year_download_icon"}),D.includes(e)?e:"".concat(e," (Click to load data)")))})))),a.a.createElement(h.a,{trigger:a.a.createElement("div",{className:"nav_item"},a.a.createElement("p",{className:"filter_identifier"},"Filter By Category"),a.a.createElement(b.e,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return te("category")},onTriggerClosing:function(){return te("")},open:"category"===ee,className:"nav_item"},a.a.createElement("div",{className:"nav_item_content_container"},a.a.createElement("p",null,a.a.createElement("label",null,a.a.createElement("input",{name:"my-checkbox",type:"checkbox",onClick:function(){return ne("F")}}),"Felony")),a.a.createElement("p",null,a.a.createElement("label",null,a.a.createElement("input",{name:"my-checkbox",type:"checkbox",onClick:function(){return ne("M")}}),"Misdemeanor")),a.a.createElement("p",null,a.a.createElement("label",null,a.a.createElement("input",{name:"my-checkbox",type:"checkbox",onClick:function(){return ne("V")}}),"Violation")))),a.a.createElement(h.a,{trigger:a.a.createElement("div",{className:"nav_item"},a.a.createElement("p",{className:"filter_identifier"},"Filter By Offense"),a.a.createElement(b.e,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return te("description")},onTriggerClosing:function(){return te("")},open:"description"===ee,className:"nav_item"},a.a.createElement("div",{className:"nav_item_content_container"},c.map((function(e,t){return!e||e.includes("OTHER STATE LAWS")&&e.includes("(")?null:a.a.createElement("p",{key:t},a.a.createElement("label",null,a.a.createElement("input",{name:"my-checkbox",type:"checkbox",onClick:function(){return t=e,void(w.includes(t)?j(w.filter((function(e){return e!==t}))):j([].concat(Object(i.a)(w),[t])));var t}}),e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")))})))),a.a.createElement(h.a,{trigger:a.a.createElement("div",{className:"nav_item"},a.a.createElement("p",{className:"filter_identifier"},"Filter By Age Group"),a.a.createElement(b.e,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return te("age")},onTriggerClosing:function(){return te("")},open:"age"===ee,className:"nav_item"},a.a.createElement("div",{className:"nav_item_content_container"},l.map((function(e,t){return a.a.createElement("p",{key:t},a.a.createElement("label",null,a.a.createElement("input",{name:"my-checkbox",type:"checkbox",onClick:function(){return function(e){x.includes(e)?B(x.filter((function(t){return t!==e}))):B([].concat(Object(i.a)(x),[e]))}(e)}}),"65"===e?"65+":e))})))),a.a.createElement(h.a,{trigger:a.a.createElement("div",{className:"nav_item"},a.a.createElement("p",{className:"filter_identifier"},"Filter By Race"),a.a.createElement(b.e,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return te("race")},onTriggerClosing:function(){return te("")},open:"race"===ee,className:"nav_item"},a.a.createElement("div",{className:"nav_item_content_container"},n.map((function(e,t){return e?a.a.createElement("p",{key:t},a.a.createElement("label",null,a.a.createElement("input",{name:"my-checkbox",type:"checkbox",onClick:function(){return function(e){Y.includes(e)?L(Y.filter((function(t){return t!==e}))):L([].concat(Object(i.a)(Y),[e]))}(e)}}),e&&e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/"))):null})))),a.a.createElement(h.a,{trigger:a.a.createElement("div",{className:"nav_item"},a.a.createElement("p",{className:"filter_identifier"},"Filter By Sex"),a.a.createElement(b.e,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return te("sex")},onTriggerClosing:function(){return te("")},open:"sex"===ee,className:"nav_item"},a.a.createElement("div",{className:"nav_item_content_container"},a.a.createElement("p",null,a.a.createElement("label",null,a.a.createElement("input",{name:"my-checkbox",type:"checkbox",onClick:function(){return re("F")}}),"Female")),a.a.createElement("p",null,a.a.createElement("label",null,a.a.createElement("input",{name:"my-checkbox",type:"checkbox",onClick:function(){return re("M")}}),"Male")))),a.a.createElement(h.a,{trigger:a.a.createElement("div",{className:"nav_item"},a.a.createElement("p",{className:"filter_identifier"},"Filter By Borough"),a.a.createElement(b.e,{fill:"rgb(0, 109, 129)"})),onTriggerOpening:function(){return te("borough")},onTriggerClosing:function(){return te("")},open:"borough"===ee,className:"nav_item"},a.a.createElement("div",{className:"nav_item_content_container"},o.map((function(e,t){return a.a.createElement("p",{key:t},a.a.createElement("label",null,a.a.createElement("input",{name:"my-checkbox",type:"checkbox",onClick:function(){return function(e){M.includes(e)?U(M.filter((function(t){return t!==e}))):U([].concat(Object(i.a)(M),[e]))}(e)}}),"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"))})))),a.a.createElement("span",{className:"spacer"}),a.a.createElement(v.a,{loading:O,className:"apply_filters_button",onClick:function(){E(!0),u(S,T,w,x,Y,P,M)},"data-color":"blue","data-size":y.XL,"data-style":y.EXPAND_LEFT,"data-spinner-size":30,"data-spinner-color":"#fff","data-spinner-lines":12},O?"APPLYING FILTERS":"APPLY FILTERS")))},R=n(158),S=n.n(R),C=n(159),T=n.n(C),k=(n(238),n(239),n(240),n(31)),w=n(32),j=n.n(w),x=function(e){var t=e.filteredArrestCategory,n=e.graphOption;return a.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===n?"block":"none"}},a.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Category"),a.a.createElement("div",{className:"bottom_info_pie_container"},a.a.createElement(k.a,{chartType:"PieChart",loader:a.a.createElement(j.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Category","Number of Arrests"],["Felony",t.filter((function(e){return"F"===e})).length],["Misdemeanor",t.filter((function(e){return"M"===e})).length],["Violation",t.filter((function(e){return"F"!==e&&"M"!==e})).length]],options:{backgroundColor:"transparent"}})))},B=function(e){var t=e.filteredAgeGroupData,n=e.filteredAgeGroup,r=e.graphOption;return a.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===r?"block":"none"}},a.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Age Group"),a.a.createElement("div",{className:"bottom_info_pie_container"},a.a.createElement(k.a,{chartType:"PieChart",loader:a.a.createElement(j.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Age Group","Number of Arrests"]].concat(t.map((function(e){return["65"===e?"65+":e,n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},Y=function(e){var t=e.filteredRaceUniqueValues,n=e.filteredRaceArr,r=e.graphOption;return a.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===r?"block":"none"}},a.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Race"),a.a.createElement("div",{className:"bottom_info_pie_container"},a.a.createElement(k.a,{chartType:"PieChart",loader:a.a.createElement(j.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Race","Number of Arrests"]].concat(t.map((function(e){return[e?e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/"):null,n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},L=function(e){var t=e.filteredSexUniqueValues,n=e.filteredSexArr,r=e.graphOption;return a.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===r?"block":"none"}},a.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Sex"),a.a.createElement("div",{className:"bottom_info_pie_container"},a.a.createElement(k.a,{chartType:"PieChart",loader:a.a.createElement(j.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Sex","Number of Arrests"]].concat(t.map((function(e){return["M"===e?"Male":"Female",n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},P=function(e){var t=e.filteredBoroughUniqueValues,n=e.filteredBoroughArr,r=e.graphOption;return a.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===r?"block":"none"}},a.a.createElement("p",{className:"bottom_info_section_title"},"Breakdown by Borough"),a.a.createElement("div",{className:"bottom_info_pie_container"},a.a.createElement(k.a,{chartType:"PieChart",loader:a.a.createElement(j.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Borough","Number of Arrests"]].concat(t.map((function(e){return["B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown",n.filter((function(t){return t===e})).length]}))),options:{backgroundColor:"transparent"}})))},F=function(e){var t=e.filteredOffenseDescriptionArr,n=e.filteredOffenseDescriptionUniqueValues,r=e.graphOption,o=t.length>0&&n.length>0?n.map((function(e){return[e,t.filter((function(t){return t===e})).length]})).sort((function(e,t){return e[1]>t[1]?1:-1})):null;return a.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"overview"===r?"block":"none"}},o?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"bottom_info_section_title"},"Top 5 Offenses"),a.a.createElement("div",{className:"bottom_info_pie_container"},a.a.createElement(k.a,{chartType:"BarChart",loader:a.a.createElement(j.a,{size:100,color:"rgb(93, 188, 210)"}),data:[["Offense Description","Number of Arrests"]].concat(o?o.slice(o.length-5,o.length).sort((function(e,t){return e[1]>t[1]?-1:1})):["UNKNOWN",1]),options:{backgroundColor:"transparent",bar:{groupWidth:"95%"},legend:{position:"none"},width:600,chartArea:{width:"50%",height:"50%"}}}))):null)},M=n(35),U=n.n(M),q=function(e){var t=e.filteredUniqueDates,n=e.filteredTimelineAgeGroupData,r=e.filteredAgeGroupData,o=e.graphOption;return a.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"trends"===o?"block":"none"}},a.a.createElement("p",{className:"bottom_info_section_title"},"Age Group Trends"),a.a.createElement("div",{className:"bottom_info_pie_container"},a.a.createElement(k.a,{chartType:"LineChart",loader:a.a.createElement(j.a,{size:100,color:"rgb(93, 188, 210)"}),data:[[{type:"date",label:"Date"}].concat(r.map((function(e){return"65"===e?"65+":e})))].concat(t.length>0&&r.length>0?t[0].sort((function(e,t){return U()(e,"MM/DD/YYYY").isBefore(U()(t,"MM/DD/YYYY"))?-1:1})).map((function(e){var t=e?e.split("/"):null;return[t.length>0?new Date(t[2],t[0]-1,t[1]):null,r.map((function(t){return n[0].filter((function(n){return n.date===e&&n.age_group===t})).length}))].flat()})):[]),options:{backgroundColor:"transparent",width:500,chartArea:{width:"50%",height:"50%"}}})))},V=function(e){var t=e.filteredUniqueDates,n=e.filteredTimelineBoroughData,r=e.filteredBoroughUniqueValues,o=e.graphOption;return a.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"trends"===o?"block":"none"}},a.a.createElement("p",{className:"bottom_info_section_title"},"Borough Trends"),a.a.createElement("div",{className:"bottom_info_pie_container"},a.a.createElement(k.a,{chartType:"LineChart",loader:a.a.createElement(j.a,{size:100,color:"rgb(93, 188, 210)"}),data:[[{type:"date",label:"Date"}].concat(r.map((function(e){return"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"})))].concat(t.length>0&&r.length>0?t[0].sort((function(e,t){return U()(e,"MM/DD/YYYY").isBefore(U()(t,"MM/DD/YYYY"))?-1:1})).map((function(e){var t=e?e.split("/"):null;return[t.length>0?new Date(t[2],t[0]-1,t[1]):null,r.map((function(t){return n[0].filter((function(n){return n.date===e&&n.borough===t})).length}))].flat()})):[]),options:{backgroundColor:"transparent",width:500,chartArea:{width:"50%",height:"50%"}}})))},G=function(e){var t=e.filteredUniqueDates,n=e.filteredTimelineCategoryData,r=e.filteredUniqueCategory,o=e.graphOption,l=e.uniqueValues,i=r[0]?r[0].map((function(e){return"F"===e?"Felony":"M"===e?"Misdemeanor":"Violation"})).filter(l):[];return a.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"trends"===o?"block":"none"}},a.a.createElement("p",{className:"bottom_info_section_title"},"Category Trends"),a.a.createElement("div",{className:"bottom_info_pie_container"},a.a.createElement(k.a,{chartType:"LineChart",loader:a.a.createElement(j.a,{size:100,color:"rgb(93, 188, 210)"}),data:[[{type:"date",label:"Date"}].concat(i)].concat(t.length>0?t[0].sort((function(e,t){return U()(e,"MM/DD/YYYY").isBefore(U()(t,"MM/DD/YYYY"))?-1:1})).map((function(e){var t=e?e.split("/"):null;return[t.length>0?new Date(t[2],t[0]-1,t[1]):null,i.map((function(t){return n[0].filter((function(n){return n.date===e&&n.category===t})).length}))].flat()})):[]),options:{backgroundColor:"transparent",width:500,chartArea:{width:"50%",height:"50%"}}})))},W=function(e){var t=e.filteredUniqueDates,n=e.filteredTimelineSexData,r=e.filteredSexUniqueValues,o=e.graphOption,l=r.map((function(e){return"F"===e?"Female":"Male"}));return a.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"trends"===o?"block":"none"}},a.a.createElement("p",{className:"bottom_info_section_title"},"Gender Trends"),a.a.createElement("div",{className:"bottom_info_pie_container"},a.a.createElement(k.a,{chartType:"LineChart",loader:a.a.createElement(j.a,{size:100,color:"rgb(93, 188, 210)"}),data:[[{type:"date",label:"Date"}].concat(l)].concat(t.length>0?t[0].sort((function(e,t){return U()(e,"MM/DD/YYYY").isBefore(U()(t,"MM/DD/YYYY"))?-1:1})).map((function(e){var t=e?e.split("/"):null;return[t.length>0?new Date(t[2],t[0]-1,t[1]):null,l.map((function(t){return n[0].filter((function(n){return n.date===e&&n.sex===t})).length}))].flat()})):[]),options:{backgroundColor:"transparent",width:500,chartArea:{width:"50%",height:"50%"}}})))},z=function(e){var t=e.filteredUniqueDates,n=e.filteredTimelineRaceData,r=e.filteredRaceUniqueValues,o=e.graphOption,l=r.map((function(e){return e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")}));return a.a.createElement("div",{className:"bottom_info_panel_info_box",onDragStart:function(e){return e.preventDefault()},style:{display:"trends"===o?"block":"none"}},a.a.createElement("p",{className:"bottom_info_section_title"},"Race Trends"),a.a.createElement("div",{className:"bottom_info_pie_container"},a.a.createElement(k.a,{chartType:"LineChart",loader:a.a.createElement(j.a,{size:100,color:"rgb(93, 188, 210)"}),data:[[{type:"date",label:"Date"}].concat(l)].concat(t.length>0?t[0].sort((function(e,t){return U()(e,"MM/DD/YYYY").isBefore(U()(t,"MM/DD/YYYY"))?-1:1})).map((function(e){var t=e?e.split("/"):null;return[t.length>0?new Date(t[2],t[0]-1,t[1]):null,l.map((function(t){return n[0].filter((function(n){return n.date===e&&n.race.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" ").split("/").map((function(e){return e[0].toUpperCase()+e.slice(1,e.indexOf(" ")).toLowerCase()+e.slice(e.indexOf(" "))})).join("/")===t})).length}))].flat()})):[]),options:{backgroundColor:"transparent",width:500,chartArea:{width:"50%",height:"50%"}}})))},I=n(113),Q=function(e){var t=e.tooltipVisible,n=e.filteredAgeGroup,o=e.filteredRaceArr,l=e.filteredSexArr,i=e.filteredBoroughArr,c=e.filteredOffenseDescriptionArr,u=e.filteredArrestCategory,f=e.filteredUniqueCategory,m=e.uniqueValues,d=e.filteredAgeGroupData,p=e.filteredRaceUniqueValues,g=e.filteredSexUniqueValues,E=e.filteredBoroughUniqueValues,h=e.filteredOffenseDescriptionUniqueValues,_=e.currentFilters,y=e.loadedYears,v=e.filteredUniqueDates,O=e.filteredTimelineAgeGroupData,D=e.filteredTimelineBoroughData,A=e.filteredTimelineCategoryData,N=e.filteredTimelineSexData,R=e.filteredTimelineRaceData,S=Object(r.useRef)(null),C=Object(r.useState)("overview"),k=Object(s.a)(C,2),w=k[0],j=k[1];return a.a.createElement("div",{className:"bottom_info_panel_container",style:{zIndex:t?-1:0}},a.a.createElement("div",{className:"bottom_info_main_info_box"},a.a.createElement("div",{className:"filters_applied"},a.a.createElement("h2",null,"Filters Applied"),0===_.year.length&&0===_.category.length&&0===_.offense.length&&0===_.age.length&&0===_.race.length&&0===_.sex.length&&0===_.borough.length?a.a.createElement("p",{className:"no_filters_applied_statement"},"No filters currently applied"):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,0===_.year.length||_.year.length===y.length?null:1===_.year.length?"Year: ":"Years: "),0===_.year.length||_.year.length===y.length?null:_.year.join(", ")),a.a.createElement("p",null,a.a.createElement("strong",null,0===_.category.length?null:"Categor"+(_.category.length>1?"ies: ":"y: ")),0===_.category.length?null:_.category.map((function(e){return"F"===e?"Felony":"M"===e?"Misdemeanor":"Violation"})).join(", ")),a.a.createElement("p",null,a.a.createElement("strong",null,0===_.offense.length?null:"Offense"+(1===_.offense.length?": ":"s: ")),0===_.offense.length?null:_.offense.join(", ")),a.a.createElement("p",null,a.a.createElement("strong",null,0===_.age.length?null:"Age"+(1===_.age.length?": ":"s: ")),0===_.age.length?null:_.age.map((function(e){return"65"===e?"65+":e})).join(", ")),a.a.createElement("p",null,a.a.createElement("strong",null,0===_.race.length?null:"Race"+(1===_.race.length?": ":"s: ")),0===_.race.length?null:_.race.join(", ")),a.a.createElement("p",null,a.a.createElement("strong",null,0===_.sex.length?null:"Sex: "),0===_.sex.length?null:_.sex.map((function(e){return"M"===e?"Male":"Female"})).join(", ")),a.a.createElement("p",null,a.a.createElement("strong",null,0===_.borough.length?null:"Borough"+(1===_.borough.length?": ":"s: ")),0===_.borough.length?null:_.borough.map((function(e){return"B"===e?"Bronx":"Q"===e?"Queens":"M"===e?"Manhattan":"K"===e?"Brooklyn":"S"===e?"Staten Island":"Unknown"})).join(", ")))),a.a.createElement("div",{className:"graph_options_container"},a.a.createElement("p",null,"Graph Options"),a.a.createElement(I.RadioGroup,{onChange:function(e){return j(e)},horizontal:!0,value:w},a.a.createElement(I.RadioButton,{rootColor:"rgb(190, 190, 190)",pointColor:"rgb(0, 0, 128)",value:"overview"},"Overview"),a.a.createElement(I.RadioButton,{rootColor:"rgb(190, 190, 190)",pointColor:"rgb(0, 0, 128)",value:"trends"},"Trends")))),a.a.createElement("div",{className:"carousel_container"},a.a.createElement(b.a,{color:"rgb(0, 0, 0)",className:"carousel_left_arrow",onClick:function(){return S.slidePrev()}}),a.a.createElement(T.a,{ref:function(e){return S=e},autoPlayInterval:5e3,autoPlay:!0,fadeOutAnimation:!0,dotsDisabled:!0,mouseTrackingEnabled:!0,playButtonEnabled:!1,disableAutoPlayOnAction:!1,responsive:{0:{items:4}},preservePosition:!0,items:[a.a.createElement(x,{key:"overview",filteredArrestCategory:u,graphOption:w}),a.a.createElement(B,{key:"overview",filteredAgeGroup:n,filteredAgeGroupData:d,graphOption:w}),a.a.createElement(Y,{key:"overview",filteredRaceUniqueValues:p,filteredRaceArr:o,graphOption:w}),a.a.createElement(L,{key:"overview",filteredUniqueDates:v,filteredSexUniqueValues:g,filteredSexArr:l,graphOption:w}),a.a.createElement(P,{key:"overview",filteredBoroughUniqueValues:E,filteredBoroughArr:i,graphOption:w}),a.a.createElement(F,{key:"overview",filteredOffenseDescriptionArr:c,filteredOffenseDescriptionUniqueValues:h,graphOption:w}),a.a.createElement(G,{key:"trends",filteredTimelineCategoryData:A,filteredUniqueDates:v,filteredArrestCategory:u,graphOption:w,filteredUniqueCategory:f,uniqueValues:m}),a.a.createElement(q,{key:"trends",filteredAgeGroupData:d,filteredUniqueDates:v,filteredTimelineAgeGroupData:O,graphOption:w}),a.a.createElement(V,{key:"trends",filteredBoroughUniqueValues:E,filteredUniqueDates:v,filteredTimelineBoroughData:D,graphOption:w}),a.a.createElement(z,{key:"trends",filteredRaceUniqueValues:p,filteredUniqueDates:v,filteredTimelineRaceData:R,graphOption:w}),a.a.createElement(W,{key:"trends",filteredUniqueDates:v,filteredSexUniqueValues:g,filteredTimelineSexData:N,graphOption:w})].filter((function(e){return e.key===w}))}),a.a.createElement(b.b,{color:"rgb(0, 0, 0)",className:"carousel_right_arrow",onClick:function(){return S.slideNext()}})))},H=n(121),K=n(162),J=n.n(K),X=n(163),Z=n.n(X),$=n(76),ee=(n(292),{2006:371932,2007:403229,2008:401526,2009:421314,2010:422320,2011:412856,2012:396278,2013:393807,2014:387725,2015:339468,2016:314862,2017:286223,2018:246772,2019:214616,2020:74783}),te=n(123),ne=n.n(te);function re(){var e=Object(u.a)(["\n    display: block;\n    margin: 0 auto;\n  "]);return re=function(){return e},e}var ae=new WebSocket("ws://localhost:4000"),oe=window.location.href.replace(/^http/,"ws");ae=new WebSocket(oe),U.a.extend(Z.a);var le=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1],l=Object(r.useState)(""),u=Object(s.a)(l,2),p=u[0],g=u[1],b=Object(r.useState)(!1),E=Object(s.a)(b,2),h=E[0],_=E[1],y=Object(r.useState)("rgb(93, 188, 210)"),v=Object(s.a)(y,2),O=v[0],D=v[1],A=Object(r.useState)(!1),R=Object(s.a)(A,2),C=R[0],T=R[1],k=Object(r.useState)([]),w=Object(s.a)(k,2),j=w[0],x=w[1],B=Object(r.useState)([]),Y=Object(s.a)(B,2),L=Y[0],P=Y[1],F=Object(r.useState)(!1),M=Object(s.a)(F,2),q=M[0],V=M[1],G=Object(r.useState)([]),W=Object(s.a)(G,2),z=W[0],I=W[1],K=Object(r.useState)(0),X=Object(s.a)(K,2),Z=X[0],te=X[1],oe=Object(r.useState)(!1),le=Object(s.a)(oe,2),ie=le[0],ce=le[1],ue=Object(r.useState)([2020]),se=Object(s.a)(ue,2),fe=se[0],me=se[1],de=Object(r.useState)([]),pe=Object(s.a)(de,2),ge=pe[0],be=pe[1],Ee=Object(r.useState)([]),he=Object(s.a)(Ee,2),_e=he[0],ye=he[1],ve=Object(r.useState)([]),Oe=Object(s.a)(ve,2),De=Oe[0],Ae=Oe[1],Ne=Object(r.useState)([]),Re=Object(s.a)(Ne,2),Se=Re[0],Ce=Re[1],Te=Object(r.useState)([]),ke=Object(s.a)(Te,2),we=ke[0],je=ke[1],xe=Object(r.useState)([]),Be=Object(s.a)(xe,2),Ye=Be[0],Le=Be[1],Pe=Object(r.useState)({year:[],category:[],offense:[],age:[],race:[],sex:[],borough:[]}),Fe=Object(s.a)(Pe,2),Me=Fe[0],Ue=Fe[1],qe=Object(r.useState)(window.innerWidth),Ve=Object(s.a)(qe,1)[0],Ge=Object(r.useState)(""),We=Object(s.a)(Ge,2),ze=We[0],Ie=We[1],Qe=Object(r.useRef)([]),He=Object(r.useRef)([{}]),Ke=Object(r.useRef)([]),Je=Object(r.useRef)(null);Object(r.useLayoutEffect)((function(){var e=function(){window.innerWidth!==ze&&Ie(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[ze]);var Xe=Object(H.css)(re()),Ze=function(e,t,n){return n.indexOf(e)===t},$e=p?p.flat():[""],et=Ke.current.flat(),tt=function(e){return/\d/.test(e)},nt=$e.length>0&&$e.map((function(e){return e.AGE_GROUP})).filter((function(e){return"AGE_GROUP"!==e})),rt=$e.length>0&&$e.map((function(e){return e.PERP_RACE})).filter((function(e){return"PERP_RACE"!==e})),at=$e.length>0&&$e.map((function(e){return"K"===e.ARREST_BORO&&Number(e.Latitude)>40.73912?"B":"M"===e.ARREST_BORO&&Number(e.Longitude)>-73.920961&&Number(e.Latitude)<40.800709?"Q":"B"===e.ARREST_BORO&&Number(e.Latitude)<40.697465?"K":"Q"===e.ARREST_BORO&&Number(e.Longitude)<-73.962745?"M":"Q"===e.ARREST_BORO&&Number(e.Longitude)<-73.878559&&Number(e.Latitude)>40.787907?"B":e.ARREST_BORO})).filter((function(e){return"ARREST_BORO"!==e})),ot=$e.length>0&&$e.map((function(e){return"OFNS_DESC"!==e.OFNS_DESC&&e.OFNS_DESC})),lt=et.map((function(e){return e.LAW_CAT_CD})).filter((function(e){return"LAW_CAT_CD"!==e})),it=et.map((function(e){return e.AGE_GROUP})).filter((function(e){return"AGE_GROUP"!==e})),ct=et.map((function(e){return e.PERP_SEX})).filter((function(e){return"PERP_SEX"!==e})),ut=et.map((function(e){return e.PERP_RACE})).filter((function(e){return"PERP_RACE"!==e})),st=et.map((function(e){return"K"===e.ARREST_BORO&&Number(e.Latitude)>40.77?"B":"M"===e.ARREST_BORO&&Number(e.Longitude)>-73.920961&&Number(e.Latitude)<40.800709?"Q":"B"===e.ARREST_BORO&&Number(e.Latitude)<40.697465?"K":"B"===e.ARREST_BORO&&Number(e.Latitude)>40.796669&&Number(e.Longitude)<-73.932786||"B"===e.ARREST_BORO&&Number(e.Latitude)<40.796669&&Number(e.Longitude)<-73.98||"Q"===e.ARREST_BORO&&Number(e.Longitude)<-73.962745?"M":"Q"===e.ARREST_BORO&&Number(e.Longitude)<-73.878559&&Number(e.Latitude)>40.787907?"B":e.ARREST_BORO})).filter((function(e){return"ARREST_BORO"!==e})),ft=et.map((function(e){return"OFNS_DESC"!==e.OFNS_DESC&&e.OFNS_DESC})),mt=Ke.current.map((function(e){return e.map((function(e){return e.LAW_CAT_CD})).filter((function(e){return"LAW_CAT_CD"!==e})).filter(Ze)})),dt=Ke.current.map((function(e){return e.map((function(e){return e.ARREST_DATE})).filter((function(e){return"ARREST_DATE"!==e})).filter(Ze)})),pt=Ke.current.map((function(e){return e.map((function(e){return{date:e.ARREST_DATE,age_group:e.AGE_GROUP}})).filter((function(e){return"ARREST_DATE"!==e.date&&"AGE_GROUP"!==e.age_group}))})),gt=Ke.current.map((function(e){return e.map((function(e){return{date:e.ARREST_DATE,borough:e.ARREST_BORO}})).filter((function(e){return"ARREST_DATE"!==e.date&&"ARREST_BORO"!==e.borough}))})),bt=Ke.current.map((function(e){return e.map((function(e){return{date:e.ARREST_DATE,category:"F"===e.LAW_CAT_CD?"Felony":"M"===e.LAW_CAT_CD?"Misdemeanor":"Violation"}})).filter((function(e){return"ARREST_DATE"!==e.date&&"LAW_CAT_CD"!==e.category}))})),Et=Ke.current.map((function(e){return e.map((function(e){return{date:e.ARREST_DATE,sex:"F"===e.PERP_SEX?"Female":"Male"}})).filter((function(e){return"ARREST_DATE"!==e.date&&"PERP_SEX"!==e.sex}))})),ht=Ke.current.map((function(e){return e.map((function(e){return{date:e.ARREST_DATE,race:e.PERP_RACE}})).filter((function(e){return"ARREST_DATE"!==e.date&&"PERP_RACE"!==e.race}))})),_t=it.filter(Ze).sort((function(e,t){return(tt(e)?Number(e.split("<"===e[0]?"<":"-")["<"===e[0]?1:0]):null)-(tt(t)?Number(t.split("<"===t[0]?"<":"-")["<"===t[0]?1:0]):null)})),yt=ut.filter(Ze).sort(),vt=ct.filter(Ze).sort(),Ot=st.filter(Ze).sort(),Dt=ft.filter(Ze).sort(),At=nt.filter(Ze).sort((function(e,t){return(tt(e)?Number(e.split("<"===e[0]?"<":"-")["<"===e[0]?1:0]):null)-(tt(t)?Number(t.split("<"===t[0]?"<":"-")["<"===t[0]?1:0]):null)})),Nt=rt.filter(Ze).sort(),Rt=at.filter(Ze).sort(),St=ot.filter(Ze).sort();Object(r.useEffect)((function(){if(C)D("rgb(255, 0, 0)");else for(var e=function(){var e=setInterval((function(){D("rgb(93, 188, 210)"===O?"rgb(255, 255, 255)":"rgb(255, 255, 255)"===O?"#f9c124":"rgb(93, 188, 210)")}),500);return{v:function(){clearInterval(e)}}};""===p;){var t=e();if("object"===typeof t)return t.v}}),[p,O,C]),Object(r.useEffect)((function(){S.a.enable()}),[]);var Ct=Object(r.useCallback)((function(){var e,t,n=Ke.current.map((function(e){return e.map((function(e){return e.ARREST_DATE})).filter((function(e){return"ARREST_DATE"!==e})).map((function(e){return Number(U()(e,"MM/DD/YYYY").format("YYYY"))})).filter(Ze)}));j.length!==Ke.length&&(Qe.current=Ke.current.map((function(e,t){var r=e.map((function(e){return e.ARREST_DATE})).filter((function(e){return"ARREST_DATE"!==e})).map((function(e){return U()(e,"MM/DD/YYYY").format("YYYY")})).filter(Ze);return new d.a({id:"chunk-".concat(t),data:e,visible:n.flat().includes(Number(r[0])),filled:!0,radiusMinPixels:3,getPosition:function(e){return[Number(e.Longitude),Number(e.Latitude)]},getFillColor:function(e){return"F"===e.LAW_CAT_CD?[255,0,0]:"M"===e.LAW_CAT_CD?[255,116,0]:[255,193,0]},pickable:!0,parameters:{depthTest:!1}})})),e=j,t=Qe.current,e.length===t.length&&e.every((function(e,n){return e===t[n]}))||x(Qe.current))}),[Ke,j]),Tt=Object(r.useCallback)((function(e){var t=e.year;He.current[0][t]?He.current[0][t].push(e.data):Object.assign(He.current[0],Object(c.a)({},t,[e.data]));var n=Object.keys(He.current[0]).map((function(e,t){return Object(c.a)({},e,He.current[0][e])})).map((function(e){for(var t=Object.keys(e)[0],n=[],r=0;r<e[t].length;r++)for(var a=e[t][r],o=0;o<a.length;o++)n.push(a[o]);return n}));Ke.current=n,g(n),0!==j.length&&j.length===n.length||Ct()}),[He,Ct,j.length]);Object(r.useEffect)((function(){var e=He.current,t=z[0]?z[0].toString().slice():null;if(z[0])var n=setInterval((function(){if(e[0][t.toString()]){var r=(e[0][t.toString()].map((function(e){return e.length})).reduce((function(e,t){return e+t}),0)/ee[t.toString()]).toFixed(1);Je.current&&Z!==r&&te(Number(r))}return function(){clearInterval(n)}}),500)}),[Z,z]),Object(r.useEffect)((function(){if(Z<1&&Je.current)$.b.update(Je.current,{progress:Z});else if(1===Z){$.b.update(Je.current,{render:"Data for ".concat(z[0].toString()," successfully loaded"),type:$.b.TYPE.SUCCESS,autoClose:!1,progress:1,closeButton:!0});var e=setTimeout((function(){$.b.dismiss()}),1e4);return function(){clearTimeout(e)}}}),[Z,z]),Object(r.useEffect)((function(){if(z.length>0){var e=z[0];Je.current||(Je.current=$.b.info("Loading ".concat(e," data"),{position:"top-center",autoClose:!1,hideProgressBar:!1,progress:0}))}}),[z,Z]);var kt=Object.keys(He.current[0]).map((function(e,t){return Object(c.a)({},e,He.current[0][e])})).map((function(e,t){var n=Object.keys(He.current[0])[t],r=[];if(e[n])for(var a=0;a<e[n].length;a++)for(var o=e[n][a],l=0;l<o.length;l++)r.push(o[l]);return r})),wt=Object(r.useCallback)((function(e){L.includes(2020)?(ae.send(e),ae.onmessage=function(t){var n=ne.a.decompressFromEncodedURIComponent(t.data);Tt({year:e,data:JSON.parse(n)}),L.includes(e)||P([].concat(Object(i.a)(L),[e])),1===Z&&(te(0),L.includes(e)||P([].concat(Object(i.a)(L),[e])),z.length>0&&I([]),q&&V(!1))}):ae.onopen=function(t){ae.send(e),setInterval((function(){ae.send(".")}),55e3),ae.onmessage=function(t){var n=ne.a.decompressFromEncodedURIComponent(t.data);console.log(JSON.parse(n)),Tt({year:e,data:JSON.parse(n)}),L.includes(e)||P([].concat(Object(i.a)(L),[e])),1===Z&&(L.includes(e)&&P([].concat(Object(i.a)(L),[e])),z.length>0&&I([]),q&&V(!1))}}}),[L,Tt,q,z.length,Z]);Object(r.useEffect)((function(){L.includes(2020)?z.length>0&&!He.current[0][z[0]]&&wt(z[0]):wt(2020)}),[Tt,p,L,wt,z]);var jt=function(e,t,n){var r=document.getElementsByClassName("deck-tooltip")[0];if(e){h||_(!0);var a=e.ARREST_DATE,o=e.LAW_CAT_CD,l=e.OFNS_DESC,i=e.PD_DESC,c=e.AGE_GROUP,u=e.PERP_SEX,s=e.PERP_RACE;r.innerHTML="\n      <p><strong>Date of Arrest:</strong> ".concat(a,"</p>\n      <p><strong>Category:</strong> ").concat("F"===o?"Felony":"M"===o?"Misdemeanor":"Violation","</p>\n      <p><strong>Offense:</strong> ").concat(l,"</p>\n      <p><strong>Offense Description:</strong> ").concat(i,"</p>\n      <p><strong>Perpetrator's Age Group:</strong> ").concat(c,"</p>\n      <p><strong>Perpetrator's Sex:</strong> ").concat("M"===u?"Male":"Female","</p>\n      <p><strong>Perpetrator's Race:</strong> ").concat(s.toLowerCase().split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "),"</p>\n  "),r.style.display="inline-block",r.style.background="#000",r.style.color="rgb(235, 235, 235)",r.style.fontSize="1rem",r.style.overflowWrap="break-word",r.style.lineHeight="1rem",r.style.maxWidth="10rem",r.style.opacity=.9,r.style.left=t+"px",r.style.top=n+"px"}else h&&_(!1),r.style.opacity=0};return Object(r.useEffect)((function(){if("object"===typeof p&&p.flat().length>7e4){var e=setTimeout((function(){return ce(!0)}),3e3);return function(){clearTimeout(e)}}}),[p]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"loading_container",style:{display:""===p||"object"===typeof p&&p.flat().length<7e4?"flex":"none"}},a.a.createElement(J.a,{css:Xe,size:50,color:O,style:{transition:"all 0.5s ease"},loading:""===p||"object"===typeof p&&p.flat().length<7e4}),a.a.createElement("p",null,C?"Error Initializing NYPD Arrest Map":"Initializing NYPD Arrest Map")),a.a.createElement("div",{className:"nypd_arrest_map_container",style:{opacity:""===p||"object"===typeof p&&p.flat().length<7e4?0:1}},a.a.createElement($.a,{position:"bottom-center",autoClose:!1,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!1}),a.a.createElement(N,{loadData:p?p.flat():[""],raceUniqueValues:Nt,boroughUniqueValues:Rt,offenseDescriptionUniqueValues:St,ageGroupData:At,setFilters:function(e,t,n,r,a,o,l){var i=e.filter((function(e){return!L.includes(e)}));Ue({year:e,category:t,offense:n,age:r,race:a,sex:o,borough:l}),Ke.current=kt.map((function(i){return i.filter((function(i){return!(!e.includes(Number(U()(i.ARREST_DATE,"MM/DD/YYYY").format("YYYY")))&&0!==e.length||!t.includes(i.LAW_CAT_CD)&&0!==t.length||!n.includes(i.OFNS_DESC)&&0!==n.length||!r.includes(i.AGE_GROUP)&&0!==r.length||!a.includes(i.PERP_RACE)&&0!==a.length||!o.includes(i.PERP_SEX)&&0!==o.length||!a.includes(i.PERP_RACE)&&0!==a.length||!l.includes("K"===i.ARREST_BORO&&Number(i.Latitude)>40.77?"B":"M"===i.ARREST_BORO&&Number(i.Longitude)>-73.920961&&Number(i.Latitude)<40.800709?"Q":"B"===i.ARREST_BORO&&Number(i.Latitude)<40.697465?"K":"B"===i.ARREST_BORO&&Number(i.Latitude)>40.796669&&Number(i.Longitude)<-73.932786||"B"===i.ARREST_BORO&&Number(i.Latitude)<40.796669&&Number(i.Longitude)<-73.98||"Q"===i.ARREST_BORO&&Number(i.Longitude)<-73.962745?"M":"Q"===i.ARREST_BORO&&Number(i.Longitude)<-73.878559&&Number(i.Latitude)>40.787907?"B":i.ARREST_BORO)&&0!==l.length)}))})),!i.length>0&&setTimeout((function(){return V(!1)}),2e3),Ct()},initialScreenWidth:Ve,currentScreenWidth:ze,loadedYears:L,pointClicked:h,changeLaddaLoading:V,laddaLoading:q,filteredData:Ke.current,handleDownloadYear:function(e){I([e])},yearFilter:fe,changeYearFilter:me,categoryFilter:ge,changeCategoryFilter:be,offenseFilter:_e,changeOffenseFilter:ye,ageFilter:De,changeAgeFilter:Ae,raceFilter:Se,changeRaceFilter:Ce,sexFilter:we,changeSexFilter:je,boroughFilter:Ye,changeBoroughFilter:Le}),a.a.createElement(f.a,{initialViewState:{longitude:-73.935242,latitude:40.73061,zoom:window.innerWidth<1200?9:11,minZoom:9,pitch:0,bearing:0},controller:!0,layers:Qe.current,onHover:function(e){var t=e.object,n=e.x,r=e.y;return jt(t,n,r)},onClick:function(e){var t=e.object,n=e.x,r=e.y;return jt(t,n,r)},pickingRadius:10,onLoad:function(){return o(!0)},onError:function(e){return T(!0)}},a.a.createElement(m.a,{mapStyle:"mapbox://styles/mapbox/dark-v9",mapboxApiAccessToken:"pk.eyJ1IjoibGVpZ2hoYWxsaWRheSIsImEiOiJjanVma3E4aGMwZjk0NDVwZzFpcG84M3cwIn0.GrI8s893TPtJfjHzpMMP_A"})),n?a.a.createElement(Q,{mapVisible:ie,loadData:$e,loadDataChunks:He.current,tooltipVisible:h,filteredArrestCategory:lt,filteredAgeGroupData:_t,filteredRaceUniqueValues:yt,filteredSexUniqueValues:vt,filteredBoroughUniqueValues:Ot,filteredOffenseDescriptionUniqueValues:Dt,filteredUniqueCategory:mt,filteredAgeGroup:it,filteredRaceArr:ut,filteredSexArr:ct,filteredBoroughArr:st,filteredOffenseDescriptionArr:ft,loadedYears:L,currentFilters:Me,filteredUniqueDates:dt,filteredTimelineAgeGroupData:pt,filteredTimelineBoroughData:gt,filteredTimelineCategoryData:bt,filteredTimelineSexData:Et,filteredTimelineRaceData:ht,uniqueValues:Ze}):null))};n(298).config(),l.a.render(a.a.createElement(le,null),document.getElementById("root"))}},[[180,1,2]]]);
//# sourceMappingURL=main.6dcc0f1a.chunk.js.map